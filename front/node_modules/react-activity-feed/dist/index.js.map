{"version":3,"file":"index.js","sources":["../src/utils.js","../src/Context/FeedManager.js","../src/errors.js","../src/Streami18n.js","../src/Context/StreamApp.js","../src/Context/Feed.js","../src/images/placeholder.png","../src/components/Avatar.js","../src/components/UserBar.js","../src/components/Card.js","../src/components/Audio.js","../src/components/Video.js","../src/components/Gallery.js","../src/components/Activity.js","../src/components/Link.js","../src/components/NewActivitiesNotification.js","../src/components/Button.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/components/FeedPlaceholder.js","../src/components/FlatFeed.js","../src/components/AvatarGroup.js","../src/components/AttachedActivity.js","../src/components/Dropdown.js","../src/components/Notification.js","../src/components/NotificationFeed.js","../src/components/SinglePost.js","../src/components/Panel.js","../src/components/PanelHeader.js","../src/components/PanelFooter.js","../src/components/PanelContent.js","../src/components/Textarea.js","../src/components/EmojiPicker.js","../src/components/Title.js","../src/components/StatusUpdateForm.js","../src/components/IconBadge.js","../src/components/DropdownPanel.js","../src/components/NotificationDropdown.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/ReactionIcon.js","../src/components/ReactionToggleIcon.js","../src/images/like-active@1x.png","../src/images/like@1x.png","../src/components/LikeButton.js","../src/images/repost-active@1x.png","../src/images/repost@1x.png","../src/components/RepostButton.js","../src/components/Flex.js","../src/components/ActivityFooter.js","../src/components/FollowButton.js","../src/components/ReactionList.js","../src/components/CommentItem.js","../src/components/CommentList.js","../src/components/CommentField.js","../src/components/DataLabel.js"],"sourcesContent":["// @flow\nimport * as React from 'react';\nimport URL from 'url-parse';\nimport anchorme from 'anchorme';\nimport _truncate from 'lodash/truncate';\nimport twitter from 'twitter-text';\nimport type { UserResponse } from './types';\nimport Dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport minMax from 'dayjs/plugin/minMax';\nimport type { Renderable, RenderableButNotElement, FileLike } from './types';\nDayjs.extend(utc);\nDayjs.extend(minMax);\n\n// import type { UserResponse } from 'getstream';\n\nexport function humanizeTimestamp(\n  timestamp: string | number,\n  tDateTimeParser: (input?: string | number) => Function,\n): string {\n  // Following calculation is based on assumption that tDateTimeParser()\n  // either returns momentjs or dayjs object.\n  const time = tDateTimeParser(timestamp).add(\n    Dayjs(timestamp).utcOffset(),\n    'minute',\n  ); // parse time as UTC\n  const now = tDateTimeParser();\n  return time.from(now);\n}\n\nexport const smartRender = (\n  ElementOrComponentOrLiteral: Renderable,\n  props?: {},\n  fallback?: Renderable,\n) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    return ((ElementOrComponentOrLiteral: any): React.Element<any>);\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ((ElementOrComponentOrLiteral: any): RenderableButNotElement);\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const getRetinaImage = (images: string) =>\n  images\n    .split('|')\n    .map((item, i) => `${item} ${i + 1}x`)\n    .join(', ');\n\nexport function userOrDefault(\n  user: UserResponse | string | {| error: string |},\n): UserResponse {\n  let actor: UserResponse;\n  const notFound = {\n    id: '!not-found',\n    created_at: '',\n    updated_at: '',\n    data: { name: 'Unknown', profileImage: '' },\n  };\n  if (!user || typeof user === 'string' || typeof user.error === 'string') {\n    actor = notFound;\n  } else {\n    //$FlowBug\n    actor = (user: any);\n  }\n  return actor;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport function dataTransferItemsHaveFiles(\n  items: ?(DataTransferItem[]),\n): boolean {\n  if (!items || !items.length) {\n    return false;\n  }\n  for (const item of items) {\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getFileLikes(items) {\n  const fileLikes = [];\n  for (const item of items) {\n    if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n  return fileLikes;\n}\n\nexport async function dataTransferItemsToFiles(\n  items: ?(DataTransferItem[]),\n): Promise<FileLike[]> {\n  if (!items || !items.length) {\n    return [];\n  }\n\n  const fileLikes = getFileLikes(items);\n  // If there are files inside the DataTransferItem prefer those\n  if (fileLikes.length) {\n    return fileLikes;\n  }\n\n  // Otherwise extract images from html\n  const blobPromises = [];\n  const parser = new DOMParser();\n  for (const item of items) {\n    if (item.type === 'text/html') {\n      blobPromises.push(\n        new Promise((accept) => {\n          item.getAsString(async (s) => {\n            const doc = parser.parseFromString(s, 'text/html');\n            const imageTags = doc.getElementsByTagName('img');\n\n            const imagePromises = [];\n            for (const tag of imageTags) {\n              if (!tag.src) {\n                continue;\n              }\n              imagePromises.push(\n                (async () => {\n                  let res;\n                  try {\n                    res = await fetch(tag.src);\n                  } catch (e) {\n                    return;\n                  }\n                  const contentType =\n                    res.headers.get('Content-type') ||\n                    'application/octet-stream';\n                  const buf = await res.arrayBuffer();\n                  const blob = new Blob([buf], { type: contentType });\n                  fileLikes.push(blob);\n                })(),\n              );\n            }\n            await Promise.all(imagePromises);\n            accept();\n          });\n        }),\n      );\n    }\n  }\n  await Promise.all(blobPromises);\n  return fileLikes;\n}\n\nexport function inputValueFromEvent(\n  event?: ?SyntheticEvent<HTMLTextAreaElement> | ?Event,\n): ?string {\n  if (!event) {\n    return;\n  }\n  let target;\n  if (event.currentTarget) {\n    target = event.currentTarget;\n  } else {\n    target = event.target;\n  }\n  // Trick flow into believing the target maybe has a value field\n  const inputTarget: { value?: string } = (target: any);\n  return inputTarget.value;\n}\n\nexport function sanitizeURL(url: ?string): ?string {\n  if (url == null) {\n    return url;\n  }\n\n  const proto = URL(url).protocol;\n  // allow http, https, ftp\n  // IMPORTANT: Don't allow data: protocol because of:\n  // <a href=\"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk7PC9zY3JpcHQ+\" target=\"_blank\">here</a>\n  if (proto === 'https:' || proto === 'http:' || proto === 'ftp:') {\n    return url;\n  }\n  return undefined;\n}\n\nexport const textRenderer = (\n  text: string,\n  parentClass: string,\n  onClickMention?: (word: string) => mixed,\n  onClickHashtag?: (word: string) => mixed,\n) => {\n  if (text === undefined) return;\n  return text\n    .split(' ')\n    .map((word, i) => {\n      if (onClickMention && word.includes('@')) {\n        const mention = twitter.extractMentions(word);\n        if (!mention.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`@${mention[0]}`) &&\n              word.slice(0, word.indexOf(mention[0]) - 1)}\n            <a\n              onClick={() => onClickMention && onClickMention(mention[0])}\n              className={`${parentClass}__mention`}\n            >\n              @{mention[0]}\n            </a>\n            {!word.endsWith(mention[0]) &&\n              word.slice(word.indexOf(mention[0]) + mention[0].length)}\n          </React.Fragment>\n        );\n      } else if (onClickHashtag && word.includes('#')) {\n        const hashtag = twitter.extractHashtags(word);\n        if (!hashtag.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`#${hashtag[0]}`) &&\n              word.slice(0, word.indexOf(hashtag[0]) - 1)}\n            <a\n              onClick={() => onClickHashtag && onClickHashtag(hashtag[0])}\n              className={`${parentClass}__hashtag`}\n            >\n              #{hashtag[0]}\n            </a>\n            {!word.endsWith(hashtag[0]) &&\n              word.slice(word.indexOf(hashtag[0]) + hashtag[0].length)}\n          </React.Fragment>\n        );\n      }\n      if (anchorme.validate.url(word) || anchorme.validate.email(word)) {\n        const link = anchorme(word, { list: true });\n        if (\n          link[0].protocol !== 'http://' &&\n          link[0].protocol !== 'https://' &&\n          link[0].protocol !== 'mailto:'\n        ) {\n          return word;\n        }\n        const url = link[0].protocol + link[0].encoded;\n        const urlText = _truncate(link[0].encoded, { length: 33 });\n        return (\n          <a\n            href={url}\n            className={`${parentClass}__link`}\n            target=\"blank\"\n            rel=\"noopener\"\n            key={`item-${i}`}\n          >\n            {urlText}\n          </a>\n        );\n      }\n\n      return word;\n    })\n    .reduce((accu, elem) => (accu === null ? [elem] : [accu, ' ', elem]));\n};\n","// @flow\n/* eslint sonarjs/no-identical-functions: 0 */\nimport immutable from 'immutable';\nimport URL from 'url-parse';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ReactionRequestOptions,\n  ReactionFilterResponse,\n  ReactionFilterOptions,\n} from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseReaction,\n} from '../types';\nimport type { FeedInnerProps } from './Feed';\nimport { generateRandomId } from '../utils';\nimport _isPlainObject from 'lodash/isPlainObject';\nimport _isEqual from 'lodash/isEqual';\nimport _remove from 'lodash/remove';\n\n// type FR = FeedResponse<Object, Object>;\ntype FR = FeedResponse<{}, {}>;\ntype RR = ReactionFilterResponse<{}, {}>;\n\ntype FeedManagerState = {|\n  activityOrder: Array<string>,\n  activities: any,\n  refreshing: boolean,\n  lastResponse: ?FR,\n  lastReverseResponse: ?{ next: string },\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  subscription: ?any,\n  activityIdToPath: { [string]: Array<string> },\n  // activities created by creating a reaction with targetFeeds. It's a mapping\n  // of a reaction id to an activity id.\n  reactionActivities: { [string]: string },\n  // Used for finding reposted activities\n  activityIdToPaths: { [string]: Array<Array<string>> },\n  reactionIdToPaths: { [string]: Array<Array<string>> },\n  unread: number,\n  unseen: number,\n  numSubscribers: number,\n  reactionsBeingToggled: { [kind: string]: { [activityId: string]: boolean } },\n  childReactionsBeingToggled: {\n    [kind: string]: { [reactionId: string]: boolean },\n  },\n|};\n\nexport class FeedManager {\n  props: FeedInnerProps;\n  state: FeedManagerState = {\n    activityOrder: [],\n    activities: immutable.Map(),\n    activityIdToPath: {},\n    activityIdToPaths: {},\n    reactionIdToPaths: {},\n    reactionActivities: {},\n    lastResponse: null,\n    lastReverseResponse: null,\n    refreshing: false,\n    realtimeAdds: [],\n    realtimeDeletes: [],\n    subscription: null,\n    unread: 0,\n    unseen: 0,\n    numSubscribers: 0,\n    reactionsBeingToggled: {},\n    childReactionsBeingToggled: {},\n  };\n  registeredCallbacks: Array<() => mixed>;\n\n  constructor(props: FeedInnerProps) {\n    this.props = props;\n    const initialOptions = this.getOptions();\n    this.registeredCallbacks = [];\n    let previousUrl = '';\n    if (initialOptions.id_gte) {\n      previousUrl = `?id_lt=${initialOptions.id_gte}`;\n    } else if (initialOptions.id_gt) {\n      previousUrl = `?id_lte=${initialOptions.id_gt}`;\n    } else if (initialOptions.id_lte) {\n      previousUrl = `?id_gt=${initialOptions.id_lte}`;\n    } else if (initialOptions.id_lt) {\n      previousUrl = `?id_gte=${initialOptions.id_lt}`;\n    }\n    this.state.lastReverseResponse = { next: previousUrl };\n  }\n\n  register(callback: () => mixed) {\n    this.registeredCallbacks.push(callback);\n    this.subscribe();\n  }\n  unregister(callback: () => mixed) {\n    this.registeredCallbacks.splice(\n      this.registeredCallbacks.indexOf(callback),\n      1,\n    );\n    this.unsubscribe();\n  }\n\n  triggerUpdate() {\n    for (const callback of this.registeredCallbacks) {\n      callback();\n    }\n  }\n\n  setState = (\n    changed:\n      | $Shape<FeedManagerState>\n      | ((FeedManagerState) => $Shape<FeedManagerState>),\n  ) => {\n    if (typeof changed === 'function') {\n      changed = changed(this.state);\n    }\n    this.state = { ...this.state, ...changed };\n    this.triggerUpdate();\n  };\n\n  trackAnalytics = (\n    label: string,\n    activity: BaseActivityResponse,\n    track: ?boolean,\n  ) => {\n    const analyticsClient = this.props.analyticsClient;\n\n    if (!track) {\n      return;\n    }\n    if (!analyticsClient) {\n      console.warn(\n        'trackAnalytics was enabled, but analytics client was not initialized. ' +\n          'Please set the analyticsToken prop on StreamApp',\n      );\n      return;\n    }\n\n    const feed = this.props.client.feed(\n      this.props.feedGroup,\n      this.props.userId,\n    );\n\n    analyticsClient.trackEngagement({\n      label,\n      feed_id: feed.id,\n      content: {\n        foreign_id: activity.foreign_id,\n      },\n      location: this.props.analyticsLocation,\n    });\n  };\n\n  getActivityPath = (\n    activity: BaseActivityResponse | string,\n    ...rest: Array<string>\n  ) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    const activityPath = this.state.activityIdToPath[activityId];\n    if (activityPath === undefined) {\n      return [activityId, ...rest];\n    }\n    return [...activityPath, ...rest];\n  };\n\n  getActivityPaths = (activity: BaseActivityResponse | string) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    return this.state.activityIdToPaths[activityId];\n  };\n\n  getReactionPaths = (reaction: BaseReaction | string) => {\n    let reactionId;\n    if (typeof reaction === 'string') {\n      reactionId = reaction;\n    } else {\n      reactionId = reaction.id;\n    }\n\n    return this.state.reactionIdToPaths[reactionId];\n  };\n\n  onAddReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let reaction;\n    try {\n      if (this.props.doReactionAddRequest) {\n        reaction = await this.props.doReactionAddRequest(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      } else {\n        reaction = await this.props.client.reactions.add(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics(kind, activity, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...reaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n  };\n\n  onRemoveReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    id: string,\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doReactionDeleteRequest) {\n        await this.props.doReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics('un' + kind, activity, options.trackAnalytics);\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) =>\n              v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n  };\n\n  onToggleReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.reactionsBeingToggled[kind] || {};\n    if (togglingReactions[activity.id]) {\n      return;\n    }\n    togglingReactions[activity.id] = true;\n    this.state.reactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getActivityPaths(activity)[0], 'own_reactions', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveReaction(kind, activity, last.get('id'), options);\n    } else {\n      await this.onAddReaction(kind, activity, data, options);\n    }\n    delete togglingReactions[activity.id];\n  };\n\n  onAddChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let childReaction;\n    try {\n      if (this.props.doChildReactionAddRequest) {\n        childReaction = await this.props.doChildReactionAddRequest(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      } else {\n        childReaction = await this.props.client.reactions.addChild(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-child-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    // this.trackAnalytics(kind, reaction, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...childReaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_children', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onRemoveChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    id: string,\n    /* eslint-disable-next-line no-unused-vars */\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doChildReactionDeleteRequest) {\n        await this.props.doChildReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    // this.trackAnalytics('un' + kind, reaction, options.trackAnalytics);\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n\n    return this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn([...path, 'children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onToggleChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.childReactionsBeingToggled[kind] || {};\n    if (togglingReactions[reaction.id]) {\n      return;\n    }\n    togglingReactions[reaction.id] = true;\n    this.state.childReactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getReactionPaths(reaction)[0], 'own_children', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveChildReaction(kind, reaction, last.get('id'), options);\n    } else {\n      await this.onAddChildReaction(kind, reaction, data, options);\n    }\n    delete togglingReactions[reaction.id];\n  };\n\n  _removeActivityFromState = (activityId: string) =>\n    this.setState(\n      ({\n        activities,\n        activityOrder,\n        activityIdToPath,\n        activityIdToPaths,\n        reactionIdToPaths,\n      }) => {\n        const path = this.getActivityPath(activityId);\n        let outerId = activityId;\n        if (path.length > 1) {\n          // It's an aggregated group we should update the paths of everything in\n          // the list\n          const groupArrayPath = path.slice(0, -1);\n          activityIdToPath = this.removeFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        } else {\n          // Otherwise remove all things inside this activity from the path\n          // objects\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.get(activityId).toJS(),\n            activityIdToPaths,\n            [activityId],\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.get(activityId).toJS(),\n            reactionIdToPaths,\n            [activityId],\n          );\n        }\n\n        activities = activities.removeIn(path);\n        if (path.length > 1) {\n          const groupArrayPath = path.slice(0, -1);\n          if (activities.getIn(groupArrayPath).size === 0) {\n            outerId = path[0]; //\n          } else {\n            outerId = null;\n          }\n          activityIdToPath = this.addFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.addFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.addFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        }\n        if (outerId != null) {\n          activityOrder = activityOrder.filter((id) => id !== outerId);\n        }\n        return {\n          activities,\n          activityOrder,\n          activityIdToPaths,\n          reactionIdToPaths,\n          activityIdToPath,\n        };\n      },\n    );\n\n  onRemoveActivity = async (activityId: string) => {\n    try {\n      if (this.props.doActivityDeleteRequest) {\n        await this.props.doActivityDeleteRequest(activityId);\n      } else {\n        await this.feed().removeActivity(activityId);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-activity', {\n        activityId: this.props.feedGroup,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this._removeActivityFromState(activityId);\n  };\n\n  onMarkAsRead = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('read', group);\n\n  onMarkAsSeen = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('seen', group);\n\n  _onMarkAs = async (\n    type: 'seen' | 'read',\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => {\n    let groupArray: $ReadOnlyArray<string>;\n    let markArg = group;\n    if (group === true) {\n      groupArray = this.state.activityOrder;\n    } else if (Array.isArray(group)) {\n      groupArray = group.map((g) => g.id);\n      markArg = groupArray;\n    } else {\n      markArg = group.id;\n      groupArray = [group.id];\n    }\n    try {\n      await this.doFeedRequest({\n        limit: 1,\n        id_lte: this.state.activityOrder[0],\n        ['mark_' + type]: markArg,\n      });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n    }\n    this.setState((prevState) => {\n      const counterKey = 'un' + type;\n      let activities = prevState.activities;\n      let counter = prevState[counterKey];\n      for (const groupId of groupArray) {\n        const markerPath = [groupId, 'is_' + type];\n        if (activities.getIn(markerPath) !== false) {\n          continue;\n        }\n        activities = activities.setIn(markerPath, true);\n        counter--;\n      }\n      return { activities, [counterKey]: counter };\n    });\n  };\n\n  getOptions = (extraOptions?: FeedRequestOptions = {}): FeedRequestOptions => {\n    const propOpts = { ...this.props.options };\n    const { id_gt, id_gte, id_lt, id_lte, offset } = extraOptions;\n    if (id_gt || id_gte || id_lt || id_lte || offset != null) {\n      delete propOpts.id_gt;\n      delete propOpts.id_gte;\n      delete propOpts.id_lt;\n      delete propOpts.id_lte;\n      delete propOpts.offset;\n      delete propOpts.refresh;\n    }\n\n    return {\n      withReactionCounts: true,\n      withOwnReactions: true,\n      limit: 10,\n      ...propOpts,\n      ...extraOptions,\n    };\n  };\n\n  doFeedRequest = async (options: FeedRequestOptions): Promise<FR> => {\n    if (this.props.doFeedRequest) {\n      return await this.props.doFeedRequest(\n        this.props.client,\n        this.props.feedGroup,\n        this.props.userId,\n        options,\n      );\n    }\n    return await this.feed().get(options);\n  };\n\n  feed = () => this.props.client.feed(this.props.feedGroup, this.props.userId);\n\n  responseToActivityMap = (response: FR) =>\n    immutable.fromJS(\n      response.results.reduce((map, a) => {\n        map[a.id] = a;\n        return map;\n      }, {}),\n    );\n\n  responseToActivityIdToPath = (response: FR) => {\n    if (\n      response.results.length === 0 ||\n      response.results[0].activities === undefined\n    ) {\n      return {};\n    }\n    const aggregatedResponse = (response: any);\n\n    const map = {};\n    for (const group of aggregatedResponse.results) {\n      group.activities.forEach((act, i) => {\n        map[act.id] = [group.id, 'activities', i];\n      });\n    }\n    return map;\n  };\n\n  responseToActivityIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundActivities((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  feedResponseToReactionIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundReactions((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  reactionResponseToReactionIdToPaths = (\n    response: RR,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n    oldLength: number,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(oldLength);\n      addFoundReactions((a: any));\n      currentPath.pop();\n      oldLength++;\n    }\n    return map;\n  };\n\n  removeFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function removeFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          removeFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          removeFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    removeFoundReactions(data);\n    return map;\n  };\n\n  removeFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundActivities(data);\n    return map;\n  };\n\n  removeFoundActivityIdPath = (\n    data: any[],\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    data.forEach((obj, i) => {\n      currentPath.push(i);\n      if (_isEqual(map[obj.id], currentPath)) {\n        delete map[obj.id];\n      }\n      currentPath.pop();\n    });\n    return map;\n  };\n\n  addFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundReactions(data);\n    return map;\n  };\n\n  addFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n    addFoundActivities(data);\n    return map;\n  };\n\n  addFoundActivityIdPath = (\n    data: Array<{ id: string }>,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    data.forEach((obj, i) => {\n      map[obj.id] = [...basePath, i];\n    });\n    return map;\n  };\n\n  responseToReactionActivities = (response: FR) => {\n    if (response.results.length === 0) {\n      return {};\n    }\n    const map = {};\n    function setReactionActivities(activities: any) {\n      for (const a of activities) {\n        if (a.reaction && a.reaction.id) {\n          map[a.reaction.id] = a.id;\n        }\n      }\n    }\n\n    if (response.results[0].activities === undefined) {\n      setReactionActivities(response.results);\n    } else {\n      const aggregatedResponse = (response: any);\n\n      for (const group of aggregatedResponse.results) {\n        setReactionActivities(group.activities);\n      }\n    }\n    return map;\n  };\n\n  unseenUnreadFromResponse(response: FR) {\n    let unseen = 0;\n    let unread = 0;\n    if (typeof response.unseen === 'number') {\n      unseen = response.unseen;\n    }\n    if (typeof response.unread === 'number') {\n      unread = response.unread;\n    }\n    return { unseen, unread };\n  }\n\n  refresh = async (extraOptions: FeedRequestOptions) => {\n    const options = this.getOptions(extraOptions);\n\n    await this.setState({ refreshing: true });\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    const newState = {\n      activityOrder: response.results.map((a) => a.id),\n      activities: this.responseToActivityMap(response),\n      activityIdToPath: this.responseToActivityIdToPath(response),\n      activityIdToPaths: this.responseToActivityIdToPaths(response),\n      reactionIdToPaths: this.feedResponseToReactionIdToPaths(response),\n      reactionActivities: this.responseToReactionActivities(response),\n      refreshing: false,\n      lastResponse: response,\n      realtimeAdds: [],\n      realtimeDeletes: [],\n      ...this.unseenUnreadFromResponse(response),\n    };\n\n    if (options.mark_seen === true) {\n      newState.unseen = 0;\n    }\n    if (options.mark_read === true) {\n      newState.unread = 0;\n    }\n\n    return this.setState(newState);\n  };\n\n  subscribe = async () => {\n    if (this.props.notify) {\n      const feed = this.feed();\n      await this.setState((prevState) => {\n        if (prevState.subscription) {\n          return {};\n        }\n        const subscription = feed.subscribe((data) => {\n          this.setState((prevState) => {\n            const numActivityDiff = data.new.length - data.deleted.length;\n            return {\n              realtimeAdds: prevState.realtimeAdds.concat(data.new),\n              realtimeDeletes: prevState.realtimeDeletes.concat(data.deleted),\n              unread: prevState.unread + numActivityDiff,\n              unseen: prevState.unseen + numActivityDiff,\n            };\n          });\n        });\n\n        subscription.then(\n          () => {\n            console.log(\n              `now listening to changes in realtime for ${this.feed().id}`,\n            );\n          },\n          (err) => {\n            console.error(err);\n          },\n        );\n        return { subscription };\n      });\n    }\n  };\n\n  unsubscribe = async () => {\n    const { subscription } = this.state;\n    if (!subscription) {\n      return;\n    }\n    await subscription;\n    if (this.registeredCallbacks.length === 0) {\n      try {\n        await subscription.cancel();\n        console.log(\n          `stopped listening to changes in realtime for ${this.feed().id}`,\n        );\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  hasNextPage = () => {\n    const lastResponse = this.state.lastResponse;\n    return Boolean(lastResponse && lastResponse.next);\n  };\n\n  hasReverseNextPage = () => {\n    const { lastReverseResponse } = this.state;\n    return Boolean(lastReverseResponse && lastReverseResponse.next);\n  };\n\n  loadNextPage = async () => {\n    const lastResponse = this.state.lastResponse;\n    if (!lastResponse || !lastResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: prevState.activityOrder.concat(\n          response.results.map((a) => a.id),\n        ),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastResponse: response,\n      };\n    });\n  };\n\n  loadReverseNextPage = async () => {\n    const { lastReverseResponse } = this.state;\n    if (!lastReverseResponse || !lastReverseResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastReverseResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: response.results\n          .map((a) => a.id)\n          .concat(prevState.activityOrder),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastReverseResponse: response,\n      };\n    });\n  };\n\n  loadNextReactions = async (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => {\n    let options: ReactionFilterOptions = {\n      activity_id: activityId,\n      kind,\n    };\n\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    if (!activityPath) {\n      activityPath = this.getActivityPath(activityId);\n    }\n    const latestReactionsPath = [\n      ...activityPath,\n      orderPrefix + '_reactions',\n      kind,\n    ];\n    const nextUrlPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'next',\n    ];\n    const refreshingPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'refreshing',\n    ];\n\n    const reactions_extra = this.state.activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([kind, 'next'], '');\n    } else if (oldestToNewest) {\n      // If it's the first request and oldest to newest make sure\n      // order is reversed by this trick with a non existant id.\n      options.id_gt = 'non-existant-' + generateRandomId();\n    }\n\n    const refreshing = this.state.activities.getIn(refreshingPath, false);\n\n    if (!nextUrl || refreshing) {\n      return;\n    }\n\n    this.setState((prevState) => ({\n      activities: prevState.activities.setIn(refreshingPath, true),\n    }));\n\n    options = {\n      ...URL(nextUrl, true).query,\n      ...options,\n    };\n\n    let response;\n    try {\n      if (this.props.doReactionsFilterRequest) {\n        response = await this.props.doReactionsFilterRequest(options);\n      } else {\n        response = await this.props.client.reactions.filter(options);\n      }\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-reactions-next-page', {\n        options,\n      });\n      return;\n    }\n    this.setState((prevState) => ({\n      activities: prevState.activities\n        .setIn(refreshingPath, false)\n        .setIn(nextUrlPath, response.next)\n        .updateIn(latestReactionsPath, (v = immutable.List()) =>\n          v.concat(immutable.fromJS(response.results)),\n        ),\n      reactionIdToPaths: this.reactionResponseToReactionIdToPaths(\n        response,\n        prevState.reactionIdToPaths,\n        latestReactionsPath,\n        prevState.activities.getIn(latestReactionsPath, immutable.List()).toJS()\n          .length,\n      ),\n    }));\n  };\n\n  refreshUnreadUnseen = async () => {\n    let response: FR;\n    try {\n      response = await this.doFeedRequest({ limit: 0 });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState(this.unseenUnreadFromResponse(response));\n  };\n}\n","// @flow\n\nimport type { FlowRequestTypes } from './types';\nimport stream from 'getstream';\nexport const handleError = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n) => {\n  console.warn(error, type, detail);\n};\n\nexport const getErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  console.warn(error);\n  if (!(error instanceof stream.errors.StreamApiError)) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const response = error.response;\n\n  if (!response.status || !response.body || !response.body.detail) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const status = response.status;\n  const text = response.body.detail;\n\n  /* eslint-disable no-magic-numbers */\n  if (status >= 400 && status < 600) {\n    return text;\n  }\n  /* eslint-enable no-magic-numbers */\n\n  return fallbackErrorMessage(error, type, detail);\n};\n\nexport const fallbackErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  let text = 'Something went wrong';\n  let suffix = '';\n  switch (type) {\n    case 'get-user-info':\n      text += ' when loading user info';\n      break;\n    case 'get-feed':\n      text += ' when loading the feed';\n      break;\n    case 'get-feed-next-page':\n      text += ' when loading the next page of the feed';\n      break;\n    case 'get-notification-counts':\n      text += ' when loading your unread notification counts';\n      break;\n    case 'upload-image':\n      text += ' when uploading your image';\n      suffix = ' If it is, the image is probably too big';\n      break;\n    case 'add-activity':\n      text += ' when submitting your post';\n      break;\n    case ('add-reaction', 'add-child-reaction'):\n      text += ' when submitting your ' + detail.kind;\n      break;\n    case ('delete-reaction', 'delete-child-reaction'):\n      text += ' when removing your ' + detail.kind;\n      break;\n    default:\n  }\n\n  text += '. Is your internet working?' + suffix;\n  return text;\n};\n","import i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport {\n  enTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n} from './i18n';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[] LT',\n    nextDay: '[] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[] LT',\n    lastWeek: '[] dddd, LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /|||/,\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === '') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour;\n    } else if (meridiem === '') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour + 12;\n    }\n  },\n  meridiem(hour) {\n    if (hour < 4) {\n      return '';\n    } else if (hour < 10) {\n      return '';\n    } else if (hour < 17) {\n      return '';\n    } else if (hour < 20) {\n      return '';\n    } else {\n      return '';\n    }\n  },\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourdhui ] LT',\n    nextDay: '[Demain ] LT',\n    nextWeek: 'dddd [] LT',\n    lastDay: '[Hier ] LT',\n    lastWeek: 'dddd [dernier ] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugn saat] LT',\n    nextDay: '[yarn saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dn] LT',\n    lastWeek: '[geen] dddd [saat] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[, ] LT',\n    nextDay: '[, ] LT',\n    lastDay: '[, ] LT',\n  },\n});\n\nconst en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(\n    '_',\n  ),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n    '_',\n  ),\n};\n\nconst defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: (msg) => console.warn(msg),\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs,\n};\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback = () => null;\n  initialized = false;\n\n  t = null;\n  tDateTimeParser = null;\n  translations = {\n    en: { [defaultNS]: enTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n  };\n  /**\n   * dayjs.updateLocale('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales = {};\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins`,\n        error,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: { escapeValue: false },\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage(this.currentLanguage);\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        resources: this.translations,\n        lng: this.currentLanguage,\n      });\n      this.initialized = true;\n\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    } catch (e) {\n      this.logger(`Something went wrong with init:`, e);\n    }\n  }\n\n  localeExists = (language) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  /**\n   * Register translation\n   *\n   * @param {*} language\n   * @param {*} translation\n   * @param {*} customDayjsLocale\n   */\n  registerTranslation(language, translation, customDayjsLocale) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...{ ...en_locale, ...config } }, null, true);\n    }\n  }\n\n  /**\n   * Changes the language.\n   * @param {*} language\n   */\n  async setLanguage(language) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (e) {\n      this.logger(`Failed to set language:`, e);\n    }\n  }\n\n  /**\n   *\n   * @param {*} callback\n   */\n  registerSetLanguageCallback(callback) {\n    this.setLanguageCallback = callback;\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport stream from 'getstream';\n\nimport StreamAnalytics from 'stream-analytics';\nimport type { StreamClient, StreamUser } from 'getstream';\n\nimport type { ErrorHandler } from '../types';\n\nimport { FeedManager } from './FeedManager';\nimport type { FeedProps } from './Feed';\nimport { handleError } from '../errors';\nimport Dayjs from 'dayjs';\n\nimport { Streami18n } from '../Streami18n';\n\nexport const StreamContext = React.createContext({\n  changedUserData: () => {},\n  sharedFeedManagers: {},\n  client: null,\n});\n\nexport const TranslationContext = React.createContext({\n  t: (msg) => msg,\n  tDateTimeParser: (input) => Dayjs(input),\n});\n\nexport function withTranslationContext(\n  OriginalComponent: React.ComponentType<any>,\n) {\n  const ContextAwareComponent = function ContextComponent(props: {}) {\n    return (\n      <TranslationContext.Consumer>\n        {(translationContext) =>\n          OriginalComponent && (\n            <OriginalComponent {...translationContext} {...props} />\n          )\n        }\n      </TranslationContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n\nexport type AppCtx<UserData> = {|\n  client: StreamClient<UserData>,\n  user: StreamUser<UserData>,\n  // We cannot simply take userData from user.data, since the reference to user\n  // will stay the same all the time. Because of this react won't notice that\n  // the internal fields changed so it thinks it doesn't need to rerender.\n  userData: ?UserData,\n  changedUserData: () => void,\n  changeNotificationCounts?: any,\n  analyticsClient?: any,\n  sharedFeedManagers: { [string]: FeedManager },\n  errorHandler: ErrorHandler,\n|};\n\nexport type Streami18Ctx = {|\n  t: (msg: string, data?: Object) => string,\n  tDateTimeParser: (input?: string | number) => Function,\n|};\n\ntype StreamAppProps<UserData> = {|\n  /** The ID of your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  appId: string | number,\n  /** The API key for your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  apiKey: string,\n  /** The access token for the end user that uses your website, how to generate it can be found [here](https://getstream.io/docs/#frontend_setup) */\n  token: string,\n  /** Any options that [`stream.connect()`](https://getstream.io/docs/#setup) accepts */\n  options?: {},\n  analyticsToken?: string,\n  /** Normaly feed state is local to the feed component, such as FlatFeed and\n   * NotificationFeed. This means that changes in one feed don't affect the\n   * other. However in some cases you want the state to be shared in multiple\n   * components. In the case of the NotificationDropdown you need state shared\n   * between the NotificationFeed and the dropdown badge. This prop should be\n   * used in those cases. Each element in the array provided to `sharedFeeds`\n   * will create one globally managed feed. The default of this prop makes sure\n   * that the NotificationDropdown works correctly. If you want need to change\n   * some props on the NotificationDropdown, you should change them here\n   * instead.\n   */\n  sharedFeeds: Array<FeedProps>,\n  /** The data a user should get when no data is present in stream for this user yet */\n  defaultUserData: UserData,\n  /** A callback to handle errors produced by the components. This should\n   * probably hook into your own notification system. */\n  errorHandler: ErrorHandler,\n  i18nInstance: Streami18n,\n  children?: React.Node,\n|};\n\ntype StreamAppState<UserData> = AppCtx<UserData> & Streami18Ctx;\n\n/**\n * Manages the connection with Stream. Any components that should talk to\n * Stream should be a child of this component.\n */\nexport class StreamApp extends React.Component<\n  StreamAppProps<Object>,\n  StreamAppState<Object>,\n> {\n  static defaultProps = {\n    sharedFeeds: [\n      {\n        feedGroup: 'notification',\n        notify: true,\n        options: { mark_seen: true },\n      },\n    ],\n    defaultUserData: { name: 'Unknown' },\n    errorHandler: handleError,\n  };\n\n  static Consumer = function StreamAppConsumer(props: {\n    children?: (AppCtx<any>) => ?React.Element<any>,\n  }) {\n    return (\n      <StreamContext.Consumer>\n        {(appCtx) => {\n          if (!props.children || !props.children.length) {\n            return null;\n          }\n          if (!appCtx.client || !appCtx.user) {\n            throw new Error(\n              'This component should be a child of a StreamApp component',\n            );\n          }\n          const Child = props.children;\n          return Child(appCtx);\n        }}\n      </StreamContext.Consumer>\n    );\n  };\n\n  constructor(props: StreamAppProps<Object>) {\n    super(props);\n\n    this.state = StreamApp.initClientState(props, {\n      changedUserData: () => {\n        this.setState({ userData: this.state.user.data });\n      },\n      t: null,\n      tDateTimeParser: null,\n    });\n  }\n\n  componentDidUpdate(prevProps: StreamAppProps<Object>) {\n    if (\n      this.props.apiKey !== prevProps.apiKey ||\n      this.props.token !== prevProps.token ||\n      this.props.appId !== prevProps.appId\n    ) {\n      this.getUserInfo();\n    }\n  }\n\n  async componentDidMount() {\n    this.getUserInfo();\n    const { i18nInstance } = this.props;\n    let streami18n;\n\n    if (i18nInstance && i18nInstance instanceof Streami18n) {\n      streami18n = i18nInstance;\n    } else {\n      streami18n = new Streami18n({ language: 'en' });\n    }\n\n    streami18n.registerSetLanguageCallback((t) => {\n      this.setState({ t });\n    });\n\n    const { t, tDateTimeParser } = await streami18n.getTranslators();\n    this.setState({ t, tDateTimeParser });\n  }\n\n  static getDerivedStateFromProps(\n    props: StreamAppProps<Object>,\n    state: StreamAppState<Object>,\n  ) {\n    if (\n      state.client.apiKey !== props.apiKey ||\n      state.client.userToken !== props.token ||\n      state.client.appId !== props.appId\n    ) {\n      return StreamApp.initClientState(props, state);\n    }\n    return null;\n  }\n\n  static initClientState = function(\n    props: StreamAppProps<Object>,\n    state: Object,\n  ) {\n    const client: StreamClient<Object> = stream.connect(\n      props.apiKey,\n      props.token,\n      props.appId,\n      props.options || {},\n    );\n\n    let analyticsClient;\n    if (props.analyticsToken) {\n      analyticsClient = new StreamAnalytics({\n        apiKey: props.apiKey,\n        token: props.analyticsToken,\n      });\n      analyticsClient.setUser(client.userId);\n    }\n\n    const newState = {\n      ...state,\n      client,\n      user: client.currentUser,\n      userData: client.currentUser.data,\n      analyticsClient,\n      sharedFeedManagers: {},\n      errorHandler: props.errorHandler,\n      apiKey: props.apiKey,\n      token: props.token,\n      appId: props.appId,\n    };\n\n    for (const feedProps of props.sharedFeeds) {\n      const manager = new FeedManager({\n        ...feedProps,\n        ...newState,\n      });\n      newState.sharedFeedManagers[manager.feed().id] = manager;\n    }\n\n    return newState;\n  };\n\n  getUserInfo = async () => {\n    try {\n      await this.state.user.getOrCreate(this.props.defaultUserData);\n    } catch (e) {\n      this.props.errorHandler(e, 'get-user-info', {\n        userId: this.state.user.id,\n      });\n      return;\n    }\n    this.state.changedUserData();\n  };\n\n  render() {\n    if (!this.state.t) return null;\n\n    const { t, tDateTimeParser, ...streamContextValue } = this.state;\n    return (\n      <StreamContext.Provider value={streamContextValue}>\n        <TranslationContext.Provider\n          value={{\n            t,\n            tDateTimeParser,\n          }}\n        >\n          <React.Fragment>\n            {this.props.children || (\n              <React.Fragment>\n                <div\n                  style={{\n                    width: 100 + '%',\n                    height: 100 + '%',\n                    minHeight: 400,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    color: '#fff',\n                    backgroundColor: '#008AFF',\n                    fontFamily:\n                      '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol',\n                  }}\n                >\n                  <h3>You are connected to:</h3>\n                  <svg\n                    width=\"117\"\n                    height=\"21\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <g fill=\"none\" fillRule=\"evenodd\">\n                      <path\n                        className=\"stream\"\n                        d=\"M48.812 16.9c.168-.15.317-.317.448-.504.13-.187.196-.401.196-.644 0-.299-.107-.55-.322-.756a2.794 2.794 0 0 0-.784-.518 4.892 4.892 0 0 0-.966-.322c-.336-.075-.616-.14-.84-.196a13.04 13.04 0 0 1-1.736-.546 5.849 5.849 0 0 1-1.414-.784 3.53 3.53 0 0 1-.952-1.092c-.233-.42-.35-.92-.35-1.498 0-.541.13-1.05.392-1.526a4.35 4.35 0 0 1 1.05-1.26 5.156 5.156 0 0 1 1.54-.868 5.387 5.387 0 0 1 1.862-.322c.579 0 1.13.084 1.652.252.523.168.994.397 1.414.686.42.29.775.64 1.064 1.05.29.41.48.868.574 1.372l-2.436.588a2.036 2.036 0 0 0-.728-1.12c-.373-.299-.887-.448-1.54-.448a2.69 2.69 0 0 0-.7.098 2.41 2.41 0 0 0-.672.294c-.205.13-.378.29-.518.476-.14.187-.21.401-.21.644 0 .261.08.485.238.672.159.187.35.34.574.462.224.121.467.22.728.294.261.075.504.14.728.196.99.243 1.81.504 2.464.784.653.28 1.176.588 1.568.924.392.336.667.705.826 1.106.159.401.238.854.238 1.358a3.6 3.6 0 0 1-.406 1.68 4.22 4.22 0 0 1-1.12 1.358 5.304 5.304 0 0 1-1.708.896 6.912 6.912 0 0 1-2.142.322c-1.157 0-2.189-.285-3.094-.854-.905-.57-1.517-1.33-1.834-2.282l2.296-1.036c.299.653.681 1.097 1.148 1.33.467.233.999.35 1.596.35.747 0 1.372-.205 1.876-.616zm12.276 2.772a9.115 9.115 0 0 1-2.268.476c-.747.056-1.419-.051-2.016-.322-.597-.27-1.083-.747-1.456-1.428-.373-.681-.56-1.638-.56-2.87V9.313h-2.226V6.356h.609c.727 0 1.376-.177 1.834-.916.194-.313.22-.633.243-1.502V2.913h2.332v3.443h2.749v2.957h-2.75l-.075 6.635c0 .448.051.803.154 1.064.103.261.275.457.518.588.243.13.56.196.952.196.392 0 .868-.037 1.428-.112l.532 1.988zM69.676 8.78l-.392-.168a5.38 5.38 0 0 0-.392-.112 1.957 1.957 0 0 0-.476-.056c-.541 0-1.045.089-1.512.266a3.849 3.849 0 0 0-1.204.714 3.372 3.372 0 0 0-.798 1.05 2.866 2.866 0 0 0-.294 1.274L64.58 20h-2.716V6.288h2.156l.56 1.484a4.134 4.134 0 0 1 1.47-1.302c.607-.327 1.367-.49 2.282-.49.597 0 1.279.084 2.044.252l-.7 2.548zm7.048 11.256c-.97 0-1.88-.182-2.73-.546a7.032 7.032 0 0 1-2.226-1.498 6.99 6.99 0 0 1-1.498-2.24 6.957 6.957 0 0 1-.546-2.744c0-.97.173-1.885.518-2.744a7.226 7.226 0 0 1 1.4-2.24A6.526 6.526 0 0 1 73.7 6.526a5.91 5.91 0 0 1 2.52-.546c.915 0 1.76.159 2.534.476A5.203 5.203 0 0 1 80.77 7.94c.57.672 1.013 1.526 1.33 2.562.317 1.036.476 2.273.476 3.71h-9.968c.13.485.336.938.616 1.358.28.42.611.784.994 1.092.383.308.812.546 1.288.714.476.168.975.252 1.498.252.71 0 1.367-.13 1.974-.392a4.925 4.925 0 0 0 1.554-1.036l1.68 1.68c-.653.653-1.451 1.176-2.394 1.568-.943.392-1.974.588-3.094.588zM76.22 8.444c-.43 0-.835.084-1.218.252a3.89 3.89 0 0 0-1.064.7 4.32 4.32 0 0 0-.84 1.064c-.233.41-.406.859-.518 1.344h7.084a4.331 4.331 0 0 0-.308-1.288 3.311 3.311 0 0 0-1.75-1.806c-.401-.177-.863-.266-1.386-.266zm20.9-2.156V20h-2.296l-.42-1.84a4.424 4.424 0 0 1-1.792 1.4 5.49 5.49 0 0 1-2.212.476 6.326 6.326 0 0 1-2.618-.546 6.712 6.712 0 0 1-2.128-1.498 7.162 7.162 0 0 1-1.442-2.24 7.116 7.116 0 0 1-.532-2.744c0-.97.177-1.885.532-2.744a7.162 7.162 0 0 1 1.442-2.24 6.712 6.712 0 0 1 2.128-1.498A6.326 6.326 0 0 1 90.4 5.98c.747 0 1.465.145 2.156.434.69.29 1.307.742 1.848 1.358l.42-1.484h2.296zm-6.72 11.34c.541 0 1.055-.121 1.54-.364a3.94 3.94 0 0 0 1.26-.994c.355-.42.635-.91.84-1.47.205-.56.308-1.157.308-1.792s-.103-1.232-.308-1.792a4.834 4.834 0 0 0-.84-1.47 3.94 3.94 0 0 0-1.26-.994 3.398 3.398 0 0 0-1.54-.364c-.541 0-1.055.121-1.54.364a3.94 3.94 0 0 0-1.26.994c-.355.42-.635.91-.84 1.47a5.164 5.164 0 0 0-.308 1.792c0 .635.103 1.232.308 1.792.205.56.485 1.05.84 1.47.355.42.775.751 1.26.994s.999.364 1.54.364zM101.808 20h-2.716V6.288h2.156l.56 1.148a5.135 5.135 0 0 1 1.204-1.022c.467-.29 1.036-.434 1.708-.434.261 0 .555.033.882.098.327.065.663.177 1.008.336a4.3 4.3 0 0 1 .994.644c.317.27.588.62.812 1.05.317-.579.798-1.078 1.442-1.498.644-.42 1.33-.63 2.058-.63.485 0 .999.075 1.54.224.541.15 1.045.43 1.512.84.467.41.85.98 1.148 1.708.299.728.448 1.67.448 2.828V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.597 0-1.12.252-1.568.756-.448.504-.672 1.297-.672 2.38V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.56 0-1.05.215-1.47.644-.42.43-.667 1.101-.742 2.016V20z\"\n                        fill=\"#fff\"\n                      />\n                      <path\n                        className=\"stream-mark\"\n                        d=\"M26.15 6.428l12.802-.908a1 1 0 0 1 .883 1.581L30.88 19.576a1 1 0 0 1-.812.417H9.982a1 1 0 0 1-.811-.416L.19 7.102a1 1 0 0 1 .882-1.582l12.764.908L19.29.333a1 1 0 0 1 1.496.006l5.364 6.09zm2.68 11.587l-8.309-3.105v3.105h8.31zm-9.309 0V14.91l-8.309 3.105h8.31zm-.959-3.847l-8.489 3.17-6.246-8.682 14.735 5.512zm2.9 0l8.49 3.17 6.246-8.682-14.735 5.512zm-1.933-.724V2.994l-6.941 7.837 6.941 2.613zm.992 0V2.996l6.942 7.835-6.942 2.613zm-9.969-3.336l1.597-1.794-7.802-.56 6.205 2.354zm18.863 0l-1.597-1.794 7.803-.56-6.206 2.354z\"\n                        fill=\"#fff\"\n                      />\n                    </g>\n                  </svg>\n                </div>\n              </React.Fragment>\n            )}\n          </React.Fragment>\n        </TranslationContext.Provider>\n      </StreamContext.Provider>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport _isEqual from 'lodash/isEqual';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseAppCtx,\n  BaseClient,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  AddReactionCallbackFunction,\n  RemoveReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n  AddChildReactionCallbackFunction,\n  RemoveChildReactionCallbackFunction,\n} from '../types';\nimport type { AppCtx } from './StreamApp';\nimport { StreamApp } from './StreamApp';\nimport { FeedManager } from './FeedManager';\n\nexport const FeedContext = React.createContext({});\n\nexport type FeedCtx = {|\n  feedGroup: string,\n  userId?: string,\n  activityOrder: Array<string>,\n  activities: any,\n  unread: number,\n  unseen: number,\n  refresh: (extraOptions?: FeedRequestOptions) => Promise<mixed>,\n  refreshUnreadUnseen: () => Promise<mixed>,\n  loadNextReactions: (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => Promise<mixed>,\n  loadNextPage: () => Promise<mixed>,\n  hasNextPage: boolean,\n  loadReverseNextPage: () => Promise<mixed>,\n  hasReverseNextPage: boolean,\n  refreshing: boolean,\n  hasDoneRequest: boolean,\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  feedManager: FeedManager,\n  onToggleReaction: ToggleReactionCallbackFunction,\n  onAddReaction: AddReactionCallbackFunction,\n  onRemoveReaction: RemoveReactionCallbackFunction,\n  onToggleChildReaction: ToggleChildReactionCallbackFunction,\n  onAddChildReaction: AddChildReactionCallbackFunction,\n  onRemoveChildReaction: RemoveChildReactionCallbackFunction,\n  onRemoveActivity: (activityId: string) => Promise<mixed>,\n  onMarkAsRead: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  onMarkAsSeen: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  getActivityPath: (\n    activity: BaseActivityResponse | string,\n    ...Array<string>\n  ) => Array<string>,\n|};\n\nexport type FeedProps = {|\n  /** The feed group part of the feed */\n  feedGroup: string,\n  /** The user_id part of the feed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify?: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /* Components to display in the feed */\n  children?: React.Node,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\nexport class Feed extends React.Component<FeedProps> {\n  // Used to avoid unmount-remount behaviour, which causes\n  // unsubscribe-subscribe behaviour.\n  _appCtxWrapperFunc = (appCtx: AppCtx<any>) => (\n    <FeedInner {...this.props} {...appCtx} />\n  );\n\n  render() {\n    return <StreamApp.Consumer>{this._appCtxWrapperFunc}</StreamApp.Consumer>;\n  }\n}\n\nexport type FeedInnerProps = {| ...FeedProps, ...BaseAppCtx |};\n\ntype FeedState = {|\n  manager: FeedManager,\n|};\n\nclass FeedInner extends React.Component<FeedInnerProps, FeedState> {\n  constructor(props: FeedInnerProps) {\n    super(props);\n    const feedId = props.client.feed(props.feedGroup, props.userId).id;\n    let manager = props.sharedFeedManagers[feedId];\n    if (!manager) {\n      manager = new FeedManager(props);\n    }\n\n    this.state = {\n      manager,\n    };\n  }\n  boundForceUpdate = () => this.forceUpdate();\n\n  componentDidMount() {\n    return this.state.manager.register(this.boundForceUpdate);\n  }\n\n  componentDidUpdate(prevProps) {\n    const clientDifferent = this.props.client !== prevProps.client;\n    const notifyDifferent = this.props.notify !== prevProps.notify;\n    const feedDifferent =\n      this.props.userId !== prevProps.userId ||\n      this.props.feedGroup !== prevProps.feedGroup;\n    const optionsDifferent = !_isEqual(this.props.options, prevProps.options);\n    const doFeedRequestDifferent =\n      this.props.doFeedRequest !== prevProps.doFeedRequest;\n\n    if (\n      clientDifferent ||\n      feedDifferent ||\n      optionsDifferent ||\n      doFeedRequestDifferent\n    ) {\n      // TODO: Implement\n    }\n    if (clientDifferent || feedDifferent || notifyDifferent) {\n      // TODO: Implement\n    }\n  }\n\n  componentWillUnmount() {\n    return this.state.manager.unregister(this.boundForceUpdate);\n  }\n\n  getCtx = () => {\n    const { manager } = this.state;\n    const state = manager.state;\n    return {\n      getActivityPath: manager.getActivityPath,\n      onToggleReaction: manager.onToggleReaction,\n      onAddReaction: manager.onAddReaction,\n      onRemoveReaction: manager.onRemoveReaction,\n      onToggleChildReaction: manager.onToggleChildReaction,\n      onAddChildReaction: manager.onAddChildReaction,\n      onRemoveChildReaction: manager.onRemoveChildReaction,\n      onRemoveActivity: manager.onRemoveActivity,\n      onMarkAsRead: manager.onMarkAsRead,\n      onMarkAsSeen: manager.onMarkAsSeen,\n      hasDoneRequest: state.lastResponse != null,\n      refresh: manager.refresh,\n      refreshUnreadUnseen: manager.refreshUnreadUnseen,\n      loadNextReactions: manager.loadNextReactions,\n      loadNextPage: manager.loadNextPage,\n      hasNextPage: manager.hasNextPage(),\n      loadReverseNextPage: manager.loadReverseNextPage,\n      hasReverseNextPage: manager.hasReverseNextPage(),\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      activityOrder: state.activityOrder,\n      activities: state.activities,\n      realtimeAdds: state.realtimeAdds,\n      realtimeDeletes: state.realtimeDeletes,\n      refreshing: state.refreshing,\n      unread: state.unread,\n      unseen: state.unseen,\n      feedManager: manager,\n    };\n  };\n\n  render() {\n    return (\n      <FeedContext.Provider value={this.getCtx()}>\n        {this.props.children}\n      </FeedContext.Provider>\n    );\n  }\n}\n","export default \"1519fc1dc6e473ee.png\"","// @flow\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\n\nexport type Props = {|\n  size?: number,\n  image?: string,\n  alt?: string,\n  rounded?: boolean,\n  circle?: boolean,\n  onClick?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Avatar.md\n */\nexport default class Avatar extends React.PureComponent<Props> {\n  render() {\n    const { size, image, alt, rounded, circle } = this.props;\n    return (\n      <React.Fragment>\n        <img\n          style={size ? { width: `${size}px`, height: `${size}px` } : {}}\n          className={`raf-avatar ${rounded ? 'raf-avatar--rounded' : ''} ${\n            circle ? 'raf-avatar--circle' : ''\n          }`}\n          onClick={this.props.onClick}\n          src={image ? image : placeholder}\n          alt={alt || ''}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { humanizeTimestamp } from '../utils';\nimport Avatar from './Avatar';\n\nimport type { Renderable } from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport { smartRender } from '../utils';\nimport { withTranslationContext } from '../Context';\n\nexport type Props = {|\n  username: ?string,\n  avatar?: string,\n  subtitle?: string,\n  time?: string, // text that should be displayed as the time\n  timestamp?: string | number, // a timestamp that should be humanized\n  icon?: string,\n  onClickUser?: () => mixed,\n  follow?: boolean,\n  Right?: Renderable,\n  AfterUsername?: React.Node,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/UserBar.md\n */\nclass UserBar extends React.Component<Props> {\n  render() {\n    const { tDateTimeParser } = this.props;\n    let time = this.props.time;\n    if (time === undefined && this.props.timestamp != null) {\n      time = humanizeTimestamp(this.props.timestamp, tDateTimeParser);\n    }\n    return (\n      <div className=\"raf-user-bar\">\n        {this.props.avatar ? (\n          <Avatar\n            onClick={this.props.onClickUser}\n            size={50}\n            circle\n            image={this.props.avatar}\n          />\n        ) : null}\n        <div className=\"raf-user-bar__details\">\n          <p\n            className=\"raf-user-bar__username\"\n            onClick={this.props.onClickUser}\n          >\n            {this.props.username}\n          </p>\n          {this.props.AfterUsername}\n          {this.props.icon !== undefined ? (\n            <img src={this.props.icon} alt=\"icon\" />\n          ) : null}\n          {this.props.subtitle ? (\n            <p className=\"raf-user-bar__subtitle\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {this.props.subtitle}\n              </time>\n            </p>\n          ) : null}\n        </div>\n        <React.Fragment>\n          {smartRender(this.props.Right, {}, () => (\n            <p className=\"raf-user-bar__extra\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {time}\n              </time>\n            </p>\n          ))}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(UserBar);\n","// @flow\n\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nexport type Props = {|\n  image?: ?string,\n  images?: Array<{ image: string }>,\n  alt?: ?string,\n  title?: ?string,\n  url?: string,\n  nolink?: boolean,\n  description?: ?string,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Card.md\n */\nexport default class Card extends React.Component<Props> {\n  trimUrl = (url: string) => {\n    let trimmedUrl;\n    if (url !== undefined || url !== null) {\n      trimmedUrl = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/')[0];\n    }\n    return trimmedUrl;\n  };\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { alt, images, handleClose, nolink } = this.props;\n    let image = this.props.image;\n    if (!image && images && images.length) {\n      image = images[0].image;\n    }\n    const url = sanitizeURL(this.props.url);\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    return (\n      <a\n        href={!nolink ? url : null}\n        target=\"blank\"\n        rel=\"noopener\"\n        className={`raf-card ${\n          image !== undefined ? 'raf-card--with-image' : ''\n        }`}\n      >\n        {handleClose && image ? (\n          <IconButton onClick={(e) => this._handleClose(e)}>\n            <div dangerouslySetInnerHTML={{ __html: svg }} />\n          </IconButton>\n        ) : null}\n        {image !== undefined && (\n          <div className=\"raf-card__image\">\n            <img\n              src={image == null ? placeholder : image}\n              alt={alt || this.props.title || this.props.description || ''}\n            />\n          </div>\n        )}\n        <div className=\"raf-card__content\">\n          <div className=\"raf-card__content-left\">\n            <p className=\"raf-card__title\">{this.props.title}</p>\n            <p className=\"raf-card__url\">{this.trimUrl(url || '')}</p>\n            <p className=\"raf-card__description\">{this.props.description}</p>\n          </div>\n          {handleClose && image === undefined ? (\n            <div className=\"raf-card__content-right\">\n              <IconButton onClick={(e) => this._handleClose(e)}>\n                <div dangerouslySetInnerHTML={{ __html: svg }} />\n              </IconButton>\n            </div>\n          ) : null}\n        </div>\n      </a>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlayCircle,\n  faPauseCircle,\n} from '@fortawesome/free-regular-svg-icons';\n\nimport type { OgData } from '../types';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\ntype State = {|\n  open: boolean,\n  playing: boolean,\n  progress: number,\n  updateProgress?: IntervalID | null,\n|};\n\nexport default class Audio extends React.Component<Props, State> {\n  audioRef: { current: HTMLAudioElement | null };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null,\n    };\n    this.audioRef = React.createRef();\n  }\n\n  playAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n      this.updateProgress();\n      this.setState({\n        playing: true,\n        updateProgress: setInterval(this.updateProgress, 500),\n      });\n      //$FlowFixMe\n      this.audioRef.current.play();\n    }\n  };\n\n  pauseAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n    }\n    this.setState({ playing: false });\n    window.clearInterval(this.state.updateProgress);\n  };\n\n  updateProgress = () => {\n    if (this.audioRef.current !== null) {\n      const position = this.audioRef.current.currentTime;\n      const duration = this.audioRef.current.duration;\n      const progress = (100 / duration) * position;\n      this.setState({\n        progress,\n      });\n      if (position === duration) {\n        this.pauseAudio();\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    window.clearInterval(this.state.updateProgress);\n  }\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { og } = this.props;\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const audio = og.audios[0];\n    const url = sanitizeURL(audio.secure_url || audio.audio);\n    const image = ((og.images || [])[0] || {}).image;\n    return (\n      <div className=\"raf-audio\">\n        <div className=\"raf-audio__wrapper\">\n          <audio ref={this.audioRef}>\n            <source src={url} type=\"audio/mp3\" />\n          </audio>\n          <div className=\"raf-audio__image\">\n            <div className=\"raf-audio__image--overlay\">\n              {!this.state.playing ? (\n                <div\n                  onClick={() => this.playAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPlayCircle} />\n                </div>\n              ) : (\n                <div\n                  onClick={() => this.pauseAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPauseCircle} />\n                </div>\n              )}\n            </div>\n            <img src={image} alt={`${og.description}`} />\n          </div>\n          <div className=\"raf-audio__content\">\n            <span className=\"raf-audio__content--title\">\n              <strong>{og.title}</strong>\n            </span>\n            <span className=\"raf-audio__content--subtitle\">\n              {og.description}\n            </span>\n            <div className=\"raf-audio__content--progress\">\n              <div style={{ width: `${this.state.progress}%` }} />\n            </div>\n          </div>\n          {this.props.handleClose ? (\n            <IconButton onClick={(e) => this._handleClose(e)}>\n              <div dangerouslySetInnerHTML={{ __html: svg }} />\n            </IconButton>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport type { OgData } from '../types';\nimport { sanitizeURL } from '../utils';\nimport URL from 'url-parse';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n  urlsThatAreGifs: Array<string>,\n|};\n\n/**\n * Component for rendering an Youtube or Vimeo embedded player\n * @example ./examples/Video.md\n */\nexport default class Video extends React.Component<Props> {\n  static defaultProps = {\n    urlsThatAreGifs: ['i.giphy.com', 'i.imgur.com', 'media.giphy.com'],\n  };\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { videos, images = [] } = this.props.og;\n    let video: {\n      video?: string,\n      secure_url?: string,\n      type?: string,\n      width?: string,\n      height?: string,\n    } = {};\n\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const CloseButton = Boolean(this.props.handleClose) && (\n      <IconButton onClick={(e) => this._handleClose(e)}>\n        <div dangerouslySetInnerHTML={{ __html: svg }} />\n      </IconButton>\n    );\n\n    for (let i = 0; i < videos.length; i++) {\n      if (videos[i].type === 'text/html' || videos[i].type === 'video/mp4') {\n        video = videos[i];\n        break;\n      }\n    }\n    const url = sanitizeURL(video.secure_url || video.video);\n\n    if (video.type === 'text/html') {\n      const newUrl = url && url.split('/watch?v=').join('/embed/');\n      return (\n        <div className=\"raf-video__frame\">\n          {CloseButton}\n          <iframe\n            title={'embedded player'}\n            id=\"ytplayer\"\n            type={video.type}\n            width={video.width}\n            height={video.height}\n            src={newUrl}\n            frameBorder=\"0\"\n          />\n        </div>\n      );\n    } else {\n      let videoProps = {\n        controls: true,\n        // Try fetching length of video etc\n        preload: 'metadata',\n        poster: '',\n      };\n\n      if (images[0]) {\n        if (images[0].secure_url) videoProps.poster = images[0].secure_url;\n        else if (images[0].image) videoProps.poster = images[0].image;\n      }\n\n      const parsedUrl = new URL(url);\n\n      for (const gifUrl of this.props.urlsThatAreGifs) {\n        if (gifUrl === parsedUrl.host) {\n          videoProps = {\n            // Load the video right away\n            preload: 'auto',\n            // Display it like it's a gif\n            autoPlay: true,\n            muted: true,\n            loop: true,\n            controls: false,\n            // On mobile don't open video fullscreen\n            playsInline: true,\n            'webkit-playsinline': 'webkit-playsinline',\n          };\n\n          break;\n        }\n      }\n\n      return (\n        <div className=\"raf-video__video\">\n          <video className=\"raf-video__video--video\" {...videoProps}>\n            <source src={url} type={video.type} />\n          </video>\n          <div className=\"raf-video__video--content\">\n            <div className=\"raf-video__video--title\">{this.props.og.title}</div>\n            <div className=\"raf-video__video--description\">\n              {this.props.og.description}\n            </div>\n            <div className=\"raf-video__video--link\">\n              <a href={sanitizeURL(this.props.og.url)} target=\"blank\">\n                {this.props.og.site_name}\n              </a>\n            </div>\n          </div>\n          {CloseButton}\n        </div>\n      );\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Lightbox from 'react-images';\n\nexport type Props = {|\n  images: string[],\n|};\nexport type State = {|\n  lightboxIsOpen: boolean,\n  currentImage: number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Gallery.md\n */\nexport default class Gallery extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      lightboxIsOpen: false,\n      currentImage: 0,\n    };\n  }\n\n  gotoPrevious = () => {\n    this.setState({\n      currentImage: this.state.currentImage - 1,\n    });\n  };\n  gotoNext = () => {\n    this.setState({\n      currentImage: this.state.currentImage + 1,\n    });\n  };\n  openLightbox = (image?: number) => {\n    this.setState({\n      lightboxIsOpen: true,\n      currentImage: image,\n    });\n  };\n\n  closeLightbox = () => {\n    this.setState({\n      lightboxIsOpen: false,\n      currentImage: 0,\n    });\n  };\n\n  getImages = (images: any) =>\n    images.map((item) => ({\n      src: item,\n    }));\n\n  //  TODO: Provide way to add alt tags.\n  render() {\n    const { images } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"raf-gallery\">\n          {images.slice(0, 5).map((image, i) => (\n            <div\n              className={`img ${\n                i === 4 && images.length > 5 ? 'img--last' : ''\n              }`}\n              onClick={() => this.openLightbox(i)}\n              key={`image-${i}`}\n            >\n              <img src={image} className={`raf-gallery__image `} alt=\"\" />\n              <React.Fragment>\n                {i === 4 && images.length > 5 ? (\n                  <p>{images.length - 4} more</p>\n                ) : null}\n              </React.Fragment>\n            </div>\n            // </div>\n          ))}\n\n          <Lightbox\n            backdropClosesModal\n            images={this.getImages(images)}\n            isOpen={this.state.lightboxIsOpen}\n            onClickPrev={this.gotoPrevious}\n            onClickNext={this.gotoNext}\n            onClose={this.closeLightbox}\n            currentImage={this.state.currentImage}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\n\nimport UserBar from './UserBar';\nimport Card from './Card';\nimport Audio from './Audio';\nimport Video from './Video';\nimport { FileIcon } from 'react-file-utils';\nimport Gallery from './Gallery';\n\nimport type { ActivityData, Renderable } from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport {\n  smartRender,\n  sanitizeURL,\n  userOrDefault,\n  textRenderer,\n  humanizeTimestamp,\n} from '../utils';\nimport { withTranslationContext } from '../Context';\n\ntype Props = {\n  Header?: Renderable,\n  Content?: Renderable,\n  Footer?: Renderable,\n  HeaderRight?: Renderable,\n  onClickUser?: (?any) => mixed,\n  sub?: string,\n  icon?: string,\n  activity: ActivityData,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/Activity.md\n */\nclass Activity extends React.Component<Props> {\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  renderHeader = () => {\n    const { tDateTimeParser } = this.props;\n    const actor = userOrDefault(this.props.activity.actor);\n\n    return (\n      <div style={{ padding: '8px 16px' }}>\n        <UserBar\n          username={actor.data.name}\n          avatar={actor.data.profileImage}\n          onClickUser={this._getOnClickUser()}\n          subtitle={\n            this.props.HeaderRight != null\n              ? humanizeTimestamp(this.props.activity.time, tDateTimeParser)\n              : undefined\n          }\n          timestamp={this.props.activity.time}\n          icon={this.props.icon}\n          Right={this.props.HeaderRight}\n        />\n      </div>\n    );\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(userOrDefault(this.props.activity.actor));\n    }\n  };\n\n  renderContent = () => {\n    let { text } = this.props.activity;\n\n    if (text === undefined) {\n      if (typeof this.props.activity.object === 'string') {\n        text = this.props.activity.object;\n      } else {\n        text = '';\n      }\n    }\n    text = text.trim();\n    const { attachments = {} } = this.props.activity;\n\n    return (\n      <div className=\"raf-activity__content\">\n        {!!text && (\n          <div style={{ padding: '8px 16px' }}>\n            <p>\n              {textRenderer(\n                text,\n                'raf-activity',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        )}\n\n        {this.props.activity.verb === 'repost' &&\n          this.props.activity.object instanceof Object && (\n            <Card {...this.props.activity.object.data} />\n          )}\n\n        {attachments &&\n          attachments.og &&\n          Object.keys(attachments.og).length > 0 && (\n            <div style={{ padding: '8px 16px' }}>\n              {attachments.og.videos ? (\n                <Video og={attachments.og} />\n              ) : attachments.og.audios ? (\n                <Audio og={attachments.og} />\n              ) : (\n                <Card {...attachments.og} />\n              )}\n            </div>\n          )}\n\n        {Boolean(this.props.activity.image) &&\n        this.props.activity.image !== undefined ? (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery\n              images={[this.props.activity.image]}\n              // resizeMethod=\"resize\"\n            />\n          </div>\n        ) : null}\n\n        {attachments.images && Boolean(attachments.images.length) && (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery images={attachments.images} />\n          </div>\n        )}\n\n        {attachments.files && Boolean(attachments.files.length) && (\n          <ol className=\"raf-activity__attachments\">\n            {attachments.files.map(({ name, url, mimeType }, i) => (\n              <a href={sanitizeURL(url)} download key={i}>\n                <li className=\"raf-activity__file\">\n                  <FileIcon mimeType={mimeType} filename={name} /> {name}\n                </li>\n              </a>\n            ))}\n          </ol>\n        )}\n      </div>\n    );\n  };\n\n  renderFooter = () => null;\n\n  render() {\n    return (\n      <div className=\"raf-activity\">\n        <React.Fragment>\n          {smartRender(this.props.Header, {}, this.renderHeader)}\n          {smartRender(this.props.Content, {}, this.renderContent)}\n          {smartRender(this.props.Footer, {}, this.renderFooter)}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(Activity);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  to?: string,\n  onClick?: (SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Link.md\n */\nexport default class Link extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <a\n          href={this.props.to}\n          className=\"raf-link\"\n          onClick={this.props.onClick}\n        >\n          {this.props.children}\n        </a>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Link from './Link';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\nexport type Props = Streami18Ctx & {|\n  adds: Array<{}>,\n  deletes: Array<{}>,\n  labelSingle?: string,\n  labelPlural?: string,\n  /** A function that returns either the string to display or null in case no\n   * notification should be displayed */\n  labelFunction?: ({\n    count: number,\n    deleteCount: number,\n    addCount: number,\n    labelPlural?: string,\n    labelSingle?: string,\n  }) => string | null,\n  onClick?: () => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/NewActivitiesNotification.md\n */\nclass NewActivitiesNotification extends React.Component<Props> {\n  static defaultProps = {\n    adds: [],\n    deletes: [],\n  };\n\n  _labelFunction = () => {\n    const {\n      adds,\n      deletes,\n      labelSingle,\n      labelPlural,\n      labelFunction,\n      t,\n    } = this.props;\n    const addCount = (adds || []).length;\n    const deleteCount = (deletes || []).length;\n    const count = addCount + deleteCount;\n    if (labelFunction) {\n      return labelFunction({\n        count,\n        addCount,\n        deleteCount,\n        labelSingle,\n        labelPlural,\n      });\n    }\n    if (addCount === 0) {\n      return null;\n    }\n    let singleNotificationText = '';\n    let pluralNotificationText = '';\n\n    if (labelSingle) {\n      singleNotificationText = `You have 1 new ${labelSingle}`;\n    } else {\n      singleNotificationText = t('You have 1 new notification');\n    }\n\n    if (labelPlural) {\n      pluralNotificationText = `You have ${addCount} new ${labelPlural}`;\n    } else {\n      pluralNotificationText = t(\n        'You have {{ notificationCount }} new notifications',\n        {\n          notificationCount: addCount,\n        },\n      );\n    }\n\n    return addCount > 1 ? pluralNotificationText : singleNotificationText;\n  };\n  render() {\n    const label = this._labelFunction();\n    if (label === null) {\n      return null;\n    }\n\n    return (\n      <button\n        className=\"raf-new-activities-notification\"\n        type=\"button\"\n        onClick={this.props.onClick}\n      >\n        <Link>{label}</Link>\n      </button>\n    );\n  }\n}\n\nexport default withTranslationContext(NewActivitiesNotification);\n","// @flow\nimport * as React from 'react';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport type Props = {|\n  children: React.Node,\n  buttonStyle: string,\n  type: 'button' | 'submit' | 'reset',\n  onClick?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  onKeyPress?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  disabled: boolean,\n  loading: boolean,\n|};\n\n/**\n *\n * @example ./examples/Button.md\n */\nexport default class Button extends React.Component<Props> {\n  static defaultProps = {\n    buttonStyle: 'info',\n    type: 'button',\n    disabled: false,\n    loading: false,\n  };\n\n  render() {\n    const { children, buttonStyle } = this.props;\n    return (\n      <button\n        className={`raf-button${\n          buttonStyle ? ' raf-button--' + buttonStyle : ''\n        }`}\n        onClick={this.props.onClick}\n        onKeyPress={this.props.onKeyPress}\n        type={this.props.type}\n        disabled={this.props.disabled}\n      >\n        {!this.props.loading ? (\n          children\n        ) : (\n          <LoadingIndicator\n            backgroundColor=\"rgba(255,255,255,0.1)\"\n            color=\"rgba(255,255,255,0.4)\"\n          />\n        )}\n      </button>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\n\nimport Button from './Button';\n\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  onClick: () => mixed,\n  refreshing: boolean,\n  children: React.Node,\n|} & Streami18Ctx;\n\nclass LoadMoreButton extends React.Component<Props> {\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"raf-load-more-button\">\n        <Button\n          onClick={this.props.onClick}\n          buttonStyle=\"info\"\n          disabled={this.props.refreshing}\n          loading={this.props.refreshing}\n        >\n          {this.props.children ? this.props.children : t('Load more')}\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(LoadMoreButton);\n","//@flow\nimport * as React from 'react';\nimport LoadMoreButton from './LoadMoreButton';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\ntype Props = {|\n  /** The button the user should click to click to load more */\n  LoadMoreButton: Renderable,\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** The paginated content to display */\n  children: React.Node,\n|};\n\nexport default class LoadMorePaginator extends React.Component<Props> {\n  static defaultProps = {\n    LoadMoreButton,\n  };\n  render() {\n    return (\n      <React.Fragment>\n        {!this.props.reverse && this.props.children}\n        {this.props.hasNextPage\n          ? smartRender(this.props.LoadMoreButton, {\n              refreshing: this.props.refreshing,\n              onClick: this.props.loadNextPage,\n            })\n          : null}\n        {this.props.reverse && this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  text: string,\n|} & Streami18Ctx;\nclass FeedPlaceholder extends React.Component<Props> {\n  render() {\n    const { t, text } = this.props;\n    return (\n      <div className=\"raf-feed-placeholder\">\n        <p>{text || t('No data to display...')}</p>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(FeedPlaceholder);\n","// @flow\nimport * as React from 'react';\n\nimport Activity from './Activity';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport type { Props as NotifierProps } from './NewActivitiesNotification';\nimport type { Streami18Ctx } from '../Context';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { Feed, FeedContext, withTranslationContext } from '../Context';\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ActivityResponse,\n} from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render an activity in the feed */\n  Activity: Renderable,\n  /** Component to show when the feed is refreshing **/\n  LoadingIndicator: Renderable,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|} & Streami18Ctx;\n\n/**\n * Renders a feed of activities, this component is a StreamApp consumer\n * and must always be a child of the `<StreamApp>` element\n * @example ./examples/FlatFeed.md\n */\nclass FlatFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'timeline',\n    notify: false,\n    Activity,\n    Notifier: (props: NotifierProps) => (\n      <NewActivitiesNotification\n        labelPlural=\"activities\"\n        labelSingle=\"activity\"\n        {...props}\n      />\n    ),\n    Placeholder: FeedPlaceholder,\n    Paginator: LoadMorePaginator,\n    LoadingIndicator,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={this.props.options}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n        doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <FlatFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass FlatFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(this.props.options);\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  _renderWrappedActivity = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderActivity}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _childProps = () => ({\n    onToggleReaction: this.props.onToggleReaction,\n    onAddReaction: this.props.onAddReaction,\n    onRemoveReaction: this.props.onRemoveReaction,\n    onToggleChildReaction: this.props.onToggleChildReaction,\n    onAddChildReaction: this.props.onAddChildReaction,\n    onRemoveChildReaction: this.props.onRemoveChildReaction,\n    onRemoveActivity: this.props.onRemoveActivity,\n    feedGroup: this.props.feedGroup,\n    userId: this.props.userId,\n  });\n\n  _renderActivity = (item: ActivityResponse<Object, Object>) => {\n    const args = {\n      activity: item,\n      ...this._childProps(),\n    };\n\n    return smartRender(this.props.Activity, { ...args });\n  };\n\n  render() {\n    const notifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n      labelFunction: undefined,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n      loadReverseNextPage,\n      hasReverseNextPage,\n      t,\n    } = this.props;\n    if (hasReverseNextPage) {\n      notifierProps.onClick = loadReverseNextPage;\n      notifierProps.labelFunction = () => t('Load activities');\n    }\n\n    if (this.props.activities.size === 0 && this.props.hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div className=\"raf-loading-indicator\">\n          {smartRender(this.props.LoadingIndicator, {})}\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedActivity({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n\nexport default withTranslationContext(FlatFeed);\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport type { UserResponse } from '../types';\nimport { userOrDefault } from '../utils';\n\nexport type Props = {|\n  /* The list of users to display */\n  users: UserResponse[],\n  /* The size of the avatar in px */\n  avatarSize: number,\n  /* The limit of avatars to display */\n  limit: number,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/AvatarGroup.md\n */\nexport default class AvatarGroup extends React.Component<Props> {\n  static defaultProps = {\n    avatarSize: 30,\n    limit: 5,\n  };\n\n  _getOnClickUser(user: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, user)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, user: UserResponse) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(user));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"raf-avatar-group\">\n        {this.props.users &&\n          this.props.users.slice(0, this.props.limit).map((user, i) => (\n            <div className=\"raf-avatar-group__avatar\" key={`avatar-${i}`}>\n              <Avatar\n                onClick={this._getOnClickUser(user)}\n                image={user && user.data.profileImage}\n                size={this.props.avatarSize}\n                circle\n              />\n            </div>\n          ))}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { userOrDefault } from '../utils';\nimport type { ActivityData } from '../types';\n\nimport { Thumbnail } from 'react-file-utils';\n\ntype Props = {|\n  activity: ActivityData,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/AttachedActivity.md\n */\nexport default class AttachedActivity extends React.Component<Props> {\n  render() {\n    const { activity } = this.props;\n    const images =\n      activity.attachments !== undefined &&\n      activity.attachments.images !== undefined\n        ? activity.attachments.images\n        : [];\n    const actor = userOrDefault(activity.actor);\n\n    if (\n      activity.verb === 'repost' ||\n      activity.verb === 'post' ||\n      activity.verb === 'comment'\n    ) {\n      return (\n        <div className=\"raf-attached-activity\">\n          {images.length === 0 && (\n            <React.Fragment>\n              <p className=\"raf-attached-activity__author\">\n                <strong>{actor.data.name}</strong>\n              </p>\n              <p className=\"raf-attached-activity__content\">\n                {activity.object}\n              </p>\n            </React.Fragment>\n          )}\n          {images.length > 0 && (\n            <div className=\"raf-attached-activity__images\">\n              {images.slice(0, 5).map((image, i) => (\n                <Thumbnail image={image} size={50} key={`image-${i}`} />\n              ))}\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\n\nexport type Props = {|\n  children?: React.Node,\n|};\n\nexport type State = {|\n  open: boolean,\n|};\n\n/**\n * Simple wrapper for a small dropdown.\n *\n * @example ./examples/Dropdown.md\n */\nexport default class Dropdown extends React.Component<Props, State> {\n  dropdownBox: { current: null | HTMLDivElement };\n\n  constructor(props: Props) {\n    super(props);\n    this.showMenu = this.showMenu.bind(this);\n    this.hideMenu = this.hideMenu.bind(this);\n    this.dropdownBox = React.createRef();\n\n    this.state = {\n      open: false,\n    };\n  }\n\n  componentWillUnmount() {\n    // $FlowFixMe\n    document.removeEventListener('click', this.hideMenu);\n  }\n  // $FlowFixMe\n  hideMenu = (e) => {\n    // $FlowFixMe\n    if (!this.dropdownBox.current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  // $FlowFixMe\n  showMenu = (e) => {\n    e.stopPropagation();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"raf-dropdown\">\n        <IconButton onClick={this.showMenu}>\n          <svg\n            className=\"raf-dropdown__button\"\n            width=\"12\"\n            height=\"8\"\n            viewBox=\"0 0 12 8\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M1.41 0L6 4.77 10.59 0 12 1.469l-6 6.25-6-6.25z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </IconButton>\n\n        {this.state.open && (\n          <div className=\"raf-dropdown__box\" ref={this.dropdownBox}>\n            {this.props.children}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport AvatarGroup from './AvatarGroup';\nimport AttachedActivity from './AttachedActivity';\nimport Dropdown from './Dropdown';\nimport Link from './Link';\n\nimport { humanizeTimestamp, userOrDefault } from '../utils';\nimport type { UserResponse, BaseActivityGroupResponse } from '../types';\nimport type { Streami18Ctx } from '../Context';\nimport { withTranslationContext } from '../Context';\n\ntype Props = {\n  /* The activity group to display in this notification */\n  activityGroup: any,\n  /* Callback to call when clicking on a notification */\n  onClickNotification?: (activityGroup: BaseActivityGroupResponse) => mixed,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n  /* Callback to mark a notification as read, if not supplied the dropdown used\n   * to mark as read will not be shown */\n  onMarkAsRead?: ?(\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/Notification.md\n */\nclass Notification extends React.Component<Props> {\n  getUsers = (activities: any) =>\n    activities.map((item) => userOrDefault(item.actor));\n\n  _getOnClickUser(actor: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, actor)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, actor: any) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(actor));\n    }\n  };\n\n  _getOnClickNotification() {\n    return this.props.onClickNotification\n      ? this.onClickNotification\n      : undefined;\n  }\n\n  onClickNotification = (e: SyntheticEvent<>) => {\n    const { onClickNotification } = this.props;\n    if (onClickNotification) {\n      e.stopPropagation();\n      return onClickNotification(this.props.activityGroup);\n    }\n  };\n\n  render() {\n    let headerText, headerSubtext;\n    const { activityGroup, onMarkAsRead, t, tDateTimeParser } = this.props;\n    const activities = activityGroup.activities;\n    const latestActivity = activities[0];\n    const lastActor = userOrDefault(latestActivity.actor);\n\n    if (typeof latestActivity.object === 'string') {\n      return null;\n    }\n\n    if (activities.length === 1) {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t('{{ actorName }} liked your {{ activityVerb }}', {\n            actorName: lastActor.data.name,\n            activityVerb: latestActivity.object.verb,\n          });\n          break;\n        case 'repost':\n          headerText = t('{{ actorName }} reposted your {{ activityVerb }}', {\n            actorName: lastActor.data.name,\n            activityVerb: latestActivity.object.verb,\n          });\n          break;\n        case 'follow':\n          headerText = t('{{ actorName }} followed you', {\n            actorName: lastActor.data.name,\n          });\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    } else if (activities.length > 1 && activities.length < 1 + 1 + 1) {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t(\n            '{{ actorName }} and 1 other liked your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'repost':\n          headerText = t(\n            '{{ actorName }} and 1 other reposted your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'follow':\n          headerText = t('{{ actorName }} and 1 other followed you', {\n            actorName: lastActor.data.name,\n          });\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} and 1 other commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    } else {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'repost':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'follow':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others followed you',\n            { actorName: lastActor.data.name },\n          );\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    }\n\n    return (\n      <div\n        onClick={this._getOnClickNotification()}\n        className={\n          'raf-notification' +\n          (activityGroup.is_read ? ' raf-notification--read' : '')\n        }\n      >\n        <Avatar\n          onClick={this._getOnClickUser(lastActor)}\n          image={lastActor.data.profileImage}\n          circle\n          size={30}\n        />\n        <div className=\"raf-notification__content\">\n          <div className=\"raf-notification__header\">\n            <strong>{headerText}</strong> {headerSubtext}\n            {!activityGroup.is_read && onMarkAsRead && (\n              <Dropdown>\n                <div>\n                  <Link\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onMarkAsRead(activityGroup);\n                    }}\n                  >\n                    Mark&nbsp;as&nbsp;read\n                  </Link>\n                </div>\n              </Dropdown>\n            )}\n          </div>\n          <div>\n            <small>\n              {humanizeTimestamp(latestActivity.time, tDateTimeParser)}\n            </small>\n          </div>\n          {latestActivity.verb !== 'follow' ? (\n            <AttachedActivity activity={latestActivity.object} />\n          ) : null}\n        </div>\n        <div className=\"raf-notification__extra\">\n          {activities.length > 1 && latestActivity.verb === 'follow' ? (\n            <AvatarGroup\n              onClickUser={this.props.onClickUser}\n              avatarSize={30}\n              users={this.getUsers(activities.slice(1, activities.length))}\n            />\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(Notification);\n","// @flow\nimport * as React from 'react';\n\nimport { Feed, FeedContext } from '../Context';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport Notification from './Notification';\nimport { LoadingIndicator } from 'react-file-utils';\nimport FeedPlaceholder from './FeedPlaceholder';\n\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseReaction,\n} from '../types';\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** the component used to render a group in the feed */\n  Group: Renderable,\n  /** if true, feed shows the NewActivitiesNotification component when new activities are added */\n  notify: boolean,\n  /** The component used to render the new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\n/**\n * Renders a notificationfeed, this component is a StreamApp consumer and must\n * always be a child of the `<StreamApp>` element.\n * @example ./examples/NotificationFeed.md\n */\nexport default class NotificationFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: false,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions(this.props.options)}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <NotificationFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  componentWillUnmount() {\n    this.props.activities.clear();\n    this.props.activityOrder.splice(0, this.props.activityOrder.length);\n  }\n\n  _renderWrappedGroup = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderGroup}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _renderGroup = (item: BaseActivityResponse) => {\n    const args = {\n      activityGroup: item,\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      onToggleReaction: this.props.onToggleReaction,\n      onAddReaction: this.props.onAddReaction,\n      onRemoveReaction: this.props.onRemoveReaction,\n      onToggleChildReaction: this.props.onToggleChildReaction,\n      onAddChildReaction: this.props.onAddChildReaction,\n      onRemoveChildReaction: this.props.onRemoveChildReaction,\n      onRemoveActivity: this.props.onRemoveActivity,\n      onMarkAsRead: this.props.onMarkAsRead,\n      onMarkAsSeen: this.props.onMarkAsSeen,\n    };\n    return smartRender(this.props.Group, args);\n  };\n\n  render() {\n    const notifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n    } = this.props;\n\n    if (this.props.activities.size === 0 && hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div style={{ padding: 40, backgroundColor: 'rgb(247, 247, 247' }}>\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedGroup({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\n\nimport FlatFeed from './FlatFeed';\n\nimport type { FeedRequestOptions } from 'getstream';\nimport type { Renderable, BaseActivityResponse, BaseReaction } from '../types';\n\ntype Props = {|\n  activityId: string,\n  feedGroup: string,\n  userId?: string,\n  options?: FeedRequestOptions,\n  analyticsLocation?: string,\n  Activity?: Renderable,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n|};\n\n/**\n * Shows the detail of a single activity\n * @example ./examples/SinglePost.md\n */\nexport default class SinglePost extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <FlatFeed\n          feedGroup={this.props.feedGroup}\n          userId={this.props.userId}\n          options={{\n            withRecentReactions: true,\n            ...this.props.options,\n          }}\n          analyticsLocation={this.props.analyticsLocation}\n          Activity={this.props.Activity}\n          doFeedRequest={(client, feedGroup, userId, options) =>\n            client\n              .feed(feedGroup, userId)\n              .getActivityDetail(this.props.activityId, options)\n          }\n          doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n          doReactionAddRequest={this.props.doReactionAddRequest}\n          doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n          doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n          doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n          doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\n\ntype PanelStyle = 'rounded' | 'square';\n\nexport type Props = {|\n  panelStyle: PanelStyle,\n  children: React.Node,\n|};\n\n/**\n * Simple Components that renders a panel. To be combined with PanelHeader, PanelContent, PanelFooter. Used by the library to render the B2BActivity and StatusUpdateForm\n *\n * @example ./examples/Panel.md\n */\nexport default class Panel extends React.Component<Props> {\n  static defaultProps = {\n    panelStyle: 'rounded',\n  };\n\n  render() {\n    return (\n      <div className={`raf-panel raf-panel--${this.props.panelStyle}`}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n|};\n\nexport default class PanelHeading extends React.Component<Props> {\n  render() {\n    return <div className=\"raf-panel-header\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelFooter extends React.Component {\n  render() {\n    return <div className=\"raf-panel-footer\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelContent extends React.Component {\n  render() {\n    return <div className=\"raf-panel-content\">{this.props.children}</div>;\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { emojiIndex } from 'emoji-mart';\nimport ReactTextareaAutocomplete from '@webscopeio/react-textarea-autocomplete';\nimport type { Trigger, ReactRefObjectOrFunction } from '../types';\n\nexport type Props = {|\n  rows: number,\n  maxLength?: number,\n  placeholder: string,\n  onChange: (event: SyntheticEvent<HTMLTextAreaElement> | Event) => mixed,\n  onPaste: (event: SyntheticClipboardEvent<HTMLTextAreaElement>) => mixed,\n  value?: string,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n|};\n\nconst AutocompleteItem = ({ entity: { id, native } }) => (\n  <div>\n    {native} {id}\n  </div>\n);\n\n/**\n * Component is described here.\n *\n * @example ./examples/Textarea.md\n */\nexport default class Textarea extends React.Component<Props> {\n  static defaultProps = {\n    rows: 3,\n    placeholder: 'Share your opinion',\n    trigger: {},\n  };\n\n  render() {\n    const { innerRef, trigger } = this.props;\n    return (\n      <ReactTextareaAutocomplete\n        loadingComponent={LoadingIndicator}\n        trigger={{\n          ':': {\n            dataProvider: (token) => {\n              const emojis = emojiIndex.search(token) || [];\n              return emojis.slice(0, 10);\n            },\n            component: AutocompleteItem,\n            output: (item) => ({\n              key: item.id,\n              text: item.native,\n              caretPosition: 'next',\n            }),\n          },\n          ...trigger,\n        }}\n        innerRef={\n          innerRef &&\n          ((el) => {\n            if (typeof innerRef === 'function') {\n              innerRef(el);\n            } else if (this.props.innerRef != null) {\n              innerRef.current = el;\n            }\n          })\n        }\n        rows={this.props.rows}\n        maxLength={this.props.maxLength}\n        className=\"raf-textarea__textarea\"\n        containerClassName=\"raf-textarea\"\n        dropdownClassName=\"raf-emojisearch\"\n        listClassName=\"raf-emojisearch__list\"\n        itemClassName=\"raf-emojisearch__item\"\n        placeholder={this.props.placeholder}\n        onChange={this.props.onChange}\n        onSelect={this.props.onChange}\n        onPaste={this.props.onPaste}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { Picker } from 'emoji-mart';\nimport type { Emoji } from '../types';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  onSelect?: (emoji: Emoji) => mixed,\n|} & Streami18Ctx;\n\ntype State = {|\n  open: boolean,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/EmojiPicker.md\n */\nclass EmojiPicker extends React.Component<Props, State> {\n  emojiPicker = React.createRef();\n  state = {\n    open: false,\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideMenu);\n  }\n\n  hideMenu = (e: MouseEvent) => {\n    const { current } = this.emojiPicker;\n    if (current && !current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  showMenu = (e: SyntheticMouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"raf-emoji-picker\">\n        {' '}\n        {this.state.open && (\n          <div className=\"raf-emoji-picker__container\" ref={this.emojiPicker}>\n            <Picker\n              emoji=\"point_up\"\n              title={t('Pick your emoji')}\n              onSelect={this.props.onSelect}\n            />\n          </div>\n        )}\n        <div\n          role=\"button\"\n          onClick={this.showMenu}\n          className=\"raf-emoji-picker__button\"\n        >\n          <svg\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M10 15.498c2.33 0 4.304-1.456 5.106-3.5H4.892c.802 2.044 2.777 3.5 5.107 3.5zm-3.5-6.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-3.5 9a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8zm-.006-18C4.467-.002 0 4.475 0 9.998s4.468 10 9.995 10c5.526 0 10.005-4.477 10.005-10s-4.479-10-10.005-10z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(EmojiPicker);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  size: number,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/Title.md\n */\nexport default class Title extends React.Component<Props> {\n  static defaultProps = {\n    size: 18,\n  };\n  render() {\n    return (\n      <div className=\"raf-title\" style={{ fontSize: this.props.size }}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\n/* eslint sonarjs/cognitive-complexity: 0 */\nimport * as React from 'react';\n\nimport Panel from './Panel';\nimport PanelHeading from './PanelHeader';\nimport PanelFooter from './PanelFooter';\nimport PanelContent from './PanelContent';\nimport Textarea from './Textarea';\nimport Avatar from './Avatar';\nimport Card from './Card';\nimport Video from './Video';\nimport Audio from './Audio';\nimport EmojiPicker from './EmojiPicker';\nimport {\n  ImageUploadButton,\n  FileUploadButton,\n  ImagePreviewer,\n  FilePreviewer,\n  ImageDropzone,\n  LoadingIndicator,\n} from 'react-file-utils';\nimport Button from './Button';\nimport Title from './Title';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBookmark } from '@fortawesome/free-regular-svg-icons';\nimport _uniq from 'lodash/uniq';\nimport _debounce from 'lodash/debounce';\nimport _difference from 'lodash/difference';\nimport _includes from 'lodash/includes';\nimport anchorme from 'anchorme';\n\nimport { StreamApp, withTranslationContext } from '../Context';\nimport {\n  generateRandomId,\n  dataTransferItemsToFiles,\n  dataTransferItemsHaveFiles,\n  inputValueFromEvent,\n} from '../utils';\nimport type {\n  Attachments,\n  BaseAppCtx,\n  BaseActivityResponse,\n  OgData,\n  CustomActivityArgData,\n  ImageUpload,\n  FileUpload,\n  FileLike,\n  Trigger,\n  ReactRefObjectOrFunction,\n} from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport type { ActivityArgData } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be posted to */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be posted to  */\n  userId?: string,\n  /** The verb that should be used to post the activity */\n  activityVerb: string,\n  /** If you want to change something about the activity data that this form\n   * sends to stream you can do that with this function. This function gets the\n   * activity data that the form would send normally and should return the\n   * modified activity data that should be posted instead.\n   *\n   * For instance, this would add a target field to the activity:\n   *\n   * ```javascript\n   * &lt;StatusUpdateForm\n   *   modifyActivityData={(data) => ({...data, target: 'Group:1'})}\n   * />\n   * ```\n   * */\n  modifyActivityData: (activityData: {}) => ActivityArgData<{}, {}>,\n  /** Add extra footer item */\n  FooterItem?: React.Node,\n  /** A callback to run after the activity is posted successfully */\n  onSuccess?: (response: BaseActivityResponse) => mixed,\n  /** Override Post request */\n  doRequest?: (activityData: {}) => Promise<BaseActivityResponse>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** The header to display */\n  Header: React.Node,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/StatusUpdateForm.md\n */\n\nclass StatusUpdateForm extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n    activityVerb: 'post',\n    modifyActivityData: (d: {}) => d,\n  };\n\n  render() {\n    const { t, Header } = this.props;\n    const HeaderComponent = Header ? Header : <Title>{t('New Post')}</Title>;\n    const forwardedProps = {\n      ...this.props,\n      Header: HeaderComponent,\n    };\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => <StatusUpdateFormInner {...forwardedProps} {...appCtx} />}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype OgState = {|\n  scrapingActive: boolean,\n  data?: ?OgData,\n  dismissed: boolean,\n|};\n\ntype State = {|\n  text: string,\n  imageUploads: { [string]: ImageUpload },\n  imageOrder: Array<string>,\n  fileUploads: { [string]: FileUpload },\n  fileOrder: Array<string>,\n  ogUrlOrder: string[],\n  ogStateByUrl: { [string]: OgState },\n  ogActiveUrl: ?string,\n  submitting: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseAppCtx |};\nclass StatusUpdateFormInner extends React.Component<PropsInner, State> {\n  _handleOgDebounced: (string) => mixed;\n\n  textInputRef = React.createRef();\n\n  attachTextInputRef = (el) => {\n    this.textInputRef.current = el;\n    if (typeof this.props.innerRef === 'function') {\n      this.props.innerRef(el);\n    } else if (this.props.innerRef != null) {\n      this.props.innerRef.current = el;\n    }\n  };\n\n  state = {\n    text: '',\n    imageUploads: {},\n    imageOrder: [],\n    fileUploads: {},\n    fileOrder: [],\n    ogUrlOrder: [],\n    ogStateByUrl: {},\n    ogActiveUrl: null,\n    submitting: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this._handleOgDebounced = _debounce(this.handleOG, 250, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  handleOG(text) {\n    let newUrls;\n    let removedUrls;\n\n    const urlInfos = anchorme(text, {\n      list: true,\n      exclude: (info) =>\n        info.protocol !== 'https://' && info.protocol !== 'http://',\n    });\n    const urls = _uniq(urlInfos.map((info) => info.protocol + info.encoded));\n\n    this.setState(\n      (prevState) => {\n        const oldUrls = prevState.ogUrlOrder;\n        newUrls = _difference(urls, oldUrls);\n        removedUrls = _difference(oldUrls, urls);\n        const newState: $Shape<State> = {\n          ogUrlOrder: urls,\n        };\n\n        if (!_includes(urls, prevState.ogActiveUrl)) {\n          // !urls.includes(prevState.ogActiveUrl) replaced with lodash\n          newState.ogActiveUrl = null;\n          for (const url of urls) {\n            const ogState = prevState.ogStateByUrl[url];\n            if (ogState && ogState.data && !ogState.dismissed) {\n              newState.ogActiveUrl = url;\n              break;\n            }\n          }\n        }\n\n        for (const url of removedUrls) {\n          delete prevState.ogStateByUrl[url];\n        }\n        for (const url of newUrls) {\n          prevState.ogStateByUrl[url] = {\n            scrapingActive: true,\n            dismissed: false,\n          };\n        }\n        newState.ogStateByUrl = prevState.ogStateByUrl;\n        return newState;\n      },\n      () => {\n        newUrls.forEach(async (url) => {\n          let resp;\n          try {\n            resp = await this.props.client.og(url);\n          } catch (e) {\n            console.warn(e);\n            this.setState((prevState) => {\n              prevState.ogStateByUrl[url] = {\n                scrapingActive: false,\n                dismissed: false,\n              };\n              return { ogStateByUrl: prevState.ogStateByUrl };\n            });\n            return;\n          }\n          resp.url = url;\n          this.setState((prevState) => {\n            prevState.ogStateByUrl[url] = {\n              scrapingActive: false,\n              data: resp,\n              dismissed: false,\n            };\n            const newState: $Shape<State> = {\n              ogStateByUrl: prevState.ogStateByUrl,\n            };\n            if (!prevState.ogActiveUrl) {\n              newState.ogActiveUrl = url;\n            }\n\n            return newState;\n          });\n        });\n      },\n    );\n  }\n\n  _dismissOg = (og) => {\n    if (og && og.url != null) {\n      this.setState((prevState) => {\n        const { ogStateByUrl } = prevState;\n        for (const url in ogStateByUrl) {\n          ogStateByUrl[url].dismissed = true;\n        }\n\n        return {\n          ogActiveUrl: null,\n          ogStateByUrl,\n        };\n      });\n    }\n  };\n\n  _text = () => this.state.text.trim();\n\n  _object = () => {\n    for (const image of this._orderedImages()) {\n      if (image.url) {\n        return image.url;\n      }\n    }\n    return this._text();\n  };\n\n  _orderedImages = () =>\n    this.state.imageOrder.map((id) => this.state.imageUploads[id]);\n\n  _uploadedImages = (): Array<ImageUpload> =>\n    this._orderedImages().filter((upload) => upload.url);\n\n  _orderedFiles = () =>\n    this.state.fileOrder.map((id) => this.state.fileUploads[id]);\n\n  _uploadedFiles = (): Array<FileUpload> =>\n    this._orderedFiles().filter((upload) => upload.url);\n\n  _orderedOgStates = (): OgState[] =>\n    this.state.ogUrlOrder\n      .map((url) => this.state.ogStateByUrl[url])\n      .filter(Boolean);\n\n  _isOgScraping = () =>\n    this._orderedOgStates().some((state) => state.scrapingActive);\n\n  _availableOg = (): OgData[] =>\n    this._orderedOgStates()\n      .map((state) => state.data)\n      .filter(Boolean);\n\n  _activeOg = (): ?OgData => {\n    const { ogActiveUrl } = this.state;\n\n    if (ogActiveUrl) {\n      return this.state.ogStateByUrl[ogActiveUrl].data;\n    }\n  };\n\n  _canSubmit = () =>\n    Boolean(this._object()) &&\n    this._orderedImages().every((upload) => upload.state !== 'uploading') &&\n    this._orderedFiles().every((upload) => upload.state !== 'uploading') &&\n    !this._isOgScraping() &&\n    !this.state.submitting;\n\n  async addActivity() {\n    const activity: CustomActivityArgData = {\n      actor: this.props.client.currentUser,\n      verb: this.props.activityVerb,\n      object: this._object(),\n    };\n    const uploadedImages = this._uploadedImages();\n    const uploadedFiles = this._uploadedFiles();\n\n    const attachments: Attachments = {\n      og: this._activeOg(),\n    };\n\n    if (uploadedImages) {\n      attachments.images = uploadedImages\n        .map((image) => image.url)\n        .filter(Boolean);\n      activity.text = this._text();\n    }\n    if (uploadedFiles) {\n      attachments.files = uploadedFiles.map((upload) => ({\n        // url will never actually be empty string because _uploadedFiles\n        // filters those out.\n        url: upload.url || '',\n        name: upload.file.name,\n        mimeType: upload.file.type,\n      }));\n    }\n\n    if (Object.keys(attachments).length > 0) {\n      activity.attachments = attachments;\n    }\n\n    const modifiedActivity = this.props.modifyActivityData(activity);\n    if (this.props.doRequest) {\n      return await this.props.doRequest(modifiedActivity);\n    } else {\n      return await this.props.client\n        .feed(this.props.feedGroup, this.props.userId)\n        .addActivity(modifiedActivity);\n    }\n  }\n\n  onSubmitForm = async (e) => {\n    e.preventDefault();\n    this.setState({ submitting: true });\n    let response;\n    try {\n      response = await this.addActivity();\n    } catch (e) {\n      this.setState({ submitting: false });\n      this.props.errorHandler(e, 'add-activity', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.setState({\n      text: '',\n      imageUploads: {},\n      imageOrder: [],\n      fileUploads: {},\n      fileOrder: [],\n      ogUrlOrder: [],\n      ogStateByUrl: {},\n      ogActiveUrl: null,\n      submitting: false,\n    });\n    if (this.props.onSuccess) {\n      this.props.onSuccess(response);\n    }\n  };\n  _getTextAreaElement = () => this.textInputRef.current;\n\n  _onSelectEmoji = (emoji) => this._insertText(emoji.native);\n\n  _insertText = async (insertedText) => {\n    let newCursorPosition;\n\n    await this.setState((prevState) => {\n      const prevText = prevState.text;\n      const textareaElement = this._getTextAreaElement();\n      if (!textareaElement) {\n        return { text: prevText + insertedText };\n      }\n      // Insert emoji at previous cursor position\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition = selectionStart + insertedText.length;\n      return {\n        text:\n          prevText.slice(0, selectionStart) +\n          insertedText +\n          prevText.slice(selectionEnd),\n      };\n    });\n\n    const textareaElement = this._getTextAreaElement();\n    if (!textareaElement || newCursorPosition == null) {\n      return;\n    }\n    // Update cursorPosition\n    textareaElement.selectionStart = newCursorPosition;\n    textareaElement.selectionEnd = newCursorPosition;\n  };\n\n  _uploadNewFiles = (files: $ReadOnlyArray<FileLike>) => {\n    for (const file of files) {\n      if (file.type.startsWith('image/')) {\n        this._uploadNewImage(file);\n      } else if (file instanceof File) {\n        this._uploadNewFile(file);\n      }\n    }\n  };\n\n  _uploadNewImage = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        imageOrder: prevState.imageOrder.concat(id),\n        imageUploads: prevState.imageUploads,\n      };\n    });\n    if (FileReader) {\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\n      // to release the previews when not used anymore though.\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        this.setState((prevState) => {\n          prevState.imageUploads[id].previewUri = event.target.result;\n          return { imageUploads: prevState.imageUploads };\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n    return this._uploadImage(id);\n  };\n\n  _uploadNewFile = async (file: File) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        fileOrder: prevState.fileOrder.concat(id),\n        fileUploads: prevState.fileUploads,\n      };\n    });\n\n    return this._uploadFile(id);\n  };\n\n  _uploadImage = async (id: string) => {\n    const img = this.state.imageUploads[id];\n    if (!img) {\n      return;\n    }\n    const { file } = img;\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id].state = 'uploading';\n      return { imageUploads: prevState.imageUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.images.upload(file);\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {};\n        }\n        image.state = 'failed';\n        return { imageUploads: prevState.imageUploads };\n      });\n\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-image', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n      return;\n    }\n    await this.setState((prevState) => {\n      img.state = 'finished';\n      img.url = response.file;\n      return { imageUploads: prevState.imageUploads };\n    });\n  };\n\n  _uploadFile = async (id: string) => {\n    const upload = this.state.fileUploads[id];\n    if (!upload) {\n      return;\n    }\n    const { file } = upload;\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id].state = 'uploading';\n      return { fileUploads: prevState.fileUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.files.upload(file);\n    } catch (e) {\n      console.warn(e);\n      await this.setState((prevState) => {\n        if (prevState.fileUploads[id]) {\n          prevState.fileUploads[id].state = 'failed';\n          return { fileUploads: prevState.fileUploads };\n        }\n        return {};\n      });\n\n      this.props.errorHandler(e, 'upload-image', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    await this.setState((prevState) => {\n      if (prevState.fileUploads[id]) {\n        prevState.fileUploads[id].state = 'finished';\n        prevState.fileUploads[id].url = response.file;\n        return { fileUploads: prevState.fileUploads };\n      }\n      return {};\n    });\n  };\n\n  _removeImage = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const img = prevState.imageUploads[id];\n      if (!img) {\n        return {};\n      }\n      delete prevState.imageUploads[id];\n      return {\n        imageUploads: prevState.imageUploads,\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _removeFile = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const upload = prevState.fileUploads[id];\n      if (!upload) {\n        return {};\n      }\n      delete prevState.fileUploads[id];\n      return {\n        fileUploads: prevState.fileUploads,\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _onChange = (event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n    this._handleOgDebounced(text);\n  };\n\n  render() {\n    const { t } = this.props;\n    const activeOg = this._activeOg();\n    const availableOg = this._availableOg();\n    const userData = this.props.user.data || {};\n    return (\n      <Panel>\n        <form onSubmit={this.onSubmitForm}>\n          <ImageDropzone handleFiles={this._uploadNewFiles}>\n            <PanelHeading>{this.props.Header}</PanelHeading>\n            <PanelContent>\n              <div style={{ display: 'flex' }}>\n                <React.Fragment>\n                  {userData.profileImage && (\n                    <div style={{ marginRight: '16px' }}>\n                      <Avatar\n                        image={\n                          // $FlowFixMe\n                          userData.profileImage ||\n                          'https://placehold.it/100x100'\n                        }\n                        size={50}\n                        circle\n                      />\n                    </div>\n                  )}\n                </React.Fragment>\n                <Textarea\n                  innerRef={this.textInputRef}\n                  placeholder={t('Type your post...')}\n                  value={this.state.text}\n                  onChange={this._onChange}\n                  trigger={this.props.trigger}\n                  onPaste={async (event) => {\n                    const { items } = event.clipboardData;\n                    if (!dataTransferItemsHaveFiles(items)) {\n                      return;\n                    }\n\n                    event.preventDefault();\n                    // Get a promise for the plain text in case no files are\n                    // found. This needs to be done here because chrome cleans\n                    // up the DataTransferItems after resolving of a promise.\n                    let plainTextPromise;\n                    for (const item of items) {\n                      if (\n                        item.kind === 'string' &&\n                        item.type === 'text/plain'\n                      ) {\n                        plainTextPromise = new Promise((resolve) => {\n                          item.getAsString((s) => {\n                            resolve(s);\n                          });\n                        });\n                        break;\n                      }\n                    }\n\n                    const fileLikes = await dataTransferItemsToFiles(items);\n                    if (fileLikes.length) {\n                      this._uploadNewFiles(fileLikes);\n                      return;\n                    }\n                    // fallback to regular text paste\n                    if (plainTextPromise) {\n                      const s = await plainTextPromise;\n                      this._insertText(s);\n                    }\n                  }}\n                />\n              </div>\n              {this._isOgScraping() && (\n                <div className=\"raf-status-update-form__og-loading\">\n                  <LoadingIndicator /> Getting website data...\n                </div>\n              )}\n              {activeOg && (\n                <div style={{ margin: '8px 0' }}>\n                  {!activeOg.videos && !activeOg.audios ? (\n                    <Card\n                      {...activeOg}\n                      nolink\n                      handleClose={(e: any) => {\n                        e.preventDefault();\n                        this._dismissOg(activeOg);\n                      }}\n                    />\n                  ) : (\n                    <React.Fragment>\n                      {activeOg.videos ? (\n                        <Video\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                      {activeOg.audios ? (\n                        <Audio\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                    </React.Fragment>\n                  )}\n                </div>\n              )}\n              {availableOg && availableOg.length > 1 && (\n                <React.Fragment>\n                  <ol className=\"raf-status-update-form__url-list\">\n                    {availableOg.map(({ url, title }) => (\n                      <li\n                        className={`raf-status-update-form__url-list-item${\n                          url === this.state.ogActiveUrl\n                            ? ' raf-status-update-form__url-list-item--active'\n                            : ''\n                        }`}\n                        onClick={() =>\n                          this.setState((prevState) => {\n                            const ogState = prevState.ogStateByUrl[url];\n                            if (ogState) {\n                              ogState.dismissed = false;\n                            }\n                            return {\n                              ogActiveUrl: url,\n                              ogStateByUrl: prevState.ogStateByUrl,\n                            };\n                          })\n                        }\n                        key={url}\n                      >\n                        <FontAwesomeIcon icon={faBookmark} />{' '}\n                        {title !== undefined ? title : url}\n                      </li>\n                    ))}\n                  </ol>\n                </React.Fragment>\n              )}\n              {this.state.imageOrder.length > 0 && (\n                <ImagePreviewer\n                  imageUploads={this.state.imageOrder.map(\n                    (id) => this.state.imageUploads[id],\n                  )}\n                  handleRemove={this._removeImage}\n                  handleRetry={this._uploadImage}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n              {this.state.fileOrder.length > 0 && (\n                <FilePreviewer\n                  uploads={this.state.fileOrder.map(\n                    (id) => this.state.fileUploads[id],\n                  )}\n                  handleRemove={this._removeFile}\n                  handleRetry={this._uploadFile}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n            </PanelContent>\n            <PanelFooter>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <div style={{ flex: 1 }}>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <ImageUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <FileUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <EmojiPicker onSelect={this._onSelectEmoji} />\n                  {this.props.FooterItem}\n                </div>\n                <Button\n                  type=\"submit\"\n                  buttonStyle=\"primary\"\n                  loading={this.state.submitting}\n                  disabled={!this._canSubmit()}\n                >\n                  {t('Post')}\n                </Button>\n              </div>\n            </PanelFooter>\n          </ImageDropzone>\n        </form>\n      </Panel>\n    );\n  }\n}\n\nexport default withTranslationContext(StatusUpdateForm);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children?: React.Node,\n  showNumber?: boolean,\n  hidden?: boolean,\n  feedGroup?: string,\n  userId?: string,\n  unseen: number,\n  onClick?: () => mixed,\n|};\n\n/**\n *\n * @example ./examples/IconBadge.md\n */\nexport default class IconBadge extends React.Component<Props> {\n  render() {\n    return (\n      <div\n        className=\"raf-icon-badge\"\n        role=\"button\"\n        onClick={this.props.onClick}\n      >\n        {this.props.children ? (\n          this.props.children\n        ) : (\n          <svg\n            width=\"17\"\n            height=\"20\"\n            viewBox=\"0 0 17 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M8.5 20c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6.5-6V8.5c0-3.07-2.13-5.64-5-6.32V1.5C10 .67 9.33 0 8.5 0S7 .67 7 1.5v.68c-2.87.68-5 3.25-5 6.32V14l-2 2v1h17v-1l-2-2zm-2 1H4V8.5C4 6.01 6.01 4 8.5 4S13 6.01 13 8.5V15z\"\n              // fill=\"#414D54\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        )}\n        {!this.props.hidden && this.props.unseen > 0 ? (\n          <div className=\"raf-icon-badge__badge\">\n            {this.props.showNumber ? <p>{this.props.unseen}</p> : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\nexport type Props = {|\n  children?: React.Node,\n  Header?: Renderable,\n  Footer?: Renderable,\n  left: boolean,\n  right: boolean,\n  arrow: boolean,\n|};\n\n/**\n * `DropdownPanel` is a more advanced component used to create a notification dropdown for instance, it comes with three parts: `Header`, `Content` and `Footer`. The content has a limited height and the `overflow` is set to `scroll`.\n *\n * @example ./examples/DropdownPanel.md\n */\nexport default class DropdownPanel extends React.Component<Props> {\n  static defaultProps = {\n    arrow: false,\n    left: true,\n    right: false,\n  };\n\n  render() {\n    return (\n      <div\n        className={`raf-dropdown-panel ${\n          this.props.arrow ? ' raf-dropdown-panel--arrow' : ''\n        } ${\n          this.props.right\n            ? ' raf-dropdown-panel--right raf-dropdown-panel--arrow-right'\n            : 'raf-dropdown-panel--left raf-dropdown-panel--arrow-left'\n        }`}\n      >\n        {this.props.Header != null && (\n          <div className=\"raf-dropdown-panel__header\">\n            {smartRender(this.props.Header, {}, null)}\n          </div>\n        )}\n        <div className=\"raf-dropdown-panel__content\">{this.props.children}</div>\n        {this.props.Footer != null && (\n          <div className=\"raf-dropdown-panel__footer\">\n            {smartRender(this.props.Footer, {}, null)}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Feed, FeedContext } from '../Context';\nimport NotificationFeed from './NotificationFeed';\nimport Notification from './Notification';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport IconBadge from './IconBadge';\nimport DropdownPanel from './DropdownPanel';\nimport type {\n  // BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\n\nimport { smartRender } from '../utils';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render a group in the feed */\n  Group: Renderable,\n  /** If true, feed shows the NewActivitiesNotification component when new\n   * activities are added */\n  notify: boolean,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed */\n  Placeholder: Renderable,\n  /** Icon component  */\n  Icon?: Renderable,\n  /** Header component  */\n  Header?: Renderable,\n  /** Footer component */\n  Footer?: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n  /** The width of the dropdown */\n  width?: number,\n  /** Used to position the dropdown different horizontaly */\n  right?: boolean,\n|};\n\n/**\n * IMPORTANT: Changing most of the props below doesn't result in the desired\n * effect. These settings related to feed management should be changed in the\n * `sharedFeeds` prop of the [`StreamApp`](#streamapp) component.\n * @example ./examples/NotificationDropdown.md\n */\n\nexport default class NotificationDropdown extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: true,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n    width: 475,\n  };\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions({ mark_seen: false })}\n        doFeedRequest={this.props.doFeedRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => (\n            <NotificationDropdownInner {...this.props} {...feedCtx} />\n          )}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype State = {|\n  open: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationDropdownInner extends React.Component<PropsInner, State> {\n  dropdownRef: { current: null | HTMLDivElement };\n\n  constructor(props: PropsInner) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n    this.dropdownRef = React.createRef();\n  }\n\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n  };\n\n  openDropdown = () => {\n    this.setState(\n      {\n        open: true,\n      },\n      () => {\n        //$FlowFixMe\n        document.addEventListener('click', this.closeDropdown, false);\n      },\n    );\n  };\n\n  closeDropdown = (e) => {\n    if (\n      this.dropdownRef.current !== null &&\n      !this.dropdownRef.current.contains(e.target)\n    ) {\n      this.setState(\n        {\n          open: false,\n        },\n        () => {\n          //$FlowFixMe\n          document.removeEventListener('click', this.closeDropdown, false);\n        },\n      );\n    }\n  };\n\n  componentDidMount() {\n    this.props.refreshUnreadUnseen();\n  }\n\n  componentWillUnmount() {\n    //$FlowFixMe\n    document.removeEventListener('click', this.closeDropdown, false);\n  }\n\n  render() {\n    return (\n      <div style={{ position: 'relative', display: 'inline-block' }}>\n        <IconBadge\n          unseen={this.props.unseen}\n          onClick={this.openDropdown}\n          showNumber={true}\n          hidden={!this.props.notify}\n        >\n          {this.props.Icon && smartRender(this.props.Icon, {}, null)}\n        </IconBadge>\n\n        <div\n          ref={this.dropdownRef}\n          style={{\n            position: 'absolute',\n            left: this.props.right ? '' : '-22px',\n            right: this.props.right ? -29 : 0,\n            top: 35,\n            width: '100vw',\n            maxWidth: this.props.width,\n            zIndex: 9999,\n            visibility: this.state.open ? 'visible' : 'hidden',\n            transform: this.state.open ? 'translateY(0px)' : 'translateY(10px)',\n            opacity: this.state.open ? '1' : '0',\n            transition: 'all .2s ease-out',\n          }}\n        >\n          {this.state.open && (\n            <DropdownPanel\n              arrow\n              right={this.props.right}\n              Header={this.props.Header}\n              Footer={this.props.Footer}\n            >\n              <NotificationFeed\n                feedGroup={this.props.feedGroup}\n                userId={this.props.userId}\n                options={this.props.options}\n                Group={this.props.Group}\n                notify={this.props.notify}\n                Notifier={this.props.Notifier}\n                Paginator={this.props.Paginator}\n                Placeholder={this.props.Placeholder}\n                doFeedRequest={this.props.doFeedRequest}\n                doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n                doReactionAddRequest={this.props.doReactionAddRequest}\n                doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n                doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n                doChildReactionDeleteRequest={\n                  this.props.doChildReactionDeleteRequest\n                }\n                analyticsLocation={this.props.analyticsLocation}\n              />\n            </DropdownPanel>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    getScrollParent: PropTypes.func,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false && this.props.getScrollParent) {\n      scrollEl = this.props.getScrollParent().current;\n    } else if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false && this.props.getScrollParent) {\n      scrollEl = this.props.getScrollParent().current;\n    } else if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      isLoading,\n      ...props\n    } = renderProps;\n    delete props.getScrollParent;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","//@flow\nimport * as React from 'react';\nimport InfiniteScroll from './InfiniteScroll';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\ntype Props = {|\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  getScrollParent: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** threshold to trigger the loadNextPage */\n  threshold: number,\n  /** The paginated content to display */\n  children: React.Node,\n  /** Component to show when paginator is loading **/\n  Loader: Renderable,\n  /** If false, scroll listeners will be attached to the parent element instead of the window  **/\n  useWindow: boolean,\n|};\n\nexport default class InfiniteScrollPaginator extends React.Component<Props> {\n  static defaultProps = {\n    Loader: <LoadingIndicator />,\n    threshold: 250,\n    useWindow: true,\n  };\n\n  render() {\n    return (\n      <InfiniteScroll\n        loadMore={this.props.loadNextPage}\n        hasMore={this.props.hasNextPage}\n        isLoading={this.props.refreshing}\n        isReverse={this.props.reverse}\n        threshold={this.props.threshold}\n        getScrollParent={this.props.getScrollParent}\n        useWindow={this.props.useWindow}\n        loader={\n          <React.Fragment key=\"loading-indicator\">\n            {smartRender(this.props.Loader)}\n          </React.Fragment>\n        }\n      >\n        {this.props.children}\n      </InfiniteScroll>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport type { ReactionCounts } from 'getstream';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  /** The icon to display */\n  icon: string | number,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** The kind of reaction that this displays */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** Function to call when pressed, usually this should call `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/ReactionIcon.md\n */\n\nclass ReactionIcon extends React.Component<Props> {\n  render() {\n    const {\n      counts,\n      kind,\n      height,\n      width,\n      labelSingle,\n      labelPlural,\n      onPress,\n      icon,\n      t,\n    } = this.props;\n    let count = null;\n    if (counts && kind) {\n      count = counts[kind] || 0;\n    }\n\n    const dimensions = {};\n    if (height !== undefined) {\n      dimensions.height = height;\n    }\n    if (width !== undefined) {\n      dimensions.width = width;\n    }\n\n    if (!count) count = 0;\n    let label;\n\n    if (labelSingle && labelPlural) {\n      label = count === 1 ? `1 ${labelSingle}` : `${count} ${labelPlural}`;\n    }\n\n    if (!labelSingle || !labelPlural) {\n      switch (kind) {\n        case 'like':\n          label =\n            count === 1\n              ? t('1 like')\n              : t('{{ countLikes }} likes', { countLikes: count });\n          break;\n        case 'repost':\n          label =\n            count === 1\n              ? t('1 repost')\n              : t('{{ countReposts }} reposts', { countReposts: count });\n          break;\n        case 'comment':\n          label =\n            count === 1\n              ? t('1 comment')\n              : t('{{ countComments }} comments', { countComments: count });\n          break;\n        default:\n          break;\n      }\n    }\n\n    return (\n      <div className=\"raf-reaction-icon\" onClick={onPress}>\n        {icon ? (\n          <img className=\"raf-reaction-icon__image\" src={icon} alt=\"\" />\n        ) : null}\n        {count != null ? (\n          <p className=\"raf-reaction-icon__label\">{label}</p>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(ReactionIcon);\n","// @flow\n\nimport React from 'react';\nimport ReactionIcon from './ReactionIcon';\nimport type { ReactionCounts, ReactionKindMap } from 'getstream';\n\ntype Props = {|\n  /** The icon to show when the user has done this reaction (e.g. a filled in heart) */\n  activeIcon: string,\n  /** The icon to show when the user has not done this reaction yet (e.g. an empty in heart) */\n  inactiveIcon: string,\n  /** The kind of reaction that this toggles */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** The map with own reactions */\n  own_reactions: ?ReactionKindMap<{}, {}>,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** Function to call when pressed, usually this should call\n   * `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|};\n\n/**\n * A generic component that can be used to toggle a reaction and display it's\n * current state. Mostly used for reactions such as like and repost.\n * The [source for\n * LikeButton](https://github.com/GetStream/react-activity-feed/blob/master/src/components/LikeButton.js)\n * is a good example of the usage of this component.\n *\n * @example ./examples/ReactionToggleIcon.md\n */\nexport default class ReactionToggleIcon extends React.Component<Props> {\n  render() {\n    const {\n      inactiveIcon,\n      activeIcon,\n      own_reactions,\n      kind,\n      ...restProps\n    } = this.props;\n    let icon = inactiveIcon;\n    if (own_reactions && own_reactions[kind] && own_reactions[kind].length) {\n      icon = activeIcon;\n    }\n    return (\n      <div className=\"raf-reaction-toggle-icon\">\n        <ReactionIcon icon={icon} kind={kind} {...restProps} />\n      </div>\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUxJREFUOBGtk89Kw0AQxudLi4Zmo1ARPIgtnvoAPfoCevZPn0LoG9QX8OBBvHtpohcP4s2zIsUHEMR4EPEgWGqFVDPORhaibGPFLCQzu/PNb3YzG6IJhxfct1UQdfLkyAuamAqjdWYKiRllB82XzVrPxLK2nJ3YfD+MVpKEDyWWFv4gR9l0es0ZF9Dr/vFDQ3Z0Iq6b6gCeUpXr1Le8xsLmw6eF5D0+Y+aqyQPzzfPaXN/Mf1orTEBqyG+nIq5/SwBZv5XRWBugulHIxBtGlGtBMQj7g61aG173jo34tVVP4V4QjaRzvzbH5Gk7PePPWo/5V5D0Od5erQ7ssGzJCXww3XaApBAYEy50zUJgJWlAUbDLfmvpqhiYU9rTID3+d0zQY2N58egLNQ4GDI0gz8plPeg1MTIa685kcYc0UH5s60NIAJy7bmXXgLT9BOn0XD2NtcXgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUpJREFUOBGtk7FKA0EQhmeWLQSDiWKhnaVYH8TCUoiKptLKFPcKeQN9gRQpgmVUsDgrcwQ9BK9VRHwAwdpaJGACO85EllxkXS4kA8fMzv7z3ewsC5DT2p2kfh4nJz45+jbtHkMOOY6ICEFhEO5XXuxe1qvswhVfxPdbBHA5BLFAGSy4dJLzwq7iZN2AuQGiOREjIim98Cqxy/6FRd10pU90y6ClUSG91fY2P0fr8cgJi9K00DPfXZaujckJnLOyGucF8MBl2EdW5PMM6BNgK6xW6tju3PF8fy2s7gzhDBswTNt8Hq91qeg85qQg6e54t/zlhOXpJKshxHe+aTMTGN/4o8BnAtOgWwKbaMhS8Nf4eE+1g+1nyU/dGQI17Q+mgyF8bKwuX/thCD0r8HkEPAuCYGA1zs4UqFNgoDxs18fFhkEPpcX5hgWJ/wEycGS98JuJ8gAAAABJRU5ErkJggg==\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n} from '../types';\n\nimport likebuttonActive from '../images/like-active@1x.png';\nimport likebuttonInactive from '../images/like@1x.png';\n\ntype Props = {|\n  /** The activity received from stream that should be liked when pressing the\n   * LikeButton. */\n  activity: BaseActivityResponse,\n  /** The reaction received from stream that should be liked when pressing the\n   * LikeButton. Liking a reaction requires to pass both this field and\n   * the `onToggleChildReaction` as well. */\n  reaction?: BaseReaction,\n  /** The function that toggles reactions on activities. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n  /** The function that toggles reactions on reactions. */\n  onToggleChildReaction?: ToggleChildReactionCallbackFunction,\n|};\n\n/**\n * Like button ready to be embedded as Activity footer\n * @example ./examples/LikeButton.md\n */\nexport default class LikeButton extends React.Component<Props> {\n  _onPress = () => {\n    const {\n      activity,\n      reaction,\n      onToggleReaction,\n      onToggleChildReaction,\n    } = this.props;\n\n    if (reaction && onToggleChildReaction) {\n      return onToggleChildReaction('like', reaction, {}, {});\n    }\n    return onToggleReaction('like', activity, {}, {});\n  };\n\n  render() {\n    const { activity, reaction } = this.props;\n    let counts, own_reactions;\n    if (reaction && this.props.onToggleChildReaction) {\n      counts = reaction.children_counts;\n      own_reactions = reaction.own_children;\n    } else {\n      if (reaction) {\n        console.warn(\n          'reaction is passed to the LikeButton but ' +\n            'onToggleChildReaction is not, falling back to liking the activity',\n        );\n      }\n      counts = activity.reaction_counts;\n      own_reactions = activity.own_reactions;\n    }\n\n    return (\n      <ReactionToggleIcon\n        counts={counts}\n        own_reactions={own_reactions}\n        kind=\"like\"\n        onPress={this._onPress}\n        activeIcon={likebuttonActive}\n        inactiveIcon={likebuttonInactive}\n        labelSingle=\"like\"\n        labelPlural=\"likes\"\n      />\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqDXaArdptoNvAVrBDe071I/3oFwkhxzdysS0nz9+J0zSVq1/3WY+2Gnj8lNKksGoQiirMqKJbtkTfa83sHVKkBR8awP++xqLymNOYHUDN5znMIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAJWhChOoqSnsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqbnCBFdpNoJvACnBpp0v1I/3oFwkhxzdysS0nz9+J0zSVa92/sx5tNfD4KaVJYdUgFFWYUcWyfRJ9rzWzd0iRFnxoAP819kXlMacxO4Ca59DNIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAvNZE146X6PUAAAAASUVORK5CYII=\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  ToggleReactionCallbackFunction,\n} from '../types';\n\nimport { StreamApp, withTranslationContext } from '../Context';\n\nimport repostButtonActive from '../images/repost-active@1x.png';\nimport repostButtonInactive from '../images/repost@1x.png';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be reposted to,\n   * e.g. `user` when posting to your own profile */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be reposted to  */\n  userId?: string,\n  /** The activity received for stream for which to show the like buton. This is\n   * used to initalize the toggle state and the counter. */\n  activity: BaseActivityResponse,\n  /** The function that toggles the reaction. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n|};\n\n/**\n * A repost button ready to be embedded as Activity footer\n * @example ./examples/RepostButton.md\n */\n\nclass RepostButton extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n  };\n\n  render() {\n    if (this.props.userId != null) {\n      return <RepostButtonInner {...this.props} />;\n    }\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => (\n          <RepostButtonInner {...this.props} userId={appCtx.user.id} />\n        )}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, userId: string |};\nclass RepostButtonInner extends React.Component<PropsInner> {\n  render() {\n    const { feedGroup, userId, activity, onToggleReaction } = this.props;\n\n    return (\n      <ReactionToggleIcon\n        counts={activity.reaction_counts}\n        own_reactions={activity.own_reactions}\n        kind=\"repost\"\n        onPress={() =>\n          onToggleReaction(\n            'repost',\n            activity,\n            {},\n            { targetFeeds: [`${feedGroup}:${userId}`] },\n          )\n        }\n        activeIcon={repostButtonActive}\n        inactiveIcon={repostButtonInactive}\n      />\n    );\n  }\n}\n\nexport default withTranslationContext(RepostButton);\n","// @flow\nimport * as React from 'react';\n\ntype Align = 'center' | 'flex-start' | 'flex-end';\ntype Justify =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end';\ntype JustifySelf =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end'\n  | 'stretch';\ntype Direction = 'row' | 'column' | 'row-reverse' | 'column-reverse';\ntype Wrap = 'wrap' | 'nowrap' | 'wrap-reverse';\n\ntype Props = {|\n  children: React.Node,\n  a?: Align,\n  j?: Justify,\n  js?: JustifySelf,\n  d: Direction,\n  w: Wrap,\n  style?: any,\n|};\n/**\n * Simple Flex wrapper for centering UI elements. To be expanded in the future.\n *\n * @example ./examples/Flex.md\n */\nexport default class Flex extends React.Component<Props> {\n  static defaultProps = {\n    d: 'row',\n    w: 'nowrap',\n  };\n  render() {\n    return (\n      <div\n        className={`raf-flex`}\n        style={{\n          justifyContent: this.props.j,\n          alignItems: this.props.a,\n          justifySelf: this.props.js,\n          flexDirection: this.props.d,\n          flexWrap: this.props.w,\n          ...this.props.style,\n        }}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n// import ReactionIcon from './ReactionIcon';\nimport LikeButton from './LikeButton';\nimport RepostButton from './RepostButton';\nimport Flex from './Flex';\nimport type {\n  BaseActivityResponse,\n  ToggleReactionCallbackFunction,\n} from '../types';\n\nexport type Props = {|\n  /** The feed group part of the feed that the activity should be reposted to\n   * when pressing the RepostButton, e.g. `user` when posting to your own\n   * profile */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be reposted to when\n   * pressing the RepostButton */\n  userId?: string,\n  /** The activity received for stream for which to show the like buton. This is\n   * used to initalize the toggle state and the counter. */\n  activity: BaseActivityResponse,\n  /** The function that toggles  reaction. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n|};\n\n/**\n * Wrapper with LikeButton and Repost Button used by the Standard Activity.\n *\n * @example ./examples/ActivityFooter.md\n */\nexport default class ActivityFooter extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n  };\n\n  render() {\n    const { activity, onToggleReaction } = this.props;\n    return (\n      <div className=\"raf-activity-footer\">\n        <div className=\"raf-activity-footer__left\" />\n        <div className=\"raf-activity-footer__right\">\n          <Flex a=\"center\">\n            <LikeButton\n              activity={activity}\n              onToggleReaction={onToggleReaction}\n            />\n            <RepostButton {...this.props} />\n          </Flex>\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\nexport type Props = {|\n  /** callback function used on click */\n  onClick?: () => mixed,\n  /** initial follow state */\n  followed?: boolean,\n|};\n\nexport type State = {\n  followed: boolean,\n};\n\n/**\n * Component is described here.\n *\n * @example ./examples/FollowButton.md\n */\nexport default class FollowButton extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { followed: this.props.followed || false };\n  }\n\n  render() {\n    const { onClick, followed } = this.props;\n    return (\n      <div\n        className={`raf-follow-button ${\n          followed ? 'raf-follow-button--active' : ''\n        }`}\n        role=\"button\"\n        onClick={onClick}\n      >\n        {followed ? 'Following' : 'Follow'}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { FeedContext } from '../Context';\nimport type { Renderable, BaseFeedCtx } from '../types';\nimport { smartRender } from '../utils';\nimport immutable from 'immutable';\n\ntype Props = {|\n  /** The ID of the activity for which these reactions are */\n  activityId: string,\n  /** The reaction kind that you want to display in this list, e.g `like` or\n   * `comment` */\n  reactionKind: string,\n  /** The component that should render the reaction */\n  Reaction: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the reactions\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load reactions starting with the oldest reaction first, instead\n   * of the default where reactions are displayed and loaded most recent first.\n   * */\n  oldestToNewest: boolean,\n  /** Reverse the order the reactions are displayed in. */\n  reverseOrder: boolean,\n|};\n\nexport default class ReactionList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  render() {\n    return (\n      <FeedContext.Consumer>\n        {(appCtx) => <ReactionListInner {...this.props} {...appCtx} />}\n      </FeedContext.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass ReactionListInner extends React.Component<PropsInner> {\n  componentDidMount() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n    } = this.props;\n    if (!oldestToNewest) {\n      return;\n    }\n\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    const orderPrefix = 'oldest';\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    if (reactions_extra) {\n      return;\n    }\n    return this.props.loadNextReactions(\n      activityId,\n      reactionKind,\n      activityPath,\n      oldestToNewest,\n    );\n  }\n\n  render() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    let reactionsOfKind = activities.getIn(\n      [...activityPath, orderPrefix + '_reactions', reactionKind],\n      immutable.List(),\n    );\n    if (reverseOrder) {\n      reactionsOfKind = reactionsOfKind.reverse();\n    }\n\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([reactionKind, 'next'], '');\n    }\n\n    const refreshing = activities.getIn(\n      [\n        ...activityPath,\n        orderPrefix + '_reactions_extra',\n        reactionKind,\n        'refreshing',\n      ],\n      false,\n    );\n\n    return smartRender(this.props.Paginator, {\n      loadNextPage: () =>\n        this.props.loadNextReactions(\n          activityId,\n          reactionKind,\n          activityPath,\n          oldestToNewest,\n        ),\n      hasNextPage: Boolean(nextUrl),\n      refreshing,\n      reverse: reverseOrder,\n      children: (\n        <React.Fragment>\n          {reactionsOfKind.map((reaction) => (\n            <ImmutableItemWrapper\n              key={reaction.get('id')}\n              item={reaction}\n              renderItem={this.renderReaction}\n            />\n          ))}\n        </React.Fragment>\n      ),\n    });\n  }\n  renderReaction = (reaction) => {\n    const { Reaction } = this.props;\n\n    return smartRender(Reaction, { reaction });\n  };\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Flex from './Flex';\nimport type { Comment } from '../types';\n\nimport { humanizeTimestamp, textRenderer } from '../utils';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\nexport type Props = {|\n  comment: Comment,\n  onClickUser?: (?any) => mixed,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentItem.md\n */\nclass CommentItem extends React.Component<Props> {\n  _user = () => {\n    const { user } = this.props.comment;\n    return user;\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(this._user());\n    }\n  };\n\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  render() {\n    const { comment, tDateTimeParser } = this.props;\n    return (\n      <div className=\"raf-comment-item\">\n        <Flex a=\"flex-start\" style={{ padding: '8px 0' }}>\n          {comment.user.data.profileImage && (\n            <Avatar\n              onClick={this._getOnClickUser()}\n              image={comment.user.data.profileImage}\n              circle\n              size={25}\n            />\n          )}\n        </Flex>\n        <Flex d=\"column\" style={{ flex: 1, margin: '0 8px' }}>\n          <div className=\"raf-comment-item__content\">\n            <time dateTime={comment.created_at} title={comment.created_at}>\n              <small>\n                {humanizeTimestamp(comment.created_at, tDateTimeParser)}\n              </small>\n            </time>\n            <p>\n              <span\n                onClick={this._getOnClickUser()}\n                className=\"raf-comment-item__author\"\n              >\n                {comment.user.data.name}\n              </span>{' '}\n              {textRenderer(\n                comment.data.text,\n                'raf-comment-item',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        </Flex>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(CommentItem);\n","//@flow\nimport React from 'react';\nimport ReactionList from './ReactionList';\nimport CommentItem from './CommentItem';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { smartRender } from '../utils';\nimport type { Renderable, Comment } from '../types';\n\nexport type Props = {|\n  /** The ID of the activity for which these comments are */\n  activityId: string,\n  /** The component that should render the comment */\n  CommentItem: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the comments\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load comments starting with the oldest reaction first, instead\n   * of the default where comments are displayed and loaded most recent first.\n   */\n  oldestToNewest: boolean,\n  /** Reverse the order the comments are displayed in. */\n  reverseOrder: boolean,\n|};\n\n/**\n * CommentList uses ReactionList under the hood to render a list of comments.\n *\n * @example ./examples/CommentList.md\n */\nexport default class CommentList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    CommentItem,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  _Reaction = ({ reaction }: { reaction: Comment }) =>\n    smartRender(this.props.CommentItem, { comment: reaction });\n  render() {\n    const {\n      Paginator,\n      activityId,\n      activityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    return (\n      <React.Fragment>\n        <ReactionList\n          Paginator={Paginator}\n          activityId={activityId}\n          reactionKind={'comment'}\n          Reaction={this._Reaction}\n          activityPath={activityPath}\n          oldestToNewest={oldestToNewest}\n          reverseOrder={reverseOrder}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Button from './Button';\nimport Textarea from './Textarea';\nimport { inputValueFromEvent } from '../utils';\n\nimport type {\n  AddReactionCallbackFunction,\n  BaseActivityResponse,\n  Trigger,\n} from '../types';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\nexport type Props = {|\n  activity: BaseActivityResponse,\n  onAddReaction: AddReactionCallbackFunction,\n  kind: string,\n  placeholder: string,\n  image?: string,\n  onSuccess?: () => mixed,\n  trigger?: Trigger,\n|} & Streami18Ctx;\n\ntype State = {|\n  text: string,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentField.md\n */\nclass CommentField extends React.Component<Props, State> {\n  textareaRef = React.createRef();\n\n  state = {\n    text: '',\n  };\n\n  onSubmitForm = async (e: SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (this.state.text !== '') {\n      try {\n        await this.props.onAddReaction('comment', this.props.activity, {\n          text: this.state.text,\n        });\n      } catch (e) {\n        return;\n      }\n      this.setState({ text: '' });\n      if (this.props.onSuccess) {\n        this.props.onSuccess();\n      }\n    }\n  };\n\n  _onChange = (event: SyntheticEvent<HTMLTextAreaElement> | Event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n  };\n\n  componentDidMount() {\n    if (this.textareaRef.current) {\n      this.textareaRef.current.addEventListener('keydown', (e) => {\n        if (\n          e.which === 13 &&\n          this.textareaRef.current &&\n          this.textareaRef.current.nextSibling === null\n        ) {\n          this.onSubmitForm(e);\n        }\n      });\n    }\n  }\n\n  render() {\n    const { t, placeholder } = this.props;\n    return (\n      <form onSubmit={this.onSubmitForm} className=\"raf-comment-field\">\n        {this.props.image ? (\n          <Avatar image={this.props.image} circle size={39} />\n        ) : null}\n        <div className=\"raf-comment-field__group\">\n          <Textarea\n            rows={1}\n            value={this.state.text}\n            placeholder={placeholder || t('Start Typing...')}\n            onChange={this._onChange}\n            trigger={this.props.trigger}\n            onPaste={() => null}\n            maxLength={280}\n            innerRef={this.textareaRef}\n          />\n          <Button\n            buttonStyle=\"primary\"\n            disabled={this.state.text === ''}\n            type=\"submit\"\n          >\n            {t('Post')}\n          </Button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default withTranslationContext(CommentField);\n","// @flow\nimport * as React from 'react';\n\ntype Props = {|\n  label: string,\n  data: string | number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/DataLabel.md\n */\nexport default class DataLabel extends React.Component<Props> {\n  static defaultProps = {\n    label: 'label',\n    data: 'data',\n  };\n\n  render() {\n    return (\n      <div className=\"raf-data-label\">\n        <span className=\"raf-data-label__label\">{this.props.label}</span>\n        <span className=\"raf-data-label__data\">{this.props.data}</span>\n      </div>\n    );\n  }\n}\n"],"names":["Dayjs","extend","utc","minMax","humanizeTimestamp","timestamp","tDateTimeParser","time","add","utcOffset","now","from","smartRender","ElementOrComponentOrLiteral","props","fallback","undefined","React","ComponentOrLiteral","React.createElement","userOrDefault","user","actor","notFound","id","created_at","updated_at","data","name","profileImage","error","generateRandomId","S4","Math","random","toString","substring","dataTransferItemsHaveFiles","items","length","item","kind","type","getFileLikes","fileLikes","file","getAsFile","push","dataTransferItemsToFiles","blobPromises","parser","DOMParser","Promise","accept","getAsString","s","doc","parseFromString","imageTags","getElementsByTagName","imagePromises","tag","src","fetch","res","contentType","headers","get","arrayBuffer","buf","blob","Blob","all","inputValueFromEvent","event","target","currentTarget","inputTarget","value","sanitizeURL","url","proto","URL","protocol","textRenderer","text","parentClass","onClickMention","onClickHashtag","split","map","word","i","includes","mention","twitter","extractMentions","React.Fragment","startsWith","slice","indexOf","endsWith","hashtag","extractHashtags","anchorme","validate","email","link","list","encoded","urlText","_truncate","reduce","accu","elem","FeedManager","activityOrder","activities","immutable","Map","activityIdToPath","activityIdToPaths","reactionIdToPaths","reactionActivities","lastResponse","lastReverseResponse","refreshing","realtimeAdds","realtimeDeletes","subscription","unread","unseen","numSubscribers","reactionsBeingToggled","childReactionsBeingToggled","changed","state","triggerUpdate","label","activity","track","analyticsClient","console","warn","feed","client","feedGroup","userId","trackEngagement","feed_id","content","foreign_id","location","analyticsLocation","activityId","activityPath","rest","reaction","reactionId","options","doReactionAddRequest","reactions","errorHandler","trackAnalytics","enrichedReaction","fromJS","full","setState","prevState","getActivityPaths","path","removeFoundReactionIdPaths","getIn","toJS","updateIn","v","List","unshift","addFoundReactionIdPaths","doReactionDeleteRequest","remove","findIndex","r","_removeActivityFromState","togglingReactions","currentReactions","last","onRemoveReaction","onAddReaction","doChildReactionAddRequest","childReaction","addChild","getReactionPaths","doChildReactionDeleteRequest","onRemoveChildReaction","onAddChildReaction","getActivityPath","outerId","groupArrayPath","removeFoundActivityIdPath","removeFoundActivityIdPaths","removeIn","size","addFoundActivityIdPath","addFoundActivityIdPaths","filter","doActivityDeleteRequest","removeActivity","group","_onMarkAs","markArg","groupArray","Array","isArray","g","doFeedRequest","limit","id_lte","counterKey","counter","groupId","markerPath","setIn","extraOptions","propOpts","id_gt","id_gte","id_lt","offset","refresh","withReactionCounts","withOwnReactions","response","results","a","aggregatedResponse","forEach","act","previous","currentPath","addFoundActivities","obj","pop","_isPlainObject","verb","object","k","addFoundReactions","basePath","oldLength","removeFoundReactions","_remove","_isEqual","setReactionActivities","getOptions","newState","responseToActivityMap","responseToActivityIdToPath","responseToActivityIdToPaths","feedResponseToReactionIdToPaths","responseToReactionActivities","unseenUnreadFromResponse","mark_seen","mark_read","notify","subscribe","numActivityDiff","deleted","concat","then","log","err","registeredCallbacks","cancel","Boolean","next","nextURL","query","merge","oldestToNewest","activity_id","orderPrefix","latestReactionsPath","nextUrlPath","refreshingPath","reactions_extra","nextUrl","doReactionsFilterRequest","reactionResponseToReactionIdToPaths","initialOptions","previousUrl","callback","splice","unsubscribe","handleError","detail","defaultNS","defaultLng","updateLocale","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","meridiemParse","meridiemHour","hour","meridiem","en_locale","weekdays","months","defaultStreami18nOptions","language","disableDateTimeTranslations","debug","logger","msg","dayjsLocaleConfigForLanguage","DateTimeParser","Streami18n","i18n","createInstance","en","enTranslations","nl","nlTranslations","ru","ruTranslations","tr","trTranslations","fr","frTranslations","hi","hiTranslations","it","itTranslations","isCustomDateTimeParser","Object","keys","Ls","availableLanguages","translations","currentLanguage","getAvailableLanguages","i18nInstance","finalOptions","LocalizedFormat","localeData","relativeTime","Error","translationsForLanguage","i18nextConfig","nsSeparator","keySeparator","fallbackLng","lng","interpolation","escapeValue","parseMissingKeyHandler","key","validateCurrentLanguage","addOrUpdateLocale","localeExists","locale","init","resources","t","initialized","dayjsLocales","translation","customDayjsLocale","addResources","config","changeLanguage","setLanguageCallback","StreamContext","changedUserData","sharedFeedManagers","TranslationContext","input","withTranslationContext","OriginalComponent","ContextAwareComponent","ContextComponent","translationContext","displayName","replace","StreamApp","getOrCreate","defaultUserData","initClientState","userData","prevProps","apiKey","token","appId","getUserInfo","streami18n","registerSetLanguageCallback","getTranslators","streamContextValue","children","width","height","minHeight","display","flexDirection","alignItems","justifyContent","color","backgroundColor","fontFamily","userToken","sharedFeeds","StreamAppConsumer","appCtx","Child","stream","connect","analyticsToken","StreamAnalytics","setUser","currentUser","feedProps","manager","FeedContext","Feed","_appCtxWrapperFunc","FeedInner","forceUpdate","onToggleReaction","onToggleChildReaction","onRemoveActivity","onMarkAsRead","onMarkAsSeen","hasDoneRequest","refreshUnreadUnseen","loadNextReactions","loadNextPage","hasNextPage","loadReverseNextPage","hasReverseNextPage","feedManager","feedId","register","boundForceUpdate","clientDifferent","notifyDifferent","feedDifferent","optionsDifferent","doFeedRequestDifferent","unregister","getCtx","Avatar","image","alt","rounded","circle","onClick","placeholder","PureComponent","UserBar","avatar","onClickUser","username","AfterUsername","icon","subtitle","Right","Card","trimmedUrl","e","handleClose","images","nolink","svg","IconButton","_handleClose","__html","title","description","trimUrl","Component","Audio","audioRef","current","pause","updateProgress","playing","setInterval","play","window","clearInterval","position","currentTime","duration","progress","pauseAudio","open","og","audio","audios","secure_url","playAudio","FontAwesomeIcon","faPlayCircle","faPauseCircle","Video","videos","video","CloseButton","newUrl","join","videoProps","controls","preload","poster","parsedUrl","urlsThatAreGifs","gifUrl","host","autoPlay","muted","loop","playsInline","site_name","Gallery","currentImage","lightboxIsOpen","openLightbox","getImages","gotoPrevious","gotoNext","closeLightbox","Activity","padding","_getOnClickUser","HeaderRight","trim","attachments","files","mimeType","FileIcon","Header","renderHeader","Content","renderContent","Footer","renderFooter","Link","to","NewActivitiesNotification","adds","deletes","labelSingle","labelPlural","labelFunction","addCount","deleteCount","count","singleNotificationText","pluralNotificationText","notificationCount","_labelFunction","Button","buttonStyle","onKeyPress","disabled","loading","LoadingIndicator","LoadMoreButton","LoadMorePaginator","reverse","FeedPlaceholder","FlatFeed","feedCtx","Notifier","Placeholder","Paginator","FlatFeedInner","ref","listRef","scrollToOffset","_renderActivity","args","_childProps","_refresh","notifierProps","_renderWrappedActivity","ImmutableItemWrapper","renderItem","AvatarGroup","stopPropagation","users","avatarSize","AttachedActivity","Thumbnail","Dropdown","dropdownBox","contains","document","removeEventListener","hideMenu","addEventListener","showMenu","bind","Notification","onClickNotification","activityGroup","headerText","headerSubtext","latestActivity","lastActor","actorName","activityVerb","_getOnClickNotification","is_read","getUsers","NotificationFeed","makeDefaultOptions","Group","copy","NotificationFeedInner","_renderGroup","clear","_renderWrappedGroup","SinglePost","withRecentReactions","getActivityDetail","Panel","panelStyle","PanelHeading","PanelFooter","PanelContent","AutocompleteItem","entity","native","Textarea","innerRef","trigger","dataProvider","emojis","emojiIndex","search","component","output","caretPosition","el","rows","maxLength","onChange","onPaste","EmojiPicker","createRef","emojiPicker","preventDefault","Picker","onSelect","Title","fontSize","StatusUpdateForm","HeaderComponent","forwardedProps","modifyActivityData","d","StatusUpdateFormInner","textInputRef","imageUploads","imageOrder","fileUploads","fileOrder","ogUrlOrder","ogStateByUrl","ogActiveUrl","submitting","dismissed","_orderedImages","_text","upload","_orderedFiles","_orderedOgStates","some","scrapingActive","_object","every","_isOgScraping","addActivity","onSuccess","emoji","_insertText","insertedText","prevText","textareaElement","_getTextAreaElement","selectionStart","selectionEnd","newCursorPosition","_uploadNewImage","File","_uploadNewFile","FileReader","reader","onload","previewUri","result","readAsDataURL","_uploadImage","_uploadFile","img","alreadyRemoved","_id","_handleOgDebounced","_debounce","handleOG","leading","trailing","newUrls","removedUrls","urlInfos","exclude","info","urls","_uniq","oldUrls","_difference","_includes","ogState","resp","uploadedImages","_uploadedImages","uploadedFiles","_uploadedFiles","_activeOg","modifiedActivity","doRequest","activeOg","availableOg","_availableOg","onSubmitForm","ImageDropzone","_uploadNewFiles","marginRight","_onChange","clipboardData","plainTextPromise","resolve","margin","_dismissOg","faBookmark","ImagePreviewer","_removeImage","FilePreviewer","_removeFile","flex","ImageUploadButton","FileUploadButton","_onSelectEmoji","FooterItem","_canSubmit","IconBadge","hidden","showNumber","DropdownPanel","arrow","right","left","NotificationDropdown","NotificationDropdownInner","closeDropdown","dropdownRef","openDropdown","Icon","top","maxWidth","zIndex","visibility","transform","opacity","transition","InfiniteScroll","scrollListener","pageLoaded","pageStart","attachScrollListener","detachScrollListener","detachMousewheelListener","loader","defaultLoader","scrollEl","useWindow","scrollComponent","parentNode","mousewheelListener","useCapture","getScrollParent","getParentElement","hasMore","isLoading","initialLoad","deltaY","documentElement","body","scrollTop","pageYOffset","isReverse","calculateOffset","scrollHeight","clientHeight","Number","threshold","offsetParent","loadMore","calculateTopPosition","offsetHeight","innerHeight","offsetTop","renderProps","filterProps","element","node","childrenArray","createElement","PropTypes","isRequired","bool","func","number","InfiniteScrollPaginator","Loader","ReactionIcon","counts","onPress","countLikes","countReposts","countComments","ReactionToggleIcon","inactiveIcon","activeIcon","own_reactions","restProps","LikeButton","children_counts","own_children","reaction_counts","_onPress","likebuttonActive","likebuttonInactive","RepostButton","RepostButtonInner","targetFeeds","repostButtonActive","repostButtonInactive","Flex","j","justifySelf","js","flexWrap","w","style","ActivityFooter","FollowButton","followed","ReactionList","reverseOrder","ReactionListInner","Reaction","reactionKind","reactionsOfKind","renderReaction","CommentItem","comment","_user","CommentList","_Reaction","CommentField","textareaRef","which","nextSibling","DataLabel"],"mappings":"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"}