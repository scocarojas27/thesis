{"ast":null,"code":"import _objectSpread from '@babel/runtime/helpers/objectSpread';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _extends from '@babel/runtime/helpers/extends';\nimport React__default, { isValidElement, createElement, Fragment, createContext, Component, createRef, PureComponent } from 'react';\nimport stream from 'getstream';\nimport StreamAnalytics from 'stream-analytics';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport immutable from 'immutable';\nimport URL from 'url-parse';\nimport anchorme from 'anchorme';\nimport _truncate from 'lodash/truncate';\nimport twitter from 'twitter-text';\nimport Dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport minMax from 'dayjs/plugin/minMax';\nimport _isPlainObject from 'lodash/isPlainObject';\nimport _isEqual from 'lodash/isEqual';\nimport _remove from 'lodash/remove';\nimport i18n from 'i18next';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\nimport 'dayjs/locale/en';\nimport { IconButton, FileIcon, LoadingIndicator, Thumbnail, ImageDropzone, ImagePreviewer, FilePreviewer, ImageUploadButton, FileUploadButton } from 'react-file-utils';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlayCircle, faPauseCircle, faBookmark } from '@fortawesome/free-regular-svg-icons';\nimport Lightbox from 'react-images';\nimport { emojiIndex, Picker } from 'emoji-mart';\nimport ReactTextareaAutocomplete from '@webscopeio/react-textarea-autocomplete';\nimport _uniq from 'lodash/uniq';\nimport _debounce from 'lodash/debounce';\nimport _difference from 'lodash/difference';\nimport _includes from 'lodash/includes';\nimport PropTypes from 'prop-types';\nDayjs.extend(utc);\nDayjs.extend(minMax); // import type { UserResponse } from 'getstream';\n\nfunction humanizeTimestamp(timestamp, tDateTimeParser) {\n  // Following calculation is based on assumption that tDateTimeParser()\n  // either returns momentjs or dayjs object.\n  var time = tDateTimeParser(timestamp).add(Dayjs(timestamp).utcOffset(), 'minute'); // parse time as UTC\n\n  var now = tDateTimeParser();\n  return time.from(now);\n}\n\nvar smartRender = function smartRender(ElementOrComponentOrLiteral, props, fallback) {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n\n  if (isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    return ElementOrComponentOrLiteral;\n  } // Flow cast through any to remove React.Element after previous check\n\n\n  var ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (typeof ComponentOrLiteral === 'string' || typeof ComponentOrLiteral === 'number' || typeof ComponentOrLiteral === 'boolean' || ComponentOrLiteral == null) {\n    return ComponentOrLiteral;\n  }\n\n  return createElement(ComponentOrLiteral, props);\n};\n\nfunction userOrDefault(user) {\n  var actor;\n  var notFound = {\n    id: '!not-found',\n    created_at: '',\n    updated_at: '',\n    data: {\n      name: 'Unknown',\n      profileImage: ''\n    }\n  };\n\n  if (!user || typeof user === 'string' || typeof user.error === 'string') {\n    actor = notFound;\n  } else {\n    //$FlowBug\n    actor = user;\n  }\n\n  return actor;\n}\n\nfunction generateRandomId() {\n  // prettier-ignore\n  return S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4();\n}\n\nfunction S4() {\n  return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n}\n\nfunction dataTransferItemsHaveFiles(items) {\n  if (!items || !items.length) {\n    return false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var item = _step.value;\n\n      if (item.kind === 'file' || item.type === 'text/html') {\n        return true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction getFileLikes(items) {\n  var fileLikes = [];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var item = _step2.value;\n\n      if (item.kind === 'file') {\n        var file = item.getAsFile();\n\n        if (file) {\n          fileLikes.push(file);\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return fileLikes;\n}\n\nfunction dataTransferItemsToFiles(_x) {\n  return _dataTransferItemsToFiles.apply(this, arguments);\n}\n\nfunction _dataTransferItemsToFiles() {\n  _dataTransferItemsToFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(items) {\n    var fileLikes, blobPromises, parser, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _loop, _iterator3, _step3;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!(!items || !items.length)) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", []);\n\n          case 2:\n            fileLikes = getFileLikes(items); // If there are files inside the DataTransferItem prefer those\n\n            if (!fileLikes.length) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", fileLikes);\n\n          case 5:\n            // Otherwise extract images from html\n            blobPromises = [];\n            parser = new DOMParser();\n            _iteratorNormalCompletion3 = true;\n            _didIteratorError3 = false;\n            _iteratorError3 = undefined;\n            _context3.prev = 10;\n\n            _loop = function _loop() {\n              var item = _step3.value;\n\n              if (item.type === 'text/html') {\n                blobPromises.push(new Promise(function (accept) {\n                  item.getAsString( /*#__PURE__*/function () {\n                    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(s) {\n                      var doc, imageTags, imagePromises, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _loop2, _iterator4, _step4, _ret;\n\n                      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                        while (1) {\n                          switch (_context2.prev = _context2.next) {\n                            case 0:\n                              doc = parser.parseFromString(s, 'text/html');\n                              imageTags = doc.getElementsByTagName('img');\n                              imagePromises = [];\n                              _iteratorNormalCompletion4 = true;\n                              _didIteratorError4 = false;\n                              _iteratorError4 = undefined;\n                              _context2.prev = 6;\n\n                              _loop2 = function _loop2() {\n                                var tag = _step4.value;\n\n                                if (!tag.src) {\n                                  return \"continue\";\n                                }\n\n                                imagePromises.push(_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                                  var res, contentType, buf, blob;\n                                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          _context.prev = 0;\n                                          _context.next = 3;\n                                          return fetch(tag.src);\n\n                                        case 3:\n                                          res = _context.sent;\n                                          _context.next = 9;\n                                          break;\n\n                                        case 6:\n                                          _context.prev = 6;\n                                          _context.t0 = _context[\"catch\"](0);\n                                          return _context.abrupt(\"return\");\n\n                                        case 9:\n                                          contentType = res.headers.get('Content-type') || 'application/octet-stream';\n                                          _context.next = 12;\n                                          return res.arrayBuffer();\n\n                                        case 12:\n                                          buf = _context.sent;\n                                          blob = new Blob([buf], {\n                                            type: contentType\n                                          });\n                                          fileLikes.push(blob);\n\n                                        case 15:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee, null, [[0, 6]]);\n                                }))());\n                              };\n\n                              _iterator4 = imageTags[Symbol.iterator]();\n\n                            case 9:\n                              if (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {\n                                _context2.next = 16;\n                                break;\n                              }\n\n                              _ret = _loop2();\n\n                              if (!(_ret === \"continue\")) {\n                                _context2.next = 13;\n                                break;\n                              }\n\n                              return _context2.abrupt(\"continue\", 13);\n\n                            case 13:\n                              _iteratorNormalCompletion4 = true;\n                              _context2.next = 9;\n                              break;\n\n                            case 16:\n                              _context2.next = 22;\n                              break;\n\n                            case 18:\n                              _context2.prev = 18;\n                              _context2.t0 = _context2[\"catch\"](6);\n                              _didIteratorError4 = true;\n                              _iteratorError4 = _context2.t0;\n\n                            case 22:\n                              _context2.prev = 22;\n                              _context2.prev = 23;\n\n                              if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n                                _iterator4[\"return\"]();\n                              }\n\n                            case 25:\n                              _context2.prev = 25;\n\n                              if (!_didIteratorError4) {\n                                _context2.next = 28;\n                                break;\n                              }\n\n                              throw _iteratorError4;\n\n                            case 28:\n                              return _context2.finish(25);\n\n                            case 29:\n                              return _context2.finish(22);\n\n                            case 30:\n                              _context2.next = 32;\n                              return Promise.all(imagePromises);\n\n                            case 32:\n                              accept();\n\n                            case 33:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }\n                      }, _callee2, null, [[6, 18, 22, 30], [23,, 25, 29]]);\n                    }));\n\n                    return function (_x2) {\n                      return _ref.apply(this, arguments);\n                    };\n                  }());\n                }));\n              }\n            };\n\n            for (_iterator3 = items[Symbol.iterator](); !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              _loop();\n            }\n\n            _context3.next = 19;\n            break;\n\n          case 15:\n            _context3.prev = 15;\n            _context3.t0 = _context3[\"catch\"](10);\n            _didIteratorError3 = true;\n            _iteratorError3 = _context3.t0;\n\n          case 19:\n            _context3.prev = 19;\n            _context3.prev = 20;\n\n            if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n              _iterator3[\"return\"]();\n            }\n\n          case 22:\n            _context3.prev = 22;\n\n            if (!_didIteratorError3) {\n              _context3.next = 25;\n              break;\n            }\n\n            throw _iteratorError3;\n\n          case 25:\n            return _context3.finish(22);\n\n          case 26:\n            return _context3.finish(19);\n\n          case 27:\n            _context3.next = 29;\n            return Promise.all(blobPromises);\n\n          case 29:\n            return _context3.abrupt(\"return\", fileLikes);\n\n          case 30:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[10, 15, 19, 27], [20,, 22, 26]]);\n  }));\n  return _dataTransferItemsToFiles.apply(this, arguments);\n}\n\nfunction inputValueFromEvent(event) {\n  if (!event) {\n    return;\n  }\n\n  var target;\n\n  if (event.currentTarget) {\n    target = event.currentTarget;\n  } else {\n    target = event.target;\n  } // Trick flow into believing the target maybe has a value field\n\n\n  var inputTarget = target;\n  return inputTarget.value;\n}\n\nfunction sanitizeURL(url) {\n  if (url == null) {\n    return url;\n  }\n\n  var proto = URL(url).protocol; // allow http, https, ftp\n  // IMPORTANT: Don't allow data: protocol because of:\n  // <a href=\"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk7PC9zY3JpcHQ+\" target=\"_blank\">here</a>\n\n  if (proto === 'https:' || proto === 'http:' || proto === 'ftp:') {\n    return url;\n  }\n\n  return undefined;\n}\n\nvar textRenderer = function textRenderer(text, parentClass, onClickMention, onClickHashtag) {\n  if (text === undefined) return;\n  return text.split(' ').map(function (word, i) {\n    if (onClickMention && word.includes('@')) {\n      var mention = twitter.extractMentions(word);\n      if (!mention.length) return word;\n      return createElement(Fragment, {\n        key: \"item-\".concat(i)\n      }, !word.startsWith(\"@\".concat(mention[0])) && word.slice(0, word.indexOf(mention[0]) - 1), createElement(\"a\", {\n        onClick: function onClick() {\n          return onClickMention && onClickMention(mention[0]);\n        },\n        className: \"\".concat(parentClass, \"__mention\")\n      }, \"@\", mention[0]), !word.endsWith(mention[0]) && word.slice(word.indexOf(mention[0]) + mention[0].length));\n    } else if (onClickHashtag && word.includes('#')) {\n      var hashtag = twitter.extractHashtags(word);\n      if (!hashtag.length) return word;\n      return createElement(Fragment, {\n        key: \"item-\".concat(i)\n      }, !word.startsWith(\"#\".concat(hashtag[0])) && word.slice(0, word.indexOf(hashtag[0]) - 1), createElement(\"a\", {\n        onClick: function onClick() {\n          return onClickHashtag && onClickHashtag(hashtag[0]);\n        },\n        className: \"\".concat(parentClass, \"__hashtag\")\n      }, \"#\", hashtag[0]), !word.endsWith(hashtag[0]) && word.slice(word.indexOf(hashtag[0]) + hashtag[0].length));\n    }\n\n    if (anchorme.validate.url(word) || anchorme.validate.email(word)) {\n      var link = anchorme(word, {\n        list: true\n      });\n\n      if (link[0].protocol !== 'http://' && link[0].protocol !== 'https://' && link[0].protocol !== 'mailto:') {\n        return word;\n      }\n\n      var url = link[0].protocol + link[0].encoded;\n\n      var urlText = _truncate(link[0].encoded, {\n        length: 33\n      });\n\n      return createElement(\"a\", {\n        href: url,\n        className: \"\".concat(parentClass, \"__link\"),\n        target: \"blank\",\n        rel: \"noopener\",\n        key: \"item-\".concat(i)\n      }, urlText);\n    }\n\n    return word;\n  }).reduce(function (accu, elem) {\n    return accu === null ? [elem] : [accu, ' ', elem];\n  });\n};\n\nvar FeedManager = /*#__PURE__*/function () {\n  function FeedManager(props) {\n    var _this = this;\n\n    _classCallCheck(this, FeedManager);\n\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"state\", {\n      activityOrder: [],\n      activities: immutable.Map(),\n      activityIdToPath: {},\n      activityIdToPaths: {},\n      reactionIdToPaths: {},\n      reactionActivities: {},\n      lastResponse: null,\n      lastReverseResponse: null,\n      refreshing: false,\n      realtimeAdds: [],\n      realtimeDeletes: [],\n      subscription: null,\n      unread: 0,\n      unseen: 0,\n      numSubscribers: 0,\n      reactionsBeingToggled: {},\n      childReactionsBeingToggled: {}\n    });\n\n    _defineProperty(this, \"registeredCallbacks\", void 0);\n\n    _defineProperty(this, \"setState\", function (changed) {\n      if (typeof changed === 'function') {\n        changed = changed(_this.state);\n      }\n\n      _this.state = _objectSpread({}, _this.state, changed);\n\n      _this.triggerUpdate();\n    });\n\n    _defineProperty(this, \"trackAnalytics\", function (label, activity, track) {\n      var analyticsClient = _this.props.analyticsClient;\n\n      if (!track) {\n        return;\n      }\n\n      if (!analyticsClient) {\n        console.warn('trackAnalytics was enabled, but analytics client was not initialized. ' + 'Please set the analyticsToken prop on StreamApp');\n        return;\n      }\n\n      var feed = _this.props.client.feed(_this.props.feedGroup, _this.props.userId);\n\n      analyticsClient.trackEngagement({\n        label: label,\n        feed_id: feed.id,\n        content: {\n          foreign_id: activity.foreign_id\n        },\n        location: _this.props.analyticsLocation\n      });\n    });\n\n    _defineProperty(this, \"getActivityPath\", function (activity) {\n      var activityId;\n\n      if (typeof activity === 'string') {\n        activityId = activity;\n      } else {\n        activityId = activity.id;\n      }\n\n      var activityPath = _this.state.activityIdToPath[activityId];\n\n      for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        rest[_key - 1] = arguments[_key];\n      }\n\n      if (activityPath === undefined) {\n        return [activityId].concat(rest);\n      }\n\n      return [].concat(_toConsumableArray(activityPath), rest);\n    });\n\n    _defineProperty(this, \"getActivityPaths\", function (activity) {\n      var activityId;\n\n      if (typeof activity === 'string') {\n        activityId = activity;\n      } else {\n        activityId = activity.id;\n      }\n\n      return _this.state.activityIdToPaths[activityId];\n    });\n\n    _defineProperty(this, \"getReactionPaths\", function (reaction) {\n      var reactionId;\n\n      if (typeof reaction === 'string') {\n        reactionId = reaction;\n      } else {\n        reactionId = reaction.id;\n      }\n\n      return _this.state.reactionIdToPaths[reactionId];\n    });\n\n    _defineProperty(this, \"onAddReaction\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(kind, activity, data) {\n        var options,\n            reaction,\n            enrichedReaction,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 3 && _args[3] !== undefined ? _args[3] : {};\n                _context.prev = 1;\n\n                if (!_this.props.doReactionAddRequest) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 5;\n                return _this.props.doReactionAddRequest(kind, activity, data, options);\n\n              case 5:\n                reaction = _context.sent;\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.next = 10;\n                return _this.props.client.reactions.add(kind, activity, data, options);\n\n              case 10:\n                reaction = _context.sent;\n\n              case 11:\n                _context.next = 17;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.props.errorHandler(_context.t0, 'add-reaction', {\n                  kind: kind,\n                  activity: activity,\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context.abrupt(\"return\");\n\n              case 17:\n                _this.trackAnalytics(kind, activity, options.trackAnalytics);\n\n                enrichedReaction = immutable.fromJS(_objectSpread({}, reaction, {\n                  user: _this.props.user.full\n                }));\n\n                _this.setState(function (prevState) {\n                  var activities = prevState.activities;\n                  var reactionIdToPaths = prevState.reactionIdToPaths;\n                  var _iteratorNormalCompletion = true;\n                  var _didIteratorError = false;\n                  var _iteratorError = undefined;\n\n                  try {\n                    for (var _iterator = _this.getActivityPaths(activity)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                      var path = _step.value;\n\n                      _this.removeFoundReactionIdPaths(activities.getIn(path).toJS(), reactionIdToPaths, path);\n\n                      activities = activities.updateIn([].concat(_toConsumableArray(path), ['reaction_counts', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                        return v + 1;\n                      }).updateIn([].concat(_toConsumableArray(path), ['own_reactions', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.unshift(enrichedReaction);\n                      }).updateIn([].concat(_toConsumableArray(path), ['latest_reactions', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.unshift(enrichedReaction);\n                      });\n\n                      _this.addFoundReactionIdPaths(activities.getIn(path).toJS(), reactionIdToPaths, path);\n                    }\n                  } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                        _iterator[\"return\"]();\n                      }\n                    } finally {\n                      if (_didIteratorError) {\n                        throw _iteratorError;\n                      }\n                    }\n                  }\n\n                  return {\n                    activities: activities,\n                    reactionIdToPaths: reactionIdToPaths\n                  };\n                });\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 13]]);\n      }));\n\n      return function (_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onRemoveReaction\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(kind, activity, id) {\n        var options,\n            _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = _args2.length > 3 && _args2[3] !== undefined ? _args2[3] : {};\n                _context2.prev = 1;\n\n                if (!_this.props.doReactionDeleteRequest) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 5;\n                return _this.props.doReactionDeleteRequest(id);\n\n              case 5:\n                _context2.next = 9;\n                break;\n\n              case 7:\n                _context2.next = 9;\n                return _this.props.client.reactions[\"delete\"](id);\n\n              case 9:\n                _context2.next = 15;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](1);\n\n                _this.props.errorHandler(_context2.t0, 'delete-reaction', {\n                  kind: kind,\n                  activity: activity,\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context2.abrupt(\"return\");\n\n              case 15:\n                _this.trackAnalytics('un' + kind, activity, options.trackAnalytics);\n\n                _this.setState(function (prevState) {\n                  var activities = prevState.activities;\n                  var reactionIdToPaths = prevState.reactionIdToPaths;\n                  var _iteratorNormalCompletion2 = true;\n                  var _didIteratorError2 = false;\n                  var _iteratorError2 = undefined;\n\n                  try {\n                    for (var _iterator2 = _this.getActivityPaths(activity)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                      var path = _step2.value;\n\n                      _this.removeFoundReactionIdPaths(activities.getIn(path).toJS(), reactionIdToPaths, path);\n\n                      activities = activities.updateIn([].concat(_toConsumableArray(path), ['reaction_counts', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                        return v - 1;\n                      }).updateIn([].concat(_toConsumableArray(path), ['own_reactions', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.remove(v.findIndex(function (r) {\n                          return r.get('id') === id;\n                        }));\n                      }).updateIn([].concat(_toConsumableArray(path), ['latest_reactions', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.remove(v.findIndex(function (r) {\n                          return r.get('id') === id;\n                        }));\n                      });\n\n                      _this.addFoundReactionIdPaths(activities.getIn(path).toJS(), reactionIdToPaths, path);\n                    }\n                  } catch (err) {\n                    _didIteratorError2 = true;\n                    _iteratorError2 = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                        _iterator2[\"return\"]();\n                      }\n                    } finally {\n                      if (_didIteratorError2) {\n                        throw _iteratorError2;\n                      }\n                    }\n                  }\n\n                  return {\n                    activities: activities,\n                    reactionIdToPaths: reactionIdToPaths\n                  };\n                });\n\n                if (_this.state.reactionActivities[id]) {\n                  _this._removeActivityFromState(_this.state.reactionActivities[id]);\n                }\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 11]]);\n      }));\n\n      return function (_x4, _x5, _x6) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onToggleReaction\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(kind, activity, data) {\n        var options,\n            togglingReactions,\n            currentReactions,\n            last,\n            _args3 = arguments;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 3 && _args3[3] !== undefined ? _args3[3] : {};\n                togglingReactions = _this.state.reactionsBeingToggled[kind] || {};\n\n                if (!togglingReactions[activity.id]) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 4:\n                togglingReactions[activity.id] = true;\n                _this.state.reactionsBeingToggled[kind] = togglingReactions;\n                currentReactions = _this.state.activities.getIn([].concat(_toConsumableArray(_this.getActivityPaths(activity)[0]), ['own_reactions', kind]), immutable.List());\n                last = currentReactions.last();\n\n                if (!last) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                _context3.next = 11;\n                return _this.onRemoveReaction(kind, activity, last.get('id'), options);\n\n              case 11:\n                _context3.next = 15;\n                break;\n\n              case 13:\n                _context3.next = 15;\n                return _this.onAddReaction(kind, activity, data, options);\n\n              case 15:\n                delete togglingReactions[activity.id];\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x7, _x8, _x9) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onAddChildReaction\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(kind, reaction, data) {\n        var options,\n            childReaction,\n            enrichedReaction,\n            _args4 = arguments;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                options = _args4.length > 3 && _args4[3] !== undefined ? _args4[3] : {};\n                _context4.prev = 1;\n\n                if (!_this.props.doChildReactionAddRequest) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                _context4.next = 5;\n                return _this.props.doChildReactionAddRequest(kind, reaction, data, options);\n\n              case 5:\n                childReaction = _context4.sent;\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.next = 10;\n                return _this.props.client.reactions.addChild(kind, reaction, data, options);\n\n              case 10:\n                childReaction = _context4.sent;\n\n              case 11:\n                _context4.next = 17;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](1);\n\n                _this.props.errorHandler(_context4.t0, 'add-child-reaction', {\n                  kind: kind,\n                  reaction: reaction,\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context4.abrupt(\"return\");\n\n              case 17:\n                // this.trackAnalytics(kind, reaction, options.trackAnalytics);\n                enrichedReaction = immutable.fromJS(_objectSpread({}, childReaction, {\n                  user: _this.props.user.full\n                }));\n\n                _this.setState(function (prevState) {\n                  var activities = prevState.activities;\n                  var _iteratorNormalCompletion3 = true;\n                  var _didIteratorError3 = false;\n                  var _iteratorError3 = undefined;\n\n                  try {\n                    for (var _iterator3 = _this.getReactionPaths(reaction)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                      var path = _step3.value;\n                      activities = activities.updateIn([].concat(_toConsumableArray(path), ['children_counts', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                        return v + 1;\n                      }).updateIn([].concat(_toConsumableArray(path), ['own_children', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.unshift(enrichedReaction);\n                      }).updateIn([].concat(_toConsumableArray(path), ['latest_children', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.unshift(enrichedReaction);\n                      });\n                    }\n                  } catch (err) {\n                    _didIteratorError3 = true;\n                    _iteratorError3 = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n                        _iterator3[\"return\"]();\n                      }\n                    } finally {\n                      if (_didIteratorError3) {\n                        throw _iteratorError3;\n                      }\n                    }\n                  }\n\n                  return {\n                    activities: activities\n                  };\n                });\n\n              case 19:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[1, 13]]);\n      }));\n\n      return function (_x10, _x11, _x12) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onRemoveChildReaction\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(kind, reaction, id) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 1;\n\n                if (!_this.props.doChildReactionDeleteRequest) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                _context5.next = 5;\n                return _this.props.doChildReactionDeleteRequest(id);\n\n              case 5:\n                _context5.next = 9;\n                break;\n\n              case 7:\n                _context5.next = 9;\n                return _this.props.client.reactions[\"delete\"](id);\n\n              case 9:\n                _context5.next = 15;\n                break;\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](1);\n\n                _this.props.errorHandler(_context5.t0, 'delete-reaction', {\n                  kind: kind,\n                  reaction: reaction,\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context5.abrupt(\"return\");\n\n              case 15:\n                // this.trackAnalytics('un' + kind, reaction, options.trackAnalytics);\n                if (_this.state.reactionActivities[id]) {\n                  _this._removeActivityFromState(_this.state.reactionActivities[id]);\n                }\n\n                return _context5.abrupt(\"return\", _this.setState(function (prevState) {\n                  var activities = prevState.activities;\n                  var _iteratorNormalCompletion4 = true;\n                  var _didIteratorError4 = false;\n                  var _iteratorError4 = undefined;\n\n                  try {\n                    for (var _iterator4 = _this.getReactionPaths(reaction)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                      var path = _step4.value;\n                      activities = activities.updateIn([].concat(_toConsumableArray(path), ['children_counts', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n                        return v - 1;\n                      }).updateIn([].concat(_toConsumableArray(path), ['own_children', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.remove(v.findIndex(function (r) {\n                          return r.get('id') === id;\n                        }));\n                      }).updateIn([].concat(_toConsumableArray(path), ['children', kind]), function () {\n                        var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                        return v.remove(v.findIndex(function (r) {\n                          return r.get('id') === id;\n                        }));\n                      });\n                    }\n                  } catch (err) {\n                    _didIteratorError4 = true;\n                    _iteratorError4 = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n                        _iterator4[\"return\"]();\n                      }\n                    } finally {\n                      if (_didIteratorError4) {\n                        throw _iteratorError4;\n                      }\n                    }\n                  }\n\n                  return {\n                    activities: activities\n                  };\n                }));\n\n              case 17:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[1, 11]]);\n      }));\n\n      return function (_x13, _x14, _x15) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onToggleChildReaction\", /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(kind, reaction, data) {\n        var options,\n            togglingReactions,\n            currentReactions,\n            last,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : {};\n                togglingReactions = _this.state.childReactionsBeingToggled[kind] || {};\n\n                if (!togglingReactions[reaction.id]) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 4:\n                togglingReactions[reaction.id] = true;\n                _this.state.childReactionsBeingToggled[kind] = togglingReactions;\n                currentReactions = _this.state.activities.getIn([].concat(_toConsumableArray(_this.getReactionPaths(reaction)[0]), ['own_children', kind]), immutable.List());\n                last = currentReactions.last();\n\n                if (!last) {\n                  _context6.next = 13;\n                  break;\n                }\n\n                _context6.next = 11;\n                return _this.onRemoveChildReaction(kind, reaction, last.get('id'), options);\n\n              case 11:\n                _context6.next = 15;\n                break;\n\n              case 13:\n                _context6.next = 15;\n                return _this.onAddChildReaction(kind, reaction, data, options);\n\n              case 15:\n                delete togglingReactions[reaction.id];\n\n              case 16:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function (_x16, _x17, _x18) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"_removeActivityFromState\", function (activityId) {\n      return _this.setState(function (_ref7) {\n        var activities = _ref7.activities,\n            activityOrder = _ref7.activityOrder,\n            activityIdToPath = _ref7.activityIdToPath,\n            activityIdToPaths = _ref7.activityIdToPaths,\n            reactionIdToPaths = _ref7.reactionIdToPaths;\n\n        var path = _this.getActivityPath(activityId);\n\n        var outerId = activityId;\n\n        if (path.length > 1) {\n          // It's an aggregated group we should update the paths of everything in\n          // the list\n          var groupArrayPath = path.slice(0, -1);\n          activityIdToPath = _this.removeFoundActivityIdPath(activities.getIn(groupArrayPath).toJS(), activityIdToPath, groupArrayPath);\n          activityIdToPaths = _this.removeFoundActivityIdPaths(activities.getIn(groupArrayPath).toJS(), activityIdToPaths, groupArrayPath);\n          reactionIdToPaths = _this.removeFoundReactionIdPaths(activities.getIn(groupArrayPath).toJS(), reactionIdToPaths, groupArrayPath);\n        } else {\n          // Otherwise remove all things inside this activity from the path\n          // objects\n          activityIdToPaths = _this.removeFoundActivityIdPaths(activities.get(activityId).toJS(), activityIdToPaths, [activityId]);\n          reactionIdToPaths = _this.removeFoundReactionIdPaths(activities.get(activityId).toJS(), reactionIdToPaths, [activityId]);\n        }\n\n        activities = activities.removeIn(path);\n\n        if (path.length > 1) {\n          var _groupArrayPath = path.slice(0, -1);\n\n          if (activities.getIn(_groupArrayPath).size === 0) {\n            outerId = path[0]; //\n          } else {\n            outerId = null;\n          }\n\n          activityIdToPath = _this.addFoundActivityIdPath(activities.getIn(_groupArrayPath).toJS(), activityIdToPath, _groupArrayPath);\n          activityIdToPaths = _this.addFoundActivityIdPaths(activities.getIn(_groupArrayPath).toJS(), activityIdToPaths, _groupArrayPath);\n          reactionIdToPaths = _this.addFoundReactionIdPaths(activities.getIn(_groupArrayPath).toJS(), reactionIdToPaths, _groupArrayPath);\n        }\n\n        if (outerId != null) {\n          activityOrder = activityOrder.filter(function (id) {\n            return id !== outerId;\n          });\n        }\n\n        return {\n          activities: activities,\n          activityOrder: activityOrder,\n          activityIdToPaths: activityIdToPaths,\n          reactionIdToPaths: reactionIdToPaths,\n          activityIdToPath: activityIdToPath\n        };\n      });\n    });\n\n    _defineProperty(this, \"onRemoveActivity\", /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(activityId) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n\n                if (!_this.props.doActivityDeleteRequest) {\n                  _context7.next = 6;\n                  break;\n                }\n\n                _context7.next = 4;\n                return _this.props.doActivityDeleteRequest(activityId);\n\n              case 4:\n                _context7.next = 8;\n                break;\n\n              case 6:\n                _context7.next = 8;\n                return _this.feed().removeActivity(activityId);\n\n              case 8:\n                _context7.next = 14;\n                break;\n\n              case 10:\n                _context7.prev = 10;\n                _context7.t0 = _context7[\"catch\"](0);\n\n                _this.props.errorHandler(_context7.t0, 'delete-activity', {\n                  activityId: _this.props.feedGroup,\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context7.abrupt(\"return\");\n\n              case 14:\n                return _context7.abrupt(\"return\", _this._removeActivityFromState(activityId));\n\n              case 15:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[0, 10]]);\n      }));\n\n      return function (_x19) {\n        return _ref8.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"onMarkAsRead\", function (group) {\n      return _this._onMarkAs('read', group);\n    });\n\n    _defineProperty(this, \"onMarkAsSeen\", function (group) {\n      return _this._onMarkAs('seen', group);\n    });\n\n    _defineProperty(this, \"_onMarkAs\", /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(type, group) {\n        var groupArray, markArg;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                markArg = group;\n\n                if (group === true) {\n                  groupArray = _this.state.activityOrder;\n                } else if (Array.isArray(group)) {\n                  groupArray = group.map(function (g) {\n                    return g.id;\n                  });\n                  markArg = groupArray;\n                } else {\n                  markArg = group.id;\n                  groupArray = [group.id];\n                }\n\n                _context8.prev = 2;\n                _context8.next = 5;\n                return _this.doFeedRequest(_defineProperty({\n                  limit: 1,\n                  id_lte: _this.state.activityOrder[0]\n                }, 'mark_' + type, markArg));\n\n              case 5:\n                _context8.next = 10;\n                break;\n\n              case 7:\n                _context8.prev = 7;\n                _context8.t0 = _context8[\"catch\"](2);\n\n                _this.props.errorHandler(_context8.t0, 'get-notification-counts', {\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n              case 10:\n                _this.setState(function (prevState) {\n                  var counterKey = 'un' + type;\n                  var activities = prevState.activities;\n                  var counter = prevState[counterKey];\n                  var _iteratorNormalCompletion5 = true;\n                  var _didIteratorError5 = false;\n                  var _iteratorError5 = undefined;\n\n                  try {\n                    for (var _iterator5 = groupArray[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                      var groupId = _step5.value;\n                      var markerPath = [groupId, 'is_' + type];\n\n                      if (activities.getIn(markerPath) !== false) {\n                        continue;\n                      }\n\n                      activities = activities.setIn(markerPath, true);\n                      counter--;\n                    }\n                  } catch (err) {\n                    _didIteratorError5 = true;\n                    _iteratorError5 = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n                        _iterator5[\"return\"]();\n                      }\n                    } finally {\n                      if (_didIteratorError5) {\n                        throw _iteratorError5;\n                      }\n                    }\n                  }\n\n                  return _defineProperty({\n                    activities: activities\n                  }, counterKey, counter);\n                });\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[2, 7]]);\n      }));\n\n      return function (_x20, _x21) {\n        return _ref9.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"getOptions\", function () {\n      var extraOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var propOpts = _objectSpread({}, _this.props.options);\n\n      var id_gt = extraOptions.id_gt,\n          id_gte = extraOptions.id_gte,\n          id_lt = extraOptions.id_lt,\n          id_lte = extraOptions.id_lte,\n          offset = extraOptions.offset;\n\n      if (id_gt || id_gte || id_lt || id_lte || offset != null) {\n        delete propOpts.id_gt;\n        delete propOpts.id_gte;\n        delete propOpts.id_lt;\n        delete propOpts.id_lte;\n        delete propOpts.offset;\n        delete propOpts.refresh;\n      }\n\n      return _objectSpread({\n        withReactionCounts: true,\n        withOwnReactions: true,\n        limit: 10\n      }, propOpts, extraOptions);\n    });\n\n    _defineProperty(this, \"doFeedRequest\", /*#__PURE__*/function () {\n      var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(options) {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!_this.props.doFeedRequest) {\n                  _context9.next = 4;\n                  break;\n                }\n\n                _context9.next = 3;\n                return _this.props.doFeedRequest(_this.props.client, _this.props.feedGroup, _this.props.userId, options);\n\n              case 3:\n                return _context9.abrupt(\"return\", _context9.sent);\n\n              case 4:\n                _context9.next = 6;\n                return _this.feed().get(options);\n\n              case 6:\n                return _context9.abrupt(\"return\", _context9.sent);\n\n              case 7:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function (_x22) {\n        return _ref11.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"feed\", function () {\n      return _this.props.client.feed(_this.props.feedGroup, _this.props.userId);\n    });\n\n    _defineProperty(this, \"responseToActivityMap\", function (response) {\n      return immutable.fromJS(response.results.reduce(function (map, a) {\n        map[a.id] = a;\n        return map;\n      }, {}));\n    });\n\n    _defineProperty(this, \"responseToActivityIdToPath\", function (response) {\n      if (response.results.length === 0 || response.results[0].activities === undefined) {\n        return {};\n      }\n\n      var aggregatedResponse = response;\n      var map = {};\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var group = _step6.value;\n          group.activities.forEach(function (act, i) {\n            map[act.id] = [group.id, 'activities', i];\n          });\n        };\n\n        for (var _iterator6 = aggregatedResponse.results[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          _loop();\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n            _iterator6[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      return map;\n    });\n\n    _defineProperty(this, \"responseToActivityIdToPaths\", function (response) {\n      var previous = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var map = previous;\n      var currentPath = [];\n\n      function addFoundActivities(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundActivities(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.actor && obj.verb && obj.object) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            map[obj.id].push([].concat(currentPath));\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundActivities(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = response.results[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var a = _step7.value;\n          currentPath.push(a.id);\n          addFoundActivities(a);\n          currentPath.pop();\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7[\"return\"] != null) {\n            _iterator7[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      return map;\n    });\n\n    _defineProperty(this, \"feedResponseToReactionIdToPaths\", function (response) {\n      var previous = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var map = previous;\n      var currentPath = [];\n\n      function addFoundReactions(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundReactions(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.kind && obj.data) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            map[obj.id].push([].concat(currentPath));\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundReactions(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = response.results[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var a = _step8.value;\n          currentPath.push(a.id);\n          addFoundReactions(a);\n          currentPath.pop();\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8[\"return\"] != null) {\n            _iterator8[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n\n      return map;\n    });\n\n    _defineProperty(this, \"reactionResponseToReactionIdToPaths\", function (response, previous, basePath, oldLength) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      function addFoundReactions(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundReactions(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.kind && obj.data) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            map[obj.id].push(_toConsumableArray(currentPath));\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundReactions(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion9 = true;\n      var _didIteratorError9 = false;\n      var _iteratorError9 = undefined;\n\n      try {\n        for (var _iterator9 = response.results[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n          var a = _step9.value;\n          currentPath.push(oldLength);\n          addFoundReactions(a);\n          currentPath.pop();\n          oldLength++;\n        }\n      } catch (err) {\n        _didIteratorError9 = true;\n        _iteratorError9 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion9 && _iterator9[\"return\"] != null) {\n            _iterator9[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError9) {\n            throw _iteratorError9;\n          }\n        }\n      }\n\n      return map;\n    });\n\n    _defineProperty(this, \"removeFoundReactionIdPaths\", function (data, previous, basePath) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      function removeFoundReactions(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            removeFoundReactions(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.kind && obj.data) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            _remove(map[obj.id], function (path) {\n              return _isEqual(path, currentPath);\n            });\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            removeFoundReactions(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      removeFoundReactions(data);\n      return map;\n    });\n\n    _defineProperty(this, \"removeFoundActivityIdPaths\", function (data, previous, basePath) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      function addFoundActivities(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundActivities(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.actor && obj.verb && obj.object) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            _remove(map[obj.id], function (path) {\n              return _isEqual(path, currentPath);\n            });\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundActivities(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      addFoundActivities(data);\n      return map;\n    });\n\n    _defineProperty(this, \"removeFoundActivityIdPath\", function (data, previous, basePath) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      data.forEach(function (obj, i) {\n        currentPath.push(i);\n\n        if (_isEqual(map[obj.id], currentPath)) {\n          delete map[obj.id];\n        }\n\n        currentPath.pop();\n      });\n      return map;\n    });\n\n    _defineProperty(this, \"addFoundReactionIdPaths\", function (data, previous, basePath) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      function addFoundReactions(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundReactions(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.kind && obj.data) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            map[obj.id].push(_toConsumableArray(currentPath));\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundReactions(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      addFoundReactions(data);\n      return map;\n    });\n\n    _defineProperty(this, \"addFoundActivityIdPaths\", function (data, previous, basePath) {\n      var map = previous;\n\n      var currentPath = _toConsumableArray(basePath);\n\n      function addFoundActivities(obj) {\n        if (Array.isArray(obj)) {\n          obj.forEach(function (v, i) {\n            currentPath.push(i);\n            addFoundActivities(v);\n            currentPath.pop();\n          });\n        } else if (_isPlainObject(obj)) {\n          if (obj.id && obj.actor && obj.verb && obj.object) {\n            if (!map[obj.id]) {\n              map[obj.id] = [];\n            }\n\n            map[obj.id].push(_toConsumableArray(currentPath));\n          }\n\n          for (var k in obj) {\n            currentPath.push(k);\n            addFoundActivities(obj[k]);\n            currentPath.pop();\n          }\n        }\n      }\n\n      addFoundActivities(data);\n      return map;\n    });\n\n    _defineProperty(this, \"addFoundActivityIdPath\", function (data, previous, basePath) {\n      var map = previous;\n      data.forEach(function (obj, i) {\n        map[obj.id] = [].concat(_toConsumableArray(basePath), [i]);\n      });\n      return map;\n    });\n\n    _defineProperty(this, \"responseToReactionActivities\", function (response) {\n      if (response.results.length === 0) {\n        return {};\n      }\n\n      var map = {};\n\n      function setReactionActivities(activities) {\n        var _iteratorNormalCompletion10 = true;\n        var _didIteratorError10 = false;\n        var _iteratorError10 = undefined;\n\n        try {\n          for (var _iterator10 = activities[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n            var a = _step10.value;\n\n            if (a.reaction && a.reaction.id) {\n              map[a.reaction.id] = a.id;\n            }\n          }\n        } catch (err) {\n          _didIteratorError10 = true;\n          _iteratorError10 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion10 && _iterator10[\"return\"] != null) {\n              _iterator10[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError10) {\n              throw _iteratorError10;\n            }\n          }\n        }\n      }\n\n      if (response.results[0].activities === undefined) {\n        setReactionActivities(response.results);\n      } else {\n        var aggregatedResponse = response;\n        var _iteratorNormalCompletion11 = true;\n        var _didIteratorError11 = false;\n        var _iteratorError11 = undefined;\n\n        try {\n          for (var _iterator11 = aggregatedResponse.results[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n            var group = _step11.value;\n            setReactionActivities(group.activities);\n          }\n        } catch (err) {\n          _didIteratorError11 = true;\n          _iteratorError11 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion11 && _iterator11[\"return\"] != null) {\n              _iterator11[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError11) {\n              throw _iteratorError11;\n            }\n          }\n        }\n      }\n\n      return map;\n    });\n\n    _defineProperty(this, \"refresh\", /*#__PURE__*/function () {\n      var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(extraOptions) {\n        var options, response, newState;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                options = _this.getOptions(extraOptions);\n                _context10.next = 3;\n                return _this.setState({\n                  refreshing: true\n                });\n\n              case 3:\n                _context10.prev = 3;\n                _context10.next = 6;\n                return _this.doFeedRequest(options);\n\n              case 6:\n                response = _context10.sent;\n                _context10.next = 14;\n                break;\n\n              case 9:\n                _context10.prev = 9;\n                _context10.t0 = _context10[\"catch\"](3);\n\n                _this.setState({\n                  refreshing: false\n                });\n\n                _this.props.errorHandler(_context10.t0, 'get-feed', {\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context10.abrupt(\"return\");\n\n              case 14:\n                newState = _objectSpread({\n                  activityOrder: response.results.map(function (a) {\n                    return a.id;\n                  }),\n                  activities: _this.responseToActivityMap(response),\n                  activityIdToPath: _this.responseToActivityIdToPath(response),\n                  activityIdToPaths: _this.responseToActivityIdToPaths(response),\n                  reactionIdToPaths: _this.feedResponseToReactionIdToPaths(response),\n                  reactionActivities: _this.responseToReactionActivities(response),\n                  refreshing: false,\n                  lastResponse: response,\n                  realtimeAdds: [],\n                  realtimeDeletes: []\n                }, _this.unseenUnreadFromResponse(response));\n\n                if (options.mark_seen === true) {\n                  newState.unseen = 0;\n                }\n\n                if (options.mark_read === true) {\n                  newState.unread = 0;\n                }\n\n                return _context10.abrupt(\"return\", _this.setState(newState));\n\n              case 18:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[3, 9]]);\n      }));\n\n      return function (_x23) {\n        return _ref12.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"subscribe\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n      var feed;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              if (!_this.props.notify) {\n                _context11.next = 4;\n                break;\n              }\n\n              feed = _this.feed();\n              _context11.next = 4;\n              return _this.setState(function (prevState) {\n                if (prevState.subscription) {\n                  return {};\n                }\n\n                var subscription = feed.subscribe(function (data) {\n                  _this.setState(function (prevState) {\n                    var numActivityDiff = data[\"new\"].length - data.deleted.length;\n                    return {\n                      realtimeAdds: prevState.realtimeAdds.concat(data[\"new\"]),\n                      realtimeDeletes: prevState.realtimeDeletes.concat(data.deleted),\n                      unread: prevState.unread + numActivityDiff,\n                      unseen: prevState.unseen + numActivityDiff\n                    };\n                  });\n                });\n                subscription.then(function () {\n                  console.log(\"now listening to changes in realtime for \".concat(_this.feed().id));\n                }, function (err) {\n                  console.error(err);\n                });\n                return {\n                  subscription: subscription\n                };\n              });\n\n            case 4:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    })));\n\n    _defineProperty(this, \"unsubscribe\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n      var subscription;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              subscription = _this.state.subscription;\n\n              if (subscription) {\n                _context12.next = 3;\n                break;\n              }\n\n              return _context12.abrupt(\"return\");\n\n            case 3:\n              _context12.next = 5;\n              return subscription;\n\n            case 5:\n              if (!(_this.registeredCallbacks.length === 0)) {\n                _context12.next = 15;\n                break;\n              }\n\n              _context12.prev = 6;\n              _context12.next = 9;\n              return subscription.cancel();\n\n            case 9:\n              console.log(\"stopped listening to changes in realtime for \".concat(_this.feed().id));\n              _context12.next = 15;\n              break;\n\n            case 12:\n              _context12.prev = 12;\n              _context12.t0 = _context12[\"catch\"](6);\n              console.error(_context12.t0);\n\n            case 15:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12, null, [[6, 12]]);\n    })));\n\n    _defineProperty(this, \"hasNextPage\", function () {\n      var lastResponse = _this.state.lastResponse;\n      return Boolean(lastResponse && lastResponse.next);\n    });\n\n    _defineProperty(this, \"hasReverseNextPage\", function () {\n      var lastReverseResponse = _this.state.lastReverseResponse;\n      return Boolean(lastReverseResponse && lastReverseResponse.next);\n    });\n\n    _defineProperty(this, \"loadNextPage\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13() {\n      var lastResponse, cancel, nextURL, options, response;\n      return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              lastResponse = _this.state.lastResponse;\n\n              if (!(!lastResponse || !lastResponse.next)) {\n                _context13.next = 3;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 3:\n              cancel = false;\n              _context13.next = 6;\n              return _this.setState(function (prevState) {\n                if (prevState.refreshing) {\n                  cancel = true;\n                  return {};\n                }\n\n                return {\n                  refreshing: true\n                };\n              });\n\n            case 6:\n              if (!cancel) {\n                _context13.next = 8;\n                break;\n              }\n\n              return _context13.abrupt(\"return\");\n\n            case 8:\n              nextURL = new URL(lastResponse.next, true);\n              options = _this.getOptions(nextURL.query);\n              _context13.prev = 10;\n              _context13.next = 13;\n              return _this.doFeedRequest(options);\n\n            case 13:\n              response = _context13.sent;\n              _context13.next = 21;\n              break;\n\n            case 16:\n              _context13.prev = 16;\n              _context13.t0 = _context13[\"catch\"](10);\n\n              _this.setState({\n                refreshing: false\n              });\n\n              _this.props.errorHandler(_context13.t0, 'get-feed-next-page', {\n                feedGroup: _this.props.feedGroup,\n                userId: _this.props.userId\n              });\n\n              return _context13.abrupt(\"return\");\n\n            case 21:\n              return _context13.abrupt(\"return\", _this.setState(function (prevState) {\n                var activities = prevState.activities.merge(_this.responseToActivityMap(response));\n\n                var activityIdToPath = _objectSpread({}, prevState.activityIdToPath, _this.responseToActivityIdToPath(response));\n\n                return {\n                  activityOrder: prevState.activityOrder.concat(response.results.map(function (a) {\n                    return a.id;\n                  })),\n                  activities: activities,\n                  activityIdToPath: activityIdToPath,\n                  activityIdToPaths: _this.responseToActivityIdToPaths(response, prevState.activityIdToPaths),\n                  reactionIdToPaths: _this.feedResponseToReactionIdToPaths(response, prevState.reactionIdToPaths),\n                  reactionActivities: _objectSpread({}, prevState.reactionActivities, _this.responseToReactionActivities(response)),\n                  refreshing: false,\n                  lastResponse: response\n                };\n              }));\n\n            case 22:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13, null, [[10, 16]]);\n    })));\n\n    _defineProperty(this, \"loadReverseNextPage\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14() {\n      var lastReverseResponse, cancel, nextURL, options, response;\n      return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              lastReverseResponse = _this.state.lastReverseResponse;\n\n              if (!(!lastReverseResponse || !lastReverseResponse.next)) {\n                _context14.next = 3;\n                break;\n              }\n\n              return _context14.abrupt(\"return\");\n\n            case 3:\n              cancel = false;\n              _context14.next = 6;\n              return _this.setState(function (prevState) {\n                if (prevState.refreshing) {\n                  cancel = true;\n                  return {};\n                }\n\n                return {\n                  refreshing: true\n                };\n              });\n\n            case 6:\n              if (!cancel) {\n                _context14.next = 8;\n                break;\n              }\n\n              return _context14.abrupt(\"return\");\n\n            case 8:\n              nextURL = new URL(lastReverseResponse.next, true);\n              options = _this.getOptions(nextURL.query);\n              _context14.prev = 10;\n              _context14.next = 13;\n              return _this.doFeedRequest(options);\n\n            case 13:\n              response = _context14.sent;\n              _context14.next = 21;\n              break;\n\n            case 16:\n              _context14.prev = 16;\n              _context14.t0 = _context14[\"catch\"](10);\n\n              _this.setState({\n                refreshing: false\n              });\n\n              _this.props.errorHandler(_context14.t0, 'get-feed-next-page', {\n                feedGroup: _this.props.feedGroup,\n                userId: _this.props.userId\n              });\n\n              return _context14.abrupt(\"return\");\n\n            case 21:\n              return _context14.abrupt(\"return\", _this.setState(function (prevState) {\n                var activities = prevState.activities.merge(_this.responseToActivityMap(response));\n\n                var activityIdToPath = _objectSpread({}, prevState.activityIdToPath, _this.responseToActivityIdToPath(response));\n\n                return {\n                  activityOrder: response.results.map(function (a) {\n                    return a.id;\n                  }).concat(prevState.activityOrder),\n                  activities: activities,\n                  activityIdToPath: activityIdToPath,\n                  activityIdToPaths: _this.responseToActivityIdToPaths(response, prevState.activityIdToPaths),\n                  reactionIdToPaths: _this.feedResponseToReactionIdToPaths(response, prevState.reactionIdToPaths),\n                  reactionActivities: _objectSpread({}, prevState.reactionActivities, _this.responseToReactionActivities(response)),\n                  refreshing: false,\n                  lastReverseResponse: response\n                };\n              }));\n\n            case 22:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14, null, [[10, 16]]);\n    })));\n\n    _defineProperty(this, \"loadNextReactions\", /*#__PURE__*/function () {\n      var _ref17 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(activityId, kind, activityPath, oldestToNewest) {\n        var options, orderPrefix, latestReactionsPath, nextUrlPath, refreshingPath, reactions_extra, nextUrl, refreshing, response;\n        return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                options = {\n                  activity_id: activityId,\n                  kind: kind\n                };\n                orderPrefix = 'latest';\n\n                if (oldestToNewest) {\n                  orderPrefix = 'oldest';\n                }\n\n                if (!activityPath) {\n                  activityPath = _this.getActivityPath(activityId);\n                }\n\n                latestReactionsPath = [].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions', kind]);\n                nextUrlPath = [].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra', kind, 'next']);\n                refreshingPath = [].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra', kind, 'refreshing']);\n                reactions_extra = _this.state.activities.getIn([].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra']));\n                nextUrl = 'https://api.stream-io-api.com/';\n\n                if (reactions_extra) {\n                  nextUrl = reactions_extra.getIn([kind, 'next'], '');\n                } else if (oldestToNewest) {\n                  // If it's the first request and oldest to newest make sure\n                  // order is reversed by this trick with a non existant id.\n                  options.id_gt = 'non-existant-' + generateRandomId();\n                }\n\n                refreshing = _this.state.activities.getIn(refreshingPath, false);\n\n                if (!(!nextUrl || refreshing)) {\n                  _context15.next = 13;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\");\n\n              case 13:\n                _this.setState(function (prevState) {\n                  return {\n                    activities: prevState.activities.setIn(refreshingPath, true)\n                  };\n                });\n\n                options = _objectSpread({}, URL(nextUrl, true).query, options);\n                _context15.prev = 15;\n\n                if (!_this.props.doReactionsFilterRequest) {\n                  _context15.next = 22;\n                  break;\n                }\n\n                _context15.next = 19;\n                return _this.props.doReactionsFilterRequest(options);\n\n              case 19:\n                response = _context15.sent;\n                _context15.next = 25;\n                break;\n\n              case 22:\n                _context15.next = 24;\n                return _this.props.client.reactions.filter(options);\n\n              case 24:\n                response = _context15.sent;\n\n              case 25:\n                _context15.next = 32;\n                break;\n\n              case 27:\n                _context15.prev = 27;\n                _context15.t0 = _context15[\"catch\"](15);\n\n                _this.setState({\n                  refreshing: false\n                });\n\n                _this.props.errorHandler(_context15.t0, 'get-reactions-next-page', {\n                  options: options\n                });\n\n                return _context15.abrupt(\"return\");\n\n              case 32:\n                _this.setState(function (prevState) {\n                  return {\n                    activities: prevState.activities.setIn(refreshingPath, false).setIn(nextUrlPath, response.next).updateIn(latestReactionsPath, function () {\n                      var v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : immutable.List();\n                      return v.concat(immutable.fromJS(response.results));\n                    }),\n                    reactionIdToPaths: _this.reactionResponseToReactionIdToPaths(response, prevState.reactionIdToPaths, latestReactionsPath, prevState.activities.getIn(latestReactionsPath, immutable.List()).toJS().length)\n                  };\n                });\n\n              case 33:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, null, [[15, 27]]);\n      }));\n\n      return function (_x24, _x25, _x26, _x27) {\n        return _ref17.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(this, \"refreshUnreadUnseen\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.prev = 0;\n              _context16.next = 3;\n              return _this.doFeedRequest({\n                limit: 0\n              });\n\n            case 3:\n              response = _context16.sent;\n              _context16.next = 10;\n              break;\n\n            case 6:\n              _context16.prev = 6;\n              _context16.t0 = _context16[\"catch\"](0);\n\n              _this.props.errorHandler(_context16.t0, 'get-notification-counts', {\n                feedGroup: _this.props.feedGroup,\n                userId: _this.props.userId\n              });\n\n              return _context16.abrupt(\"return\");\n\n            case 10:\n              return _context16.abrupt(\"return\", _this.setState(_this.unseenUnreadFromResponse(response)));\n\n            case 11:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16, null, [[0, 6]]);\n    })));\n\n    this.props = props;\n    var initialOptions = this.getOptions();\n    this.registeredCallbacks = [];\n    var previousUrl = '';\n\n    if (initialOptions.id_gte) {\n      previousUrl = \"?id_lt=\".concat(initialOptions.id_gte);\n    } else if (initialOptions.id_gt) {\n      previousUrl = \"?id_lte=\".concat(initialOptions.id_gt);\n    } else if (initialOptions.id_lte) {\n      previousUrl = \"?id_gt=\".concat(initialOptions.id_lte);\n    } else if (initialOptions.id_lt) {\n      previousUrl = \"?id_gte=\".concat(initialOptions.id_lt);\n    }\n\n    this.state.lastReverseResponse = {\n      next: previousUrl\n    };\n  }\n\n  _createClass(FeedManager, [{\n    key: \"register\",\n    value: function register(callback) {\n      this.registeredCallbacks.push(callback);\n      this.subscribe();\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister(callback) {\n      this.registeredCallbacks.splice(this.registeredCallbacks.indexOf(callback), 1);\n      this.unsubscribe();\n    }\n  }, {\n    key: \"triggerUpdate\",\n    value: function triggerUpdate() {\n      var _iteratorNormalCompletion12 = true;\n      var _didIteratorError12 = false;\n      var _iteratorError12 = undefined;\n\n      try {\n        for (var _iterator12 = this.registeredCallbacks[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n          var callback = _step12.value;\n          callback();\n        }\n      } catch (err) {\n        _didIteratorError12 = true;\n        _iteratorError12 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion12 && _iterator12[\"return\"] != null) {\n            _iterator12[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError12) {\n            throw _iteratorError12;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"unseenUnreadFromResponse\",\n    value: function unseenUnreadFromResponse(response) {\n      var unseen = 0;\n      var unread = 0;\n\n      if (typeof response.unseen === 'number') {\n        unseen = response.unseen;\n      }\n\n      if (typeof response.unread === 'number') {\n        unread = response.unread;\n      }\n\n      return {\n        unseen: unseen,\n        unread: unread\n      };\n    }\n  }]);\n\n  return FeedManager;\n}();\n\nvar handleError = function handleError(error, type, detail) {\n  console.warn(error, type, detail);\n};\n\nvar Details = \"Details\";\nvar Post = \"Post\";\nvar enTranslations = {\n  \"1 comment\": \"1 comment\",\n  \"1 like\": \"1 like\",\n  \"1 repost\": \"1 repost\",\n  Details: Details,\n  \"Load activities\": \"Load activities\",\n  \"Load more\": \"Load more\",\n  \"New Post\": \"New Post\",\n  \"No data to display...\": \"No data to display...\",\n  \"Pick your emoji\": \"Pick your emoji\",\n  Post: Post,\n  \"Start Typing...\": \"Start Typing...\",\n  \"Type your post...\": \"Type your post...\",\n  \"You have 1 new notification\": \"You have 1 new notification\",\n  \"You have {{ notificationCount }} new notifications\": \"You have {{ notificationCount }} new notifications\",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }} and 1 other followed you\",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }} and 1 other liked your {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }} and {{ countOtherActors }} others followed you\",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }} commented on your {{ activityVerb }}\",\n  \"{{ actorName }} followed you\": \"{{ actorName }} followed you\",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }} liked your {{ activityVerb }}\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }} reposted your {{ activityVerb }}\",\n  \"{{ countComments }} comments\": \"{{ countComments }} comments\",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} likes\",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} reposts\"\n};\nvar Details$1 = \"Details\";\nvar Post$1 = \"Verstuur\";\nvar nlTranslations = {\n  \"1 comment\": \"1 reactie\",\n  \"1 like\": \"1 vind-ik-leuk\",\n  \"1 repost\": \"1 keer gedeeld\",\n  Details: Details$1,\n  \"Load activities\": \"Laad activiteiten\",\n  \"Load more\": \"Meer laden\",\n  \"New Post\": \"New Bericht\",\n  \"No data to display...\": \"Geen data om weer te geven...\",\n  \"Pick your emoji\": \"Kies je emoji\",\n  Post: Post$1,\n  \"Start Typing...\": \"Begin met typen...\",\n  \"Type your post...\": \"Type je bericht...\",\n  \"You have 1 new notification\": \"Je hebt 1 nieuw melding\",\n  \"You have {{ notificationCount }} new notifications\": \"Je hebt {{ notificationCount }} nieuwe meldingen\",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }} en 1 ander reageerden op je {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }} en 1 ander volgen je\",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }} en 1 ander vinden je {{ activityVerb }} leuk\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }} en 1 ander hebben je {{ activityVerb }} gedeeld\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }} en {{ countOtherActors }} anderen hebben op je {{ activityVerb }} gereageerd\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }} en {{ countOtherActors }} anderen volgen je\",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }} en {{ countOtherActors }} anderen vinden je {{ activityVerb }} leuk\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }} en {{ countOtherActors }} anderen hebben je {{ activityVerb }} bericht gedeeld\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }} heeft op je {{ activityVerb }} gereageerd\",\n  \"{{ actorName }} followed you\": \"{{ actorName }} volgt je\",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }} vindt je {{ activityVerb }} leuk\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }} heeft je {{ activityVerb }} gedeeld\",\n  \"{{ countComments }} comments\": \"{{ countComments }} reacties\",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} vind-ik-leuks\",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} keer gedeeld\"\n};\nvar Details$2 = \"\";\nvar Post$2 = \"\";\nvar ruTranslations = {\n  \"1 comment\": \"1 \",\n  \"1 like\": \"1 \",\n  \"1 repost\": \"1 \",\n  Details: Details$2,\n  \"Load activities\": \" \",\n  \"Load more\": \" \",\n  \"New Post\": \" \",\n  \"No data to display...\": \"   ...\",\n  \"Pick your emoji\": \" emoji\",\n  Post: Post$2,\n  \"Start Typing...\": \" ...\",\n  \"Type your post...\": \"  ...\",\n  \"You have 1 new notification\": \"   \",\n  \"You have {{ notificationCount }} new notifications\": \"  {{ notificationCount }}  \",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }}   1      {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }}   1   \",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }}   1    {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }}   1    {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}       {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }}  {{ countOtherActors }}    \",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}     {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}     {{ activityVerb }}\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }}     {{ activityVerb }}\",\n  \"{{ actorName }} followed you\": \"{{ actorName }}  \",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }}   {{ activityVerb }}\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }}   {{ activityVerb }}\",\n  \"{{ countComments }} comments\": \"{{ countComments }} \",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} \",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} \"\n};\nvar Details$3 = \"Detaylar\";\nvar Post$3 = \"Yolla\";\nvar trTranslations = {\n  \"1 comment\": \"1 yorum\",\n  \"1 like\": \"1 beeni\",\n  \"1 repost\": \"1 paylam\",\n  Details: Details$3,\n  \"Load activities\": \"Aktiviteleri ykle\",\n  \"Load more\": \"Daha fazla ykle\",\n  \"New Post\": \"Yeni leti\",\n  \"No data to display...\": \"Gsterilecek veri yok...\",\n  \"Pick your emoji\": \"Emoji se\",\n  Post: Post$3,\n  \"Start Typing...\": \"Yazmaya Bala...\",\n  \"Type your post...\": \"letini yaz...\",\n  \"You have 1 new notification\": \"1 yeni bildirimin var\",\n  \"You have {{ notificationCount }} new notifications\": \"{{ notificationCount }} yeni bildirimin var\",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }} ve biri daha {{ activityVerb }} zerine yorum yapt\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }} ve biri daha seni takip etti\",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }} ve biri daha senin {{ activityVerb }}'ini beendi\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }} ve biri daha senin {{ activityVerb }}'ini beendi\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }} ve {{ countOtherActors }} kii daha {{ activityVerb }} zerine yorum yapt\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }} ve {{ countOtherActors }} kii daha seni takip etti\",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }} ve {{ countOtherActors }} kii daha senin {{ activityVerb }}'ini beendi\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }} ve {{ countOtherActors }} kii daha senin {{ activityVerb }}'ini paylat\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }} {{ activityVerb }}'ine yorum yapt\",\n  \"{{ actorName }} followed you\": \"{{ actorName }} seni takip etti\",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }} senin {{ activityVerb }}'ini beendi\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }} senin {{ activityVerb }}'ini paylat\",\n  \"{{ countComments }} comments\": \"{{ countComments }} yorum\",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} beeni\",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} paylam\"\n};\nvar Details$4 = \"Voir les commentaires\";\nvar Post$4 = \"Publier\";\nvar frTranslations = {\n  \"1 comment\": \"1 commentaire\",\n  \"1 like\": \"1 J'aime\",\n  \"1 repost\": \"1 partage\",\n  Details: Details$4,\n  \"Load activities\": \"Voir les nouvelles publications\",\n  \"Load more\": \"voir plus\",\n  \"New Post\": \"Nouvelle publication\",\n  \"No data to display...\": \"Aucune donne  afficher\",\n  \"Pick your emoji\": \"Choisissez votre emoji\",\n  Post: Post$4,\n  \"Start Typing...\": \"Dmarrez la saisie...\",\n  \"Type your post...\": \"Tapez votre message\",\n  \"You have 1 new notification\": \"Vous avez reu 1 nouvelle notification\",\n  \"You have {{ notificationCount }} new notifications\": \"Vous avez reu {{ notificationCount }} nouvelles notifications\",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }} et 1 autre ont comment votre {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }} et 1 autre vous suivent dsormais\",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }} et 1 autre ont aim votre {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }} et 1 autre ont partag votre {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }} et {{ countOtherActors }} autres ont comment votre {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }} et {{ countOtherActors }} autres vous suivent dsormais\",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }} et {{ countOtherActors }} autres ont aim votre {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }} et {{ countOtherActors }} autres ont partag votre {{ activityVerb }}\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }} a comment votre {{ activityVerb }}\",\n  \"{{ actorName }} followed you\": \"{{ actorName }} vous suit dsormais\",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }} a aim votre {{ activityVerb }}\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }} a partag votre {{ activityVerb }}\",\n  \"{{ countComments }} comments\": \"{{ countComments }} commentaires\",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} J'aime\",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} partages\"\n};\nvar Details$5 = \"\";\nvar Post$5 = \" \";\nvar hiTranslations = {\n  \"1 comment\": \"1 \",\n  \"1 like\": \"1 \",\n  \"1 repost\": \"1 \",\n  Details: Details$5,\n  \"Load activities\": \"   \",\n  \"Load more\": \"   \",\n  \"New Post\": \" \",\n  \"No data to display...\": \"    \",\n  \"Pick your emoji\": \"  \",\n  Post: Post$5,\n  \"Start Typing...\": \"    ...\",\n  \"Type your post...\": \"   ...\",\n  \"You have 1 new notification\": \"  1   \",\n  \"You have {{ notificationCount }} new notifications\": \"  {{ notificationCount }}   \",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }}       {{ activityVerb }}     \",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }}        \",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"{{ actorName }}       {{ activityVerb }}   \",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }}       {{ activityVerb }}   \",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}     {{ activityVerb }}    \",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }}  {{ countOtherActors }}      \",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}     {{ activityVerb }}   \",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }}  {{ countOtherActors }}     {{ activityVerb }}    \",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }}   {{ activityVerb }}    \",\n  \"{{ actorName }} followed you\": \"{{ actorName }}    \",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"{{ actorName }}   {{ activityVerb }}   \",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }}   {{ activityVerb }}   \",\n  \"{{ countComments }} comments\": \"{{ countComments }} \",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} \",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} \"\n};\nvar Details$6 = \"Dettagli\";\nvar Post$6 = \"Invia\";\nvar itTranslations = {\n  \"1 comment\": \"1 commento\",\n  \"1 like\": \"1 mi piace\",\n  \"1 repost\": \"1 condivisione\",\n  Details: Details$6,\n  \"Load activities\": \"Carica attivit\",\n  \"Load more\": \"Carica altro\",\n  \"New Post\": \"Nuovo post\",\n  \"No data to display...\": \"Nessun dato da mostrare...\",\n  \"Pick your emoji\": \"Scegli la tua emoji\",\n  Post: Post$6,\n  \"Start Typing...\": \"Inizia a scrivere...\",\n  \"Type your post...\": \"Scrivi il tuo post...\",\n  \"You have 1 new notification\": \"Hai una nuova notifica\",\n  \"You have {{ notificationCount }} new notifications\": \"Hai {{ notificationCount }} nuove notifiche\",\n  \"{{ actorName }} and 1 other commented on your {{ activityVerb }}\": \"{{ actorName }} e 1 altro hanno commentato il tuo {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other followed you\": \"{{ actorName }} e 1 altro hanno iniziato a seguirti\",\n  \"{{ actorName }} and 1 other liked your {{ activityVerb }}\": \"A {{ actorName }} e 1 altro piace il tuo {{ activityVerb }}\",\n  \"{{ actorName }} and 1 other reposted your {{ activityVerb }}\": \"{{ actorName }} e 1 altro hanno condiviso il tuo {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}\": \"{{ actorName }} e altri {{ countOtherActors }} hanno commentato il tuo {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others followed you\": \"{{ actorName }} e altri {{ countOtherActors }} hanno iniziato a seguirti\",\n  \"{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}\": \"A {{ actorName }} e altri {{ countOtherActors }} piace il tuo {{ activityVerb }}\",\n  \"{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}\": \"{{ actorName }} e altri {{ countOtherActors }} hanno condiviso il tuo {{ activityVerb }}\",\n  \"{{ actorName }} commented on your {{ activityVerb }}\": \"{{ actorName }} ha commentato il tuo {{ activityVerb }}\",\n  \"{{ actorName }} followed you\": \"{{ actorName }} ha iniziato a seguirti\",\n  \"{{ actorName }} liked your {{ activityVerb }}\": \"A {{ actorName }} piace il tuo {{ activityVerb }}\",\n  \"{{ actorName }} reposted your {{ activityVerb }}\": \"{{ actorName }} ha condiviso il tuo {{ activityVerb }}\",\n  \"{{ countComments }} comments\": \"{{ countComments }} commenti\",\n  \"{{ countLikes }} likes\": \"{{ countLikes }} mi piace\",\n  \"{{ countReposts }} reposts\": \"{{ countReposts }} condivisioni\"\n};\nvar defaultNS = 'translation';\nvar defaultLng = 'en';\nDayjs.extend(updateLocale);\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[] LT',\n    nextDay: '[] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[] LT',\n    lastWeek: '[] dddd, LT',\n    sameElse: 'L'\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /|||/,\n  meridiemHour: function meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n\n    if (meridiem === '') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour;\n    } else if (meridiem === '') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour + 12;\n    }\n  },\n  meridiem: function meridiem(hour) {\n    if (hour < 4) {\n      return '';\n    } else if (hour < 10) {\n      return '';\n    } else if (hour < 17) {\n      return '';\n    } else if (hour < 20) {\n      return '';\n    } else {\n      return '';\n    }\n  }\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourdhui ] LT',\n    nextDay: '[Demain ] LT',\n    nextWeek: 'dddd [] LT',\n    lastDay: '[Hier ] LT',\n    lastWeek: 'dddd [dernier ] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugn saat] LT',\n    nextDay: '[yarn saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dn] LT',\n    lastWeek: '[geen] dddd [saat] LT',\n    sameElse: 'L'\n  }\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[, ] LT',\n    nextDay: '[, ] LT',\n    lastDay: '[, ] LT'\n  }\n});\nvar en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_')\n};\nvar defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: function logger(msg) {\n    return console.warn(msg);\n  },\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs\n};\n\nvar Streami18n = /*#__PURE__*/function () {\n  /**\n   * dayjs.updateLocale('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  function Streami18n() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Streami18n);\n\n    _defineProperty(this, \"i18nInstance\", i18n.createInstance());\n\n    _defineProperty(this, \"Dayjs\", null);\n\n    _defineProperty(this, \"setLanguageCallback\", function () {\n      return null;\n    });\n\n    _defineProperty(this, \"initialized\", false);\n\n    _defineProperty(this, \"t\", null);\n\n    _defineProperty(this, \"tDateTimeParser\", null);\n\n    _defineProperty(this, \"translations\", {\n      en: _defineProperty({}, defaultNS, enTranslations),\n      nl: _defineProperty({}, defaultNS, nlTranslations),\n      ru: _defineProperty({}, defaultNS, ruTranslations),\n      tr: _defineProperty({}, defaultNS, trTranslations),\n      fr: _defineProperty({}, defaultNS, frTranslations),\n      hi: _defineProperty({}, defaultNS, hiTranslations),\n      it: _defineProperty({}, defaultNS, itTranslations)\n    });\n\n    _defineProperty(this, \"dayjsLocales\", {});\n\n    _defineProperty(this, \"localeExists\", function (language) {\n      if (_this.isCustomDateTimeParser) return true;\n      return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n    });\n\n    _defineProperty(this, \"validateCurrentLanguage\", function () {\n      var availableLanguages = Object.keys(_this.translations);\n\n      if (availableLanguages.indexOf(_this.currentLanguage) === -1) {\n        _this.logger(\"Streami18n: '\".concat(_this.currentLanguage, \"' language is not registered.\") + \" Please make sure to call streami18n.registerTranslation('\".concat(_this.currentLanguage, \"', {...}) or \") + \"use one the built-in supported languages - \".concat(_this.getAvailableLanguages()));\n\n        _this.currentLanguage = defaultLng;\n      }\n    });\n\n    _defineProperty(this, \"geti18Instance\", function () {\n      return _this.i18nInstance;\n    });\n\n    _defineProperty(this, \"getAvailableLanguages\", function () {\n      return Object.keys(_this.translations);\n    });\n\n    _defineProperty(this, \"getTranslations\", function () {\n      return _this.translations;\n    });\n\n    var finalOptions = _objectSpread({}, defaultStreami18nOptions, options); // Prepare the i18next configuration.\n\n\n    this.logger = finalOptions.logger;\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\"Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins\", error);\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    var translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = _defineProperty({}, defaultNS, translationsForLanguage);\n    } // If translations don't exist for given language, then set it as empty object.\n\n\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = _defineProperty({}, defaultNS, {});\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: {\n        escapeValue: false\n      },\n      parseMissingKeyHandler: function parseMissingKeyHandler(key) {\n        _this.logger(\"Streami18n: Missing translation for key: \".concat(key));\n\n        return key;\n      }\n    };\n    this.validateCurrentLanguage(this.currentLanguage);\n    var dayjsLocaleConfigForLanguage = finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, _objectSpread({}, dayjsLocaleConfigForLanguage));\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\"Streami18n: Streami18n(...) - Locale config for \".concat(this.currentLanguage, \" does not exist in momentjs.\") + \"Please import the locale file using \\\"import 'moment/locale/\".concat(this.currentLanguage, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n    }\n\n    this.tDateTimeParser = function (timestamp) {\n      if (finalOptions.disableDateTimeTranslations || !_this.localeExists(_this.currentLanguage)) {\n        return _this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n\n      return _this.DateTimeParser(timestamp).locale(_this.currentLanguage);\n    };\n  }\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n\n\n  _createClass(Streami18n, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.validateCurrentLanguage();\n                _context.prev = 1;\n                _context.next = 4;\n                return this.i18nInstance.init(_objectSpread({}, this.i18nextConfig, {\n                  resources: this.translations,\n                  lng: this.currentLanguage\n                }));\n\n              case 4:\n                this.t = _context.sent;\n                this.initialized = true;\n                return _context.abrupt(\"return\", {\n                  t: this.t,\n                  tDateTimeParser: this.tDateTimeParser\n                });\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                this.logger(\"Something went wrong with init:\", _context.t0);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 9]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getTranslators\",\n\n    /**\n     * Returns current version translator function.\n     */\n    value: function () {\n      var _getTranslators = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.initialized) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                if (this.dayjsLocales[this.currentLanguage]) {\n                  this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n                }\n\n                _context2.next = 4;\n                return this.init();\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 7:\n                return _context2.abrupt(\"return\", {\n                  t: this.t,\n                  tDateTimeParser: this.tDateTimeParser\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getTranslators() {\n        return _getTranslators.apply(this, arguments);\n      }\n\n      return getTranslators;\n    }()\n    /**\n     * Register translation\n     *\n     * @param {*} language\n     * @param {*} translation\n     * @param {*} customDayjsLocale\n     */\n\n  }, {\n    key: \"registerTranslation\",\n    value: function registerTranslation(language, translation, customDayjsLocale) {\n      if (!translation) {\n        this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation\");\n        return;\n      }\n\n      if (!this.translations[language]) {\n        this.translations[language] = _defineProperty({}, defaultNS, translation);\n      } else {\n        this.translations[language][defaultNS] = translation;\n      }\n\n      if (customDayjsLocale) {\n        this.dayjsLocales[language] = _objectSpread({}, customDayjsLocale);\n      } else if (!this.localeExists(language)) {\n        this.logger(\"Streami18n: registerTranslation(language, translation, customDayjsLocale) - \" + \"Locale config for \".concat(language, \" does not exist in Dayjs.\") + \"Please import the locale file using \\\"import 'dayjs/locale/\".concat(language, \"';\\\" in your app or \") + \"register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)\");\n      }\n\n      if (this.initialized) {\n        this.i18nInstance.addResources(language, defaultNS, translation);\n      }\n    }\n  }, {\n    key: \"addOrUpdateLocale\",\n    value: function addOrUpdateLocale(key, config) {\n      if (this.localeExists(key)) {\n        Dayjs.updateLocale(key, _objectSpread({}, config));\n      } else {\n        // Merging the custom locale config with en config, so missing keys can default to english.\n        Dayjs.locale(_objectSpread({\n          name: key\n        }, _objectSpread({}, en_locale, config)), null, true);\n      }\n    }\n    /**\n     * Changes the language.\n     * @param {*} language\n     */\n\n  }, {\n    key: \"setLanguage\",\n    value: function () {\n      var _setLanguage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(language) {\n        var t;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.currentLanguage = language;\n\n                if (this.initialized) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                _context3.prev = 3;\n                _context3.next = 6;\n                return this.i18nInstance.changeLanguage(language);\n\n              case 6:\n                t = _context3.sent;\n\n                if (this.dayjsLocales[language]) {\n                  this.addOrUpdateLocale(this.currentLanguage, this.dayjsLocales[this.currentLanguage]);\n                }\n\n                this.setLanguageCallback(t);\n                return _context3.abrupt(\"return\", t);\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](3);\n                this.logger(\"Failed to set language:\", _context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 12]]);\n      }));\n\n      function setLanguage(_x) {\n        return _setLanguage.apply(this, arguments);\n      }\n\n      return setLanguage;\n    }()\n    /**\n     *\n     * @param {*} callback\n     */\n\n  }, {\n    key: \"registerSetLanguageCallback\",\n    value: function registerSetLanguageCallback(callback) {\n      this.setLanguageCallback = callback;\n    }\n  }]);\n\n  return Streami18n;\n}();\n\nvar StreamContext = createContext({\n  changedUserData: function changedUserData() {},\n  sharedFeedManagers: {},\n  client: null\n});\nvar TranslationContext = createContext({\n  t: function t(msg) {\n    return msg;\n  },\n  tDateTimeParser: function tDateTimeParser(input) {\n    return Dayjs(input);\n  }\n});\n\nfunction withTranslationContext(OriginalComponent) {\n  var ContextAwareComponent = function ContextComponent(props) {\n    return createElement(TranslationContext.Consumer, null, function (translationContext) {\n      return OriginalComponent && createElement(OriginalComponent, _extends({}, translationContext, props));\n    });\n  };\n\n  ContextAwareComponent.displayName = OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace('Base', '');\n  return ContextAwareComponent;\n}\n/**\n * Manages the connection with Stream. Any components that should talk to\n * Stream should be a child of this component.\n */\n\n\nvar StreamApp = /*#__PURE__*/function (_React$Component) {\n  _inherits(StreamApp, _React$Component);\n\n  function StreamApp(props) {\n    var _this;\n\n    _classCallCheck(this, StreamApp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StreamApp).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getUserInfo\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.state.user.getOrCreate(_this.props.defaultUserData);\n\n            case 3:\n              _context.next = 9;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n\n              _this.props.errorHandler(_context.t0, 'get-user-info', {\n                userId: _this.state.user.id\n              });\n\n              return _context.abrupt(\"return\");\n\n            case 9:\n              _this.state.changedUserData();\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 5]]);\n    })));\n\n    _this.state = StreamApp.initClientState(props, {\n      changedUserData: function changedUserData() {\n        _this.setState({\n          userData: _this.state.user.data\n        });\n      },\n      t: null,\n      tDateTimeParser: null\n    });\n    return _this;\n  }\n\n  _createClass(StreamApp, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.apiKey !== prevProps.apiKey || this.props.token !== prevProps.token || this.props.appId !== prevProps.appId) {\n        this.getUserInfo();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var i18nInstance, streami18n, _ref2, t, tDateTimeParser;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.getUserInfo();\n                i18nInstance = this.props.i18nInstance;\n\n                if (i18nInstance && i18nInstance instanceof Streami18n) {\n                  streami18n = i18nInstance;\n                } else {\n                  streami18n = new Streami18n({\n                    language: 'en'\n                  });\n                }\n\n                streami18n.registerSetLanguageCallback(function (t) {\n                  _this2.setState({\n                    t: t\n                  });\n                });\n                _context2.next = 6;\n                return streami18n.getTranslators();\n\n              case 6:\n                _ref2 = _context2.sent;\n                t = _ref2.t;\n                tDateTimeParser = _ref2.tDateTimeParser;\n                this.setState({\n                  t: t,\n                  tDateTimeParser: tDateTimeParser\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.t) return null;\n\n      var _this$state = this.state,\n          t = _this$state.t,\n          tDateTimeParser = _this$state.tDateTimeParser,\n          streamContextValue = _objectWithoutProperties(_this$state, [\"t\", \"tDateTimeParser\"]);\n\n      return createElement(StreamContext.Provider, {\n        value: streamContextValue\n      }, createElement(TranslationContext.Provider, {\n        value: {\n          t: t,\n          tDateTimeParser: tDateTimeParser\n        }\n      }, createElement(Fragment, null, this.props.children || createElement(Fragment, null, createElement(\"div\", {\n        style: {\n          width: 100 + '%',\n          height: 100 + '%',\n          minHeight: 400,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: '#fff',\n          backgroundColor: '#008AFF',\n          fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol'\n        }\n      }, createElement(\"h3\", null, \"You are connected to:\"), createElement(\"svg\", {\n        width: \"117\",\n        height: \"21\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, createElement(\"g\", {\n        fill: \"none\",\n        fillRule: \"evenodd\"\n      }, createElement(\"path\", {\n        className: \"stream\",\n        d: \"M48.812 16.9c.168-.15.317-.317.448-.504.13-.187.196-.401.196-.644 0-.299-.107-.55-.322-.756a2.794 2.794 0 0 0-.784-.518 4.892 4.892 0 0 0-.966-.322c-.336-.075-.616-.14-.84-.196a13.04 13.04 0 0 1-1.736-.546 5.849 5.849 0 0 1-1.414-.784 3.53 3.53 0 0 1-.952-1.092c-.233-.42-.35-.92-.35-1.498 0-.541.13-1.05.392-1.526a4.35 4.35 0 0 1 1.05-1.26 5.156 5.156 0 0 1 1.54-.868 5.387 5.387 0 0 1 1.862-.322c.579 0 1.13.084 1.652.252.523.168.994.397 1.414.686.42.29.775.64 1.064 1.05.29.41.48.868.574 1.372l-2.436.588a2.036 2.036 0 0 0-.728-1.12c-.373-.299-.887-.448-1.54-.448a2.69 2.69 0 0 0-.7.098 2.41 2.41 0 0 0-.672.294c-.205.13-.378.29-.518.476-.14.187-.21.401-.21.644 0 .261.08.485.238.672.159.187.35.34.574.462.224.121.467.22.728.294.261.075.504.14.728.196.99.243 1.81.504 2.464.784.653.28 1.176.588 1.568.924.392.336.667.705.826 1.106.159.401.238.854.238 1.358a3.6 3.6 0 0 1-.406 1.68 4.22 4.22 0 0 1-1.12 1.358 5.304 5.304 0 0 1-1.708.896 6.912 6.912 0 0 1-2.142.322c-1.157 0-2.189-.285-3.094-.854-.905-.57-1.517-1.33-1.834-2.282l2.296-1.036c.299.653.681 1.097 1.148 1.33.467.233.999.35 1.596.35.747 0 1.372-.205 1.876-.616zm12.276 2.772a9.115 9.115 0 0 1-2.268.476c-.747.056-1.419-.051-2.016-.322-.597-.27-1.083-.747-1.456-1.428-.373-.681-.56-1.638-.56-2.87V9.313h-2.226V6.356h.609c.727 0 1.376-.177 1.834-.916.194-.313.22-.633.243-1.502V2.913h2.332v3.443h2.749v2.957h-2.75l-.075 6.635c0 .448.051.803.154 1.064.103.261.275.457.518.588.243.13.56.196.952.196.392 0 .868-.037 1.428-.112l.532 1.988zM69.676 8.78l-.392-.168a5.38 5.38 0 0 0-.392-.112 1.957 1.957 0 0 0-.476-.056c-.541 0-1.045.089-1.512.266a3.849 3.849 0 0 0-1.204.714 3.372 3.372 0 0 0-.798 1.05 2.866 2.866 0 0 0-.294 1.274L64.58 20h-2.716V6.288h2.156l.56 1.484a4.134 4.134 0 0 1 1.47-1.302c.607-.327 1.367-.49 2.282-.49.597 0 1.279.084 2.044.252l-.7 2.548zm7.048 11.256c-.97 0-1.88-.182-2.73-.546a7.032 7.032 0 0 1-2.226-1.498 6.99 6.99 0 0 1-1.498-2.24 6.957 6.957 0 0 1-.546-2.744c0-.97.173-1.885.518-2.744a7.226 7.226 0 0 1 1.4-2.24A6.526 6.526 0 0 1 73.7 6.526a5.91 5.91 0 0 1 2.52-.546c.915 0 1.76.159 2.534.476A5.203 5.203 0 0 1 80.77 7.94c.57.672 1.013 1.526 1.33 2.562.317 1.036.476 2.273.476 3.71h-9.968c.13.485.336.938.616 1.358.28.42.611.784.994 1.092.383.308.812.546 1.288.714.476.168.975.252 1.498.252.71 0 1.367-.13 1.974-.392a4.925 4.925 0 0 0 1.554-1.036l1.68 1.68c-.653.653-1.451 1.176-2.394 1.568-.943.392-1.974.588-3.094.588zM76.22 8.444c-.43 0-.835.084-1.218.252a3.89 3.89 0 0 0-1.064.7 4.32 4.32 0 0 0-.84 1.064c-.233.41-.406.859-.518 1.344h7.084a4.331 4.331 0 0 0-.308-1.288 3.311 3.311 0 0 0-1.75-1.806c-.401-.177-.863-.266-1.386-.266zm20.9-2.156V20h-2.296l-.42-1.84a4.424 4.424 0 0 1-1.792 1.4 5.49 5.49 0 0 1-2.212.476 6.326 6.326 0 0 1-2.618-.546 6.712 6.712 0 0 1-2.128-1.498 7.162 7.162 0 0 1-1.442-2.24 7.116 7.116 0 0 1-.532-2.744c0-.97.177-1.885.532-2.744a7.162 7.162 0 0 1 1.442-2.24 6.712 6.712 0 0 1 2.128-1.498A6.326 6.326 0 0 1 90.4 5.98c.747 0 1.465.145 2.156.434.69.29 1.307.742 1.848 1.358l.42-1.484h2.296zm-6.72 11.34c.541 0 1.055-.121 1.54-.364a3.94 3.94 0 0 0 1.26-.994c.355-.42.635-.91.84-1.47.205-.56.308-1.157.308-1.792s-.103-1.232-.308-1.792a4.834 4.834 0 0 0-.84-1.47 3.94 3.94 0 0 0-1.26-.994 3.398 3.398 0 0 0-1.54-.364c-.541 0-1.055.121-1.54.364a3.94 3.94 0 0 0-1.26.994c-.355.42-.635.91-.84 1.47a5.164 5.164 0 0 0-.308 1.792c0 .635.103 1.232.308 1.792.205.56.485 1.05.84 1.47.355.42.775.751 1.26.994s.999.364 1.54.364zM101.808 20h-2.716V6.288h2.156l.56 1.148a5.135 5.135 0 0 1 1.204-1.022c.467-.29 1.036-.434 1.708-.434.261 0 .555.033.882.098.327.065.663.177 1.008.336a4.3 4.3 0 0 1 .994.644c.317.27.588.62.812 1.05.317-.579.798-1.078 1.442-1.498.644-.42 1.33-.63 2.058-.63.485 0 .999.075 1.54.224.541.15 1.045.43 1.512.84.467.41.85.98 1.148 1.708.299.728.448 1.67.448 2.828V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.597 0-1.12.252-1.568.756-.448.504-.672 1.297-.672 2.38V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.56 0-1.05.215-1.47.644-.42.43-.667 1.101-.742 2.016V20z\",\n        fill: \"#fff\"\n      }), createElement(\"path\", {\n        className: \"stream-mark\",\n        d: \"M26.15 6.428l12.802-.908a1 1 0 0 1 .883 1.581L30.88 19.576a1 1 0 0 1-.812.417H9.982a1 1 0 0 1-.811-.416L.19 7.102a1 1 0 0 1 .882-1.582l12.764.908L19.29.333a1 1 0 0 1 1.496.006l5.364 6.09zm2.68 11.587l-8.309-3.105v3.105h8.31zm-9.309 0V14.91l-8.309 3.105h8.31zm-.959-3.847l-8.489 3.17-6.246-8.682 14.735 5.512zm2.9 0l8.49 3.17 6.246-8.682-14.735 5.512zm-1.933-.724V2.994l-6.941 7.837 6.941 2.613zm.992 0V2.996l6.942 7.835-6.942 2.613zm-9.969-3.336l1.597-1.794-7.802-.56 6.205 2.354zm18.863 0l-1.597-1.794 7.803-.56-6.206 2.354z\",\n        fill: \"#fff\"\n      }))))))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (state.client.apiKey !== props.apiKey || state.client.userToken !== props.token || state.client.appId !== props.appId) {\n        return StreamApp.initClientState(props, state);\n      }\n\n      return null;\n    }\n  }]);\n\n  return StreamApp;\n}(Component);\n\n_defineProperty(StreamApp, \"defaultProps\", {\n  sharedFeeds: [{\n    feedGroup: 'notification',\n    notify: true,\n    options: {\n      mark_seen: true\n    }\n  }],\n  defaultUserData: {\n    name: 'Unknown'\n  },\n  errorHandler: handleError\n});\n\n_defineProperty(StreamApp, \"Consumer\", function StreamAppConsumer(props) {\n  return createElement(StreamContext.Consumer, null, function (appCtx) {\n    if (!props.children || !props.children.length) {\n      return null;\n    }\n\n    if (!appCtx.client || !appCtx.user) {\n      throw new Error('This component should be a child of a StreamApp component');\n    }\n\n    var Child = props.children;\n    return Child(appCtx);\n  });\n});\n\n_defineProperty(StreamApp, \"initClientState\", function (props, state) {\n  var client = stream.connect(props.apiKey, props.token, props.appId, props.options || {});\n  var analyticsClient;\n\n  if (props.analyticsToken) {\n    analyticsClient = new StreamAnalytics({\n      apiKey: props.apiKey,\n      token: props.analyticsToken\n    });\n    analyticsClient.setUser(client.userId);\n  }\n\n  var newState = _objectSpread({}, state, {\n    client: client,\n    user: client.currentUser,\n    userData: client.currentUser.data,\n    analyticsClient: analyticsClient,\n    sharedFeedManagers: {},\n    errorHandler: props.errorHandler,\n    apiKey: props.apiKey,\n    token: props.token,\n    appId: props.appId\n  });\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = props.sharedFeeds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var feedProps = _step.value;\n      var manager = new FeedManager(_objectSpread({}, feedProps, newState));\n      newState.sharedFeedManagers[manager.feed().id] = manager;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return newState;\n});\n\nvar FeedContext = createContext({});\n\nvar Feed = /*#__PURE__*/function (_React$Component) {\n  _inherits(Feed, _React$Component);\n\n  function Feed() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Feed);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Feed)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_appCtxWrapperFunc\", function (appCtx) {\n      return createElement(FeedInner, _extends({}, _this.props, appCtx));\n    });\n\n    return _this;\n  }\n\n  _createClass(Feed, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(StreamApp.Consumer, null, this._appCtxWrapperFunc);\n    }\n  }]);\n\n  return Feed;\n}(Component);\n\nvar FeedInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(FeedInner, _React$Component2);\n\n  function FeedInner(props) {\n    var _this2;\n\n    _classCallCheck(this, FeedInner);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(FeedInner).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this2), \"boundForceUpdate\", function () {\n      return _this2.forceUpdate();\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"getCtx\", function () {\n      var manager = _this2.state.manager;\n      var state = manager.state;\n      return {\n        getActivityPath: manager.getActivityPath,\n        onToggleReaction: manager.onToggleReaction,\n        onAddReaction: manager.onAddReaction,\n        onRemoveReaction: manager.onRemoveReaction,\n        onToggleChildReaction: manager.onToggleChildReaction,\n        onAddChildReaction: manager.onAddChildReaction,\n        onRemoveChildReaction: manager.onRemoveChildReaction,\n        onRemoveActivity: manager.onRemoveActivity,\n        onMarkAsRead: manager.onMarkAsRead,\n        onMarkAsSeen: manager.onMarkAsSeen,\n        hasDoneRequest: state.lastResponse != null,\n        refresh: manager.refresh,\n        refreshUnreadUnseen: manager.refreshUnreadUnseen,\n        loadNextReactions: manager.loadNextReactions,\n        loadNextPage: manager.loadNextPage,\n        hasNextPage: manager.hasNextPage(),\n        loadReverseNextPage: manager.loadReverseNextPage,\n        hasReverseNextPage: manager.hasReverseNextPage(),\n        feedGroup: _this2.props.feedGroup,\n        userId: _this2.props.userId,\n        activityOrder: state.activityOrder,\n        activities: state.activities,\n        realtimeAdds: state.realtimeAdds,\n        realtimeDeletes: state.realtimeDeletes,\n        refreshing: state.refreshing,\n        unread: state.unread,\n        unseen: state.unseen,\n        feedManager: manager\n      };\n    });\n\n    var feedId = props.client.feed(props.feedGroup, props.userId).id;\n    var _manager = props.sharedFeedManagers[feedId];\n\n    if (!_manager) {\n      _manager = new FeedManager(props);\n    }\n\n    _this2.state = {\n      manager: _manager\n    };\n    return _this2;\n  }\n\n  _createClass(FeedInner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return this.state.manager.register(this.boundForceUpdate);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var clientDifferent = this.props.client !== prevProps.client;\n      var notifyDifferent = this.props.notify !== prevProps.notify;\n      var feedDifferent = this.props.userId !== prevProps.userId || this.props.feedGroup !== prevProps.feedGroup;\n      var optionsDifferent = !_isEqual(this.props.options, prevProps.options);\n      var doFeedRequestDifferent = this.props.doFeedRequest !== prevProps.doFeedRequest;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      return this.state.manager.unregister(this.boundForceUpdate);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return createElement(FeedContext.Provider, {\n        value: this.getCtx()\n      }, this.props.children);\n    }\n  }]);\n\n  return FeedInner;\n}(Component);\n\nvar placeholder = \"1519fc1dc6e473ee.png\";\n/**\n *\n * @example ./examples/Avatar.md\n */\n\nvar Avatar = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Avatar, _React$PureComponent);\n\n  function Avatar() {\n    _classCallCheck(this, Avatar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Avatar).apply(this, arguments));\n  }\n\n  _createClass(Avatar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          size = _this$props.size,\n          image = _this$props.image,\n          alt = _this$props.alt,\n          rounded = _this$props.rounded,\n          circle = _this$props.circle;\n      return React__default.createElement(React__default.Fragment, null, React__default.createElement(\"img\", {\n        style: size ? {\n          width: \"\".concat(size, \"px\"),\n          height: \"\".concat(size, \"px\")\n        } : {},\n        className: \"raf-avatar \".concat(rounded ? 'raf-avatar--rounded' : '', \" \").concat(circle ? 'raf-avatar--circle' : ''),\n        onClick: this.props.onClick,\n        src: image ? image : placeholder,\n        alt: alt || ''\n      }));\n    }\n  }]);\n\n  return Avatar;\n}(React__default.PureComponent);\n/**\n * Component is described here.\n *\n * @example ./examples/UserBar.md\n */\n\n\nvar UserBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserBar, _React$Component);\n\n  function UserBar() {\n    _classCallCheck(this, UserBar);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UserBar).apply(this, arguments));\n  }\n\n  _createClass(UserBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var tDateTimeParser = this.props.tDateTimeParser;\n      var time = this.props.time;\n\n      if (time === undefined && this.props.timestamp != null) {\n        time = humanizeTimestamp(this.props.timestamp, tDateTimeParser);\n      }\n\n      return createElement(\"div\", {\n        className: \"raf-user-bar\"\n      }, this.props.avatar ? createElement(Avatar, {\n        onClick: this.props.onClickUser,\n        size: 50,\n        circle: true,\n        image: this.props.avatar\n      }) : null, createElement(\"div\", {\n        className: \"raf-user-bar__details\"\n      }, createElement(\"p\", {\n        className: \"raf-user-bar__username\",\n        onClick: this.props.onClickUser\n      }, this.props.username), this.props.AfterUsername, this.props.icon !== undefined ? createElement(\"img\", {\n        src: this.props.icon,\n        alt: \"icon\"\n      }) : null, this.props.subtitle ? createElement(\"p\", {\n        className: \"raf-user-bar__subtitle\"\n      }, createElement(\"time\", {\n        dateTime: this.props.timestamp,\n        title: this.props.timestamp\n      }, this.props.subtitle)) : null), createElement(Fragment, null, smartRender(this.props.Right, {}, function () {\n        return createElement(\"p\", {\n          className: \"raf-user-bar__extra\"\n        }, createElement(\"time\", {\n          dateTime: _this.props.timestamp,\n          title: _this.props.timestamp\n        }, time));\n      })));\n    }\n  }]);\n\n  return UserBar;\n}(Component);\n\nvar UserBar$1 = withTranslationContext(UserBar);\n/**\n * Component is described here.\n *\n * @example ./examples/Card.md\n */\n\nvar Card = /*#__PURE__*/function (_React$Component) {\n  _inherits(Card, _React$Component);\n\n  function Card() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Card);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Card)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"trimUrl\", function (url) {\n      var trimmedUrl;\n\n      if (url !== undefined || url !== null) {\n        trimmedUrl = url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '').split('/')[0];\n      }\n\n      return trimmedUrl;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleClose\", function (e) {\n      if (_this.props.handleClose) {\n        _this.props.handleClose(e);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Card, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          alt = _this$props.alt,\n          images = _this$props.images,\n          handleClose = _this$props.handleClose,\n          nolink = _this$props.nolink;\n      var image = this.props.image;\n\n      if (!image && images && images.length) {\n        image = images[0].image;\n      }\n\n      var url = sanitizeURL(this.props.url);\n      var svg = '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n      return React__default.createElement(\"a\", {\n        href: !nolink ? url : null,\n        target: \"blank\",\n        rel: \"noopener\",\n        className: \"raf-card \".concat(image !== undefined ? 'raf-card--with-image' : '')\n      }, handleClose && image ? React__default.createElement(IconButton, {\n        onClick: function onClick(e) {\n          return _this2._handleClose(e);\n        }\n      }, React__default.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: svg\n        }\n      })) : null, image !== undefined && React__default.createElement(\"div\", {\n        className: \"raf-card__image\"\n      }, React__default.createElement(\"img\", {\n        src: image == null ? placeholder : image,\n        alt: alt || this.props.title || this.props.description || ''\n      })), React__default.createElement(\"div\", {\n        className: \"raf-card__content\"\n      }, React__default.createElement(\"div\", {\n        className: \"raf-card__content-left\"\n      }, React__default.createElement(\"p\", {\n        className: \"raf-card__title\"\n      }, this.props.title), React__default.createElement(\"p\", {\n        className: \"raf-card__url\"\n      }, this.trimUrl(url || '')), React__default.createElement(\"p\", {\n        className: \"raf-card__description\"\n      }, this.props.description)), handleClose && image === undefined ? React__default.createElement(\"div\", {\n        className: \"raf-card__content-right\"\n      }, React__default.createElement(IconButton, {\n        onClick: function onClick(e) {\n          return _this2._handleClose(e);\n        }\n      }, React__default.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: svg\n        }\n      }))) : null));\n    }\n  }]);\n\n  return Card;\n}(React__default.Component);\n\nvar Audio = /*#__PURE__*/function (_React$Component) {\n  _inherits(Audio, _React$Component);\n\n  function Audio(props) {\n    var _this;\n\n    _classCallCheck(this, Audio);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Audio).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"audioRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"playAudio\", function () {\n      if (_this.audioRef.current !== null) {\n        _this.audioRef.current.pause();\n\n        _this.updateProgress();\n\n        _this.setState({\n          playing: true,\n          updateProgress: setInterval(_this.updateProgress, 500)\n        }); //$FlowFixMe\n\n\n        _this.audioRef.current.play();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pauseAudio\", function () {\n      if (_this.audioRef.current !== null) {\n        _this.audioRef.current.pause();\n      }\n\n      _this.setState({\n        playing: false\n      });\n\n      window.clearInterval(_this.state.updateProgress);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateProgress\", function () {\n      if (_this.audioRef.current !== null) {\n        var position = _this.audioRef.current.currentTime;\n        var duration = _this.audioRef.current.duration;\n        var progress = 100 / duration * position;\n\n        _this.setState({\n          progress: progress\n        });\n\n        if (position === duration) {\n          _this.pauseAudio();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleClose\", function (e) {\n      if (_this.props.handleClose) {\n        _this.props.handleClose(e);\n      }\n    });\n\n    _this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null\n    };\n    _this.audioRef = createRef();\n    return _this;\n  }\n\n  _createClass(Audio, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.clearInterval(this.state.updateProgress);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var og = this.props.og;\n      var svg = '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n      var audio = og.audios[0];\n      var url = sanitizeURL(audio.secure_url || audio.audio);\n      var image = ((og.images || [])[0] || {}).image;\n      return createElement(\"div\", {\n        className: \"raf-audio\"\n      }, createElement(\"div\", {\n        className: \"raf-audio__wrapper\"\n      }, createElement(\"audio\", {\n        ref: this.audioRef\n      }, createElement(\"source\", {\n        src: url,\n        type: \"audio/mp3\"\n      })), createElement(\"div\", {\n        className: \"raf-audio__image\"\n      }, createElement(\"div\", {\n        className: \"raf-audio__image--overlay\"\n      }, !this.state.playing ? createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.playAudio();\n        },\n        className: \"raf-audio__image--button\"\n      }, createElement(FontAwesomeIcon, {\n        icon: faPlayCircle\n      })) : createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.pauseAudio();\n        },\n        className: \"raf-audio__image--button\"\n      }, createElement(FontAwesomeIcon, {\n        icon: faPauseCircle\n      }))), createElement(\"img\", {\n        src: image,\n        alt: \"\".concat(og.description)\n      })), createElement(\"div\", {\n        className: \"raf-audio__content\"\n      }, createElement(\"span\", {\n        className: \"raf-audio__content--title\"\n      }, createElement(\"strong\", null, og.title)), createElement(\"span\", {\n        className: \"raf-audio__content--subtitle\"\n      }, og.description), createElement(\"div\", {\n        className: \"raf-audio__content--progress\"\n      }, createElement(\"div\", {\n        style: {\n          width: \"\".concat(this.state.progress, \"%\")\n        }\n      }))), this.props.handleClose ? createElement(IconButton, {\n        onClick: function onClick(e) {\n          return _this2._handleClose(e);\n        }\n      }, createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: svg\n        }\n      })) : null));\n    }\n  }]);\n\n  return Audio;\n}(Component);\n/**\n * Component for rendering an Youtube or Vimeo embedded player\n * @example ./examples/Video.md\n */\n\n\nvar Video = /*#__PURE__*/function (_React$Component) {\n  _inherits(Video, _React$Component);\n\n  function Video() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Video);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Video)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleClose\", function (e) {\n      if (_this.props.handleClose) {\n        _this.props.handleClose(e);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Video, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props$og = this.props.og,\n          videos = _this$props$og.videos,\n          _this$props$og$images = _this$props$og.images,\n          images = _this$props$og$images === void 0 ? [] : _this$props$og$images;\n      var video = {};\n      var svg = '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n      var CloseButton = Boolean(this.props.handleClose) && React__default.createElement(IconButton, {\n        onClick: function onClick(e) {\n          return _this2._handleClose(e);\n        }\n      }, React__default.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: svg\n        }\n      }));\n\n      for (var i = 0; i < videos.length; i++) {\n        if (videos[i].type === 'text/html' || videos[i].type === 'video/mp4') {\n          video = videos[i];\n          break;\n        }\n      }\n\n      var url = sanitizeURL(video.secure_url || video.video);\n\n      if (video.type === 'text/html') {\n        var newUrl = url && url.split('/watch?v=').join('/embed/');\n        return React__default.createElement(\"div\", {\n          className: \"raf-video__frame\"\n        }, CloseButton, React__default.createElement(\"iframe\", {\n          title: 'embedded player',\n          id: \"ytplayer\",\n          type: video.type,\n          width: video.width,\n          height: video.height,\n          src: newUrl,\n          frameBorder: \"0\"\n        }));\n      } else {\n        var videoProps = {\n          controls: true,\n          // Try fetching length of video etc\n          preload: 'metadata',\n          poster: ''\n        };\n\n        if (images[0]) {\n          if (images[0].secure_url) videoProps.poster = images[0].secure_url;else if (images[0].image) videoProps.poster = images[0].image;\n        }\n\n        var parsedUrl = new URL(url);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.props.urlsThatAreGifs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var gifUrl = _step.value;\n\n            if (gifUrl === parsedUrl.host) {\n              videoProps = {\n                // Load the video right away\n                preload: 'auto',\n                // Display it like it's a gif\n                autoPlay: true,\n                muted: true,\n                loop: true,\n                controls: false,\n                // On mobile don't open video fullscreen\n                playsInline: true,\n                'webkit-playsinline': 'webkit-playsinline'\n              };\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return React__default.createElement(\"div\", {\n          className: \"raf-video__video\"\n        }, React__default.createElement(\"video\", _extends({\n          className: \"raf-video__video--video\"\n        }, videoProps), React__default.createElement(\"source\", {\n          src: url,\n          type: video.type\n        })), React__default.createElement(\"div\", {\n          className: \"raf-video__video--content\"\n        }, React__default.createElement(\"div\", {\n          className: \"raf-video__video--title\"\n        }, this.props.og.title), React__default.createElement(\"div\", {\n          className: \"raf-video__video--description\"\n        }, this.props.og.description), React__default.createElement(\"div\", {\n          className: \"raf-video__video--link\"\n        }, React__default.createElement(\"a\", {\n          href: sanitizeURL(this.props.og.url),\n          target: \"blank\"\n        }, this.props.og.site_name))), CloseButton);\n      }\n    }\n  }]);\n\n  return Video;\n}(React__default.Component);\n\n_defineProperty(Video, \"defaultProps\", {\n  urlsThatAreGifs: ['i.giphy.com', 'i.imgur.com', 'media.giphy.com']\n});\n/**\n * Component is described here.\n *\n * @example ./examples/Gallery.md\n */\n\n\nvar Gallery = /*#__PURE__*/function (_React$Component) {\n  _inherits(Gallery, _React$Component);\n\n  function Gallery(props) {\n    var _this;\n\n    _classCallCheck(this, Gallery);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Gallery).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"gotoPrevious\", function () {\n      _this.setState({\n        currentImage: _this.state.currentImage - 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"gotoNext\", function () {\n      _this.setState({\n        currentImage: _this.state.currentImage + 1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openLightbox\", function (image) {\n      _this.setState({\n        lightboxIsOpen: true,\n        currentImage: image\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeLightbox\", function () {\n      _this.setState({\n        lightboxIsOpen: false,\n        currentImage: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getImages\", function (images) {\n      return images.map(function (item) {\n        return {\n          src: item\n        };\n      });\n    });\n\n    _this.state = {\n      lightboxIsOpen: false,\n      currentImage: 0\n    };\n    return _this;\n  }\n\n  _createClass(Gallery, [{\n    key: \"render\",\n    //  TODO: Provide way to add alt tags.\n    value: function render() {\n      var _this2 = this;\n\n      var images = this.props.images;\n      return createElement(Fragment, null, createElement(\"div\", {\n        className: \"raf-gallery\"\n      }, images.slice(0, 5).map(function (image, i) {\n        return createElement(\"div\", {\n          className: \"img \".concat(i === 4 && images.length > 5 ? 'img--last' : ''),\n          onClick: function onClick() {\n            return _this2.openLightbox(i);\n          },\n          key: \"image-\".concat(i)\n        }, createElement(\"img\", {\n          src: image,\n          className: \"raf-gallery__image \",\n          alt: \"\"\n        }), createElement(Fragment, null, i === 4 && images.length > 5 ? createElement(\"p\", null, images.length - 4, \" more\") : null)) // </div>\n        ;\n      }), createElement(Lightbox, {\n        backdropClosesModal: true,\n        images: this.getImages(images),\n        isOpen: this.state.lightboxIsOpen,\n        onClickPrev: this.gotoPrevious,\n        onClickNext: this.gotoNext,\n        onClose: this.closeLightbox,\n        currentImage: this.state.currentImage\n      })));\n    }\n  }]);\n\n  return Gallery;\n}(Component);\n/**\n * Component is described here.\n *\n * @example ./examples/Activity.md\n */\n\n\nvar Activity = /*#__PURE__*/function (_React$Component) {\n  _inherits(Activity, _React$Component);\n\n  function Activity() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Activity);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Activity)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHeader\", function () {\n      var tDateTimeParser = _this.props.tDateTimeParser;\n      var actor = userOrDefault(_this.props.activity.actor);\n      return React__default.createElement(\"div\", {\n        style: {\n          padding: '8px 16px'\n        }\n      }, React__default.createElement(UserBar$1, {\n        username: actor.data.name,\n        avatar: actor.data.profileImage,\n        onClickUser: _this._getOnClickUser(),\n        subtitle: _this.props.HeaderRight != null ? humanizeTimestamp(_this.props.activity.time, tDateTimeParser) : undefined,\n        timestamp: _this.props.activity.time,\n        icon: _this.props.icon,\n        Right: _this.props.HeaderRight\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickUser\", function () {\n      var onClickUser = _this.props.onClickUser;\n\n      if (onClickUser) {\n        return onClickUser(userOrDefault(_this.props.activity.actor));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderContent\", function () {\n      var text = _this.props.activity.text;\n\n      if (text === undefined) {\n        if (typeof _this.props.activity.object === 'string') {\n          text = _this.props.activity.object;\n        } else {\n          text = '';\n        }\n      }\n\n      text = text.trim();\n      var _this$props$activity$ = _this.props.activity.attachments,\n          attachments = _this$props$activity$ === void 0 ? {} : _this$props$activity$;\n      return React__default.createElement(\"div\", {\n        className: \"raf-activity__content\"\n      }, !!text && React__default.createElement(\"div\", {\n        style: {\n          padding: '8px 16px'\n        }\n      }, React__default.createElement(\"p\", null, textRenderer(text, 'raf-activity', _this.props.onClickMention, _this.props.onClickHashtag))), _this.props.activity.verb === 'repost' && _this.props.activity.object instanceof Object && React__default.createElement(Card, _this.props.activity.object.data), attachments && attachments.og && Object.keys(attachments.og).length > 0 && React__default.createElement(\"div\", {\n        style: {\n          padding: '8px 16px'\n        }\n      }, attachments.og.videos ? React__default.createElement(Video, {\n        og: attachments.og\n      }) : attachments.og.audios ? React__default.createElement(Audio, {\n        og: attachments.og\n      }) : React__default.createElement(Card, attachments.og)), Boolean(_this.props.activity.image) && _this.props.activity.image !== undefined ? React__default.createElement(\"div\", {\n        style: {\n          padding: '8px 0'\n        }\n      }, React__default.createElement(Gallery, {\n        images: [_this.props.activity.image] // resizeMethod=\"resize\"\n\n      })) : null, attachments.images && Boolean(attachments.images.length) && React__default.createElement(\"div\", {\n        style: {\n          padding: '8px 0'\n        }\n      }, React__default.createElement(Gallery, {\n        images: attachments.images\n      })), attachments.files && Boolean(attachments.files.length) && React__default.createElement(\"ol\", {\n        className: \"raf-activity__attachments\"\n      }, attachments.files.map(function (_ref, i) {\n        var name = _ref.name,\n            url = _ref.url,\n            mimeType = _ref.mimeType;\n        return React__default.createElement(\"a\", {\n          href: sanitizeURL(url),\n          download: true,\n          key: i\n        }, React__default.createElement(\"li\", {\n          className: \"raf-activity__file\"\n        }, React__default.createElement(FileIcon, {\n          mimeType: mimeType,\n          filename: name\n        }), \" \", name));\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFooter\", function () {\n      return null;\n    });\n\n    return _this;\n  }\n\n  _createClass(Activity, [{\n    key: \"_getOnClickUser\",\n    value: function _getOnClickUser() {\n      return this.props.onClickUser ? this.onClickUser : undefined;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React__default.createElement(\"div\", {\n        className: \"raf-activity\"\n      }, React__default.createElement(React__default.Fragment, null, smartRender(this.props.Header, {}, this.renderHeader), smartRender(this.props.Content, {}, this.renderContent), smartRender(this.props.Footer, {}, this.renderFooter)));\n    }\n  }]);\n\n  return Activity;\n}(React__default.Component);\n\nvar Activity$1 = withTranslationContext(Activity);\n/**\n *\n * @example ./examples/Link.md\n */\n\nvar Link = /*#__PURE__*/function (_React$Component) {\n  _inherits(Link, _React$Component);\n\n  function Link() {\n    _classCallCheck(this, Link);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Link).apply(this, arguments));\n  }\n\n  _createClass(Link, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(Fragment, null, createElement(\"a\", {\n        href: this.props.to,\n        className: \"raf-link\",\n        onClick: this.props.onClick\n      }, this.props.children));\n    }\n  }]);\n\n  return Link;\n}(Component);\n/**\n * Component is described here.\n *\n * @example ./examples/NewActivitiesNotification.md\n */\n\n\nvar NewActivitiesNotification = /*#__PURE__*/function (_React$Component) {\n  _inherits(NewActivitiesNotification, _React$Component);\n\n  function NewActivitiesNotification() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NewActivitiesNotification);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NewActivitiesNotification)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_labelFunction\", function () {\n      var _this$props = _this.props,\n          adds = _this$props.adds,\n          deletes = _this$props.deletes,\n          labelSingle = _this$props.labelSingle,\n          labelPlural = _this$props.labelPlural,\n          labelFunction = _this$props.labelFunction,\n          t = _this$props.t;\n      var addCount = (adds || []).length;\n      var deleteCount = (deletes || []).length;\n      var count = addCount + deleteCount;\n\n      if (labelFunction) {\n        return labelFunction({\n          count: count,\n          addCount: addCount,\n          deleteCount: deleteCount,\n          labelSingle: labelSingle,\n          labelPlural: labelPlural\n        });\n      }\n\n      if (addCount === 0) {\n        return null;\n      }\n\n      var singleNotificationText = '';\n      var pluralNotificationText = '';\n\n      if (labelSingle) {\n        singleNotificationText = \"You have 1 new \".concat(labelSingle);\n      } else {\n        singleNotificationText = t('You have 1 new notification');\n      }\n\n      if (labelPlural) {\n        pluralNotificationText = \"You have \".concat(addCount, \" new \").concat(labelPlural);\n      } else {\n        pluralNotificationText = t('You have {{ notificationCount }} new notifications', {\n          notificationCount: addCount\n        });\n      }\n\n      return addCount > 1 ? pluralNotificationText : singleNotificationText;\n    });\n\n    return _this;\n  }\n\n  _createClass(NewActivitiesNotification, [{\n    key: \"render\",\n    value: function render() {\n      var label = this._labelFunction();\n\n      if (label === null) {\n        return null;\n      }\n\n      return React__default.createElement(\"button\", {\n        className: \"raf-new-activities-notification\",\n        type: \"button\",\n        onClick: this.props.onClick\n      }, React__default.createElement(Link, null, label));\n    }\n  }]);\n\n  return NewActivitiesNotification;\n}(React__default.Component);\n\n_defineProperty(NewActivitiesNotification, \"defaultProps\", {\n  adds: [],\n  deletes: []\n});\n\nvar NewActivitiesNotification$1 = withTranslationContext(NewActivitiesNotification);\n/**\n *\n * @example ./examples/Button.md\n */\n\nvar Button = /*#__PURE__*/function (_React$Component) {\n  _inherits(Button, _React$Component);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Button).apply(this, arguments));\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          buttonStyle = _this$props.buttonStyle;\n      return createElement(\"button\", {\n        className: \"raf-button\".concat(buttonStyle ? ' raf-button--' + buttonStyle : ''),\n        onClick: this.props.onClick,\n        onKeyPress: this.props.onKeyPress,\n        type: this.props.type,\n        disabled: this.props.disabled\n      }, !this.props.loading ? children : createElement(LoadingIndicator, {\n        backgroundColor: \"rgba(255,255,255,0.1)\",\n        color: \"rgba(255,255,255,0.4)\"\n      }));\n    }\n  }]);\n\n  return Button;\n}(Component);\n\n_defineProperty(Button, \"defaultProps\", {\n  buttonStyle: 'info',\n  type: 'button',\n  disabled: false,\n  loading: false\n});\n\nvar LoadMoreButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoadMoreButton, _React$Component);\n\n  function LoadMoreButton() {\n    _classCallCheck(this, LoadMoreButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LoadMoreButton).apply(this, arguments));\n  }\n\n  _createClass(LoadMoreButton, [{\n    key: \"render\",\n    value: function render() {\n      var t = this.props.t;\n      return createElement(\"div\", {\n        className: \"raf-load-more-button\"\n      }, createElement(Button, {\n        onClick: this.props.onClick,\n        buttonStyle: \"info\",\n        disabled: this.props.refreshing,\n        loading: this.props.refreshing\n      }, this.props.children ? this.props.children : t('Load more')));\n    }\n  }]);\n\n  return LoadMoreButton;\n}(Component);\n\nvar LoadMoreButton$1 = withTranslationContext(LoadMoreButton);\n\nvar LoadMorePaginator = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoadMorePaginator, _React$Component);\n\n  function LoadMorePaginator() {\n    _classCallCheck(this, LoadMorePaginator);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LoadMorePaginator).apply(this, arguments));\n  }\n\n  _createClass(LoadMorePaginator, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(Fragment, null, !this.props.reverse && this.props.children, this.props.hasNextPage ? smartRender(this.props.LoadMoreButton, {\n        refreshing: this.props.refreshing,\n        onClick: this.props.loadNextPage\n      }) : null, this.props.reverse && this.props.children);\n    }\n  }]);\n\n  return LoadMorePaginator;\n}(Component);\n\n_defineProperty(LoadMorePaginator, \"defaultProps\", {\n  LoadMoreButton: LoadMoreButton$1\n});\n\nvar FeedPlaceholder = /*#__PURE__*/function (_React$Component) {\n  _inherits(FeedPlaceholder, _React$Component);\n\n  function FeedPlaceholder() {\n    _classCallCheck(this, FeedPlaceholder);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FeedPlaceholder).apply(this, arguments));\n  }\n\n  _createClass(FeedPlaceholder, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          text = _this$props.text;\n      return React__default.createElement(\"div\", {\n        className: \"raf-feed-placeholder\"\n      }, React__default.createElement(\"p\", null, text || t('No data to display...')));\n    }\n  }]);\n\n  return FeedPlaceholder;\n}(React__default.Component);\n\nvar FeedPlaceholder$1 = withTranslationContext(FeedPlaceholder);\n/**\n * Renders a feed of activities, this component is a StreamApp consumer\n * and must always be a child of the `<StreamApp>` element\n * @example ./examples/FlatFeed.md\n */\n\nvar FlatFeed = /*#__PURE__*/function (_React$Component) {\n  _inherits(FlatFeed, _React$Component);\n\n  function FlatFeed() {\n    _classCallCheck(this, FlatFeed);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FlatFeed).apply(this, arguments));\n  }\n\n  _createClass(FlatFeed, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return createElement(Feed, {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n        options: this.props.options,\n        notify: this.props.notify,\n        doFeedRequest: this.props.doFeedRequest,\n        doActivityDeleteRequest: this.props.doActivityDeleteRequest,\n        doReactionAddRequest: this.props.doReactionAddRequest,\n        doReactionDeleteRequest: this.props.doReactionDeleteRequest,\n        doChildReactionAddRequest: this.props.doChildReactionAddRequest,\n        doChildReactionDeleteRequest: this.props.doChildReactionDeleteRequest,\n        doReactionsFilterRequest: this.props.doReactionsFilterRequest\n      }, createElement(FeedContext.Consumer, null, function (feedCtx) {\n        return createElement(FlatFeedInner, _extends({}, _this.props, feedCtx));\n      }));\n    }\n  }]);\n\n  return FlatFeed;\n}(Component);\n\n_defineProperty(FlatFeed, \"defaultProps\", {\n  feedGroup: 'timeline',\n  notify: false,\n  Activity: Activity$1,\n  Notifier: function Notifier(props) {\n    return createElement(NewActivitiesNotification$1, _extends({\n      labelPlural: \"activities\",\n      labelSingle: \"activity\"\n    }, props));\n  },\n  Placeholder: FeedPlaceholder$1,\n  Paginator: LoadMorePaginator,\n  LoadingIndicator: LoadingIndicator\n});\n\nvar FlatFeedInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(FlatFeedInner, _React$Component2);\n\n  function FlatFeedInner() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, FlatFeedInner);\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FlatFeedInner)).call.apply(_getPrototypeOf2, [this].concat(_args)));\n\n    _defineProperty(_assertThisInitialized(_this2), \"listRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this2), \"_refresh\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var ref;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.props.refresh(_this2.props.options);\n\n            case 2:\n              ref = _this2.listRef;\n\n              if (ref && ref.current) {\n                ref.current.scrollToOffset({\n                  offset: 0\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this2), \"_renderWrappedActivity\", function (_ref2) {\n      var item = _ref2.item;\n      return createElement(ImmutableItemWrapper, {\n        renderItem: _this2._renderActivity,\n        item: item,\n        feedGroup: _this2.props.feedGroup,\n        userId: _this2.props.userId,\n        key: item.get('id')\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_childProps\", function () {\n      return {\n        onToggleReaction: _this2.props.onToggleReaction,\n        onAddReaction: _this2.props.onAddReaction,\n        onRemoveReaction: _this2.props.onRemoveReaction,\n        onToggleChildReaction: _this2.props.onToggleChildReaction,\n        onAddChildReaction: _this2.props.onAddChildReaction,\n        onRemoveChildReaction: _this2.props.onRemoveChildReaction,\n        onRemoveActivity: _this2.props.onRemoveActivity,\n        feedGroup: _this2.props.feedGroup,\n        userId: _this2.props.userId\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_renderActivity\", function (item) {\n      var args = _objectSpread({\n        activity: item\n      }, _this2._childProps());\n\n      return smartRender(_this2.props.Activity, _objectSpread({}, args));\n    });\n\n    return _this2;\n  }\n\n  _createClass(FlatFeedInner, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._refresh();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var notifierProps = {\n        adds: this.props.realtimeAdds,\n        deletes: this.props.realtimeDeletes,\n        onClick: this._refresh,\n        labelFunction: undefined\n      };\n      var _this$props = this.props,\n          loadNextPage = _this$props.loadNextPage,\n          hasNextPage = _this$props.hasNextPage,\n          refreshing = _this$props.refreshing,\n          hasDoneRequest = _this$props.hasDoneRequest,\n          loadReverseNextPage = _this$props.loadReverseNextPage,\n          hasReverseNextPage = _this$props.hasReverseNextPage,\n          t = _this$props.t;\n\n      if (hasReverseNextPage) {\n        notifierProps.onClick = loadReverseNextPage;\n\n        notifierProps.labelFunction = function () {\n          return t('Load activities');\n        };\n      }\n\n      if (this.props.activities.size === 0 && this.props.hasDoneRequest) {\n        return createElement(Fragment, null, smartRender(this.props.Notifier, notifierProps), smartRender(this.props.Placeholder));\n      }\n\n      if (refreshing && !hasDoneRequest) {\n        return createElement(\"div\", {\n          className: \"raf-loading-indicator\"\n        }, smartRender(this.props.LoadingIndicator, {}));\n      }\n\n      return createElement(Fragment, null, smartRender(this.props.Notifier, notifierProps), smartRender(this.props.Paginator, {\n        loadNextPage: loadNextPage,\n        hasNextPage: hasNextPage,\n        refreshing: refreshing,\n        children: this.props.activityOrder.map(function (id) {\n          return _this3._renderWrappedActivity({\n            item: _this3.props.activities.get(id)\n          });\n        })\n      }));\n    }\n  }]);\n\n  return FlatFeedInner;\n}(Component);\n\nvar ImmutableItemWrapper = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ImmutableItemWrapper, _React$PureComponent);\n\n  function ImmutableItemWrapper() {\n    _classCallCheck(this, ImmutableItemWrapper);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutableItemWrapper).apply(this, arguments));\n  }\n\n  _createClass(ImmutableItemWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.renderItem(this.props.item.toJS());\n    }\n  }]);\n\n  return ImmutableItemWrapper;\n}(PureComponent);\n\nvar FlatFeed$1 = withTranslationContext(FlatFeed);\n/**\n * Component is described here.\n *\n * @example ./examples/AvatarGroup.md\n */\n\nvar AvatarGroup = /*#__PURE__*/function (_React$Component) {\n  _inherits(AvatarGroup, _React$Component);\n\n  function AvatarGroup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AvatarGroup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AvatarGroup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickUser\", function (e, user) {\n      var onClickUser = _this.props.onClickUser;\n\n      if (onClickUser) {\n        e.stopPropagation();\n        return onClickUser(userOrDefault(user));\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(AvatarGroup, [{\n    key: \"_getOnClickUser\",\n    value: function _getOnClickUser(user) {\n      var _this2 = this;\n\n      return this.props.onClickUser ? function (e) {\n        return _this2.onClickUser(e, user);\n      } : undefined;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React__default.createElement(\"div\", {\n        className: \"raf-avatar-group\"\n      }, this.props.users && this.props.users.slice(0, this.props.limit).map(function (user, i) {\n        return React__default.createElement(\"div\", {\n          className: \"raf-avatar-group__avatar\",\n          key: \"avatar-\".concat(i)\n        }, React__default.createElement(Avatar, {\n          onClick: _this3._getOnClickUser(user),\n          image: user && user.data.profileImage,\n          size: _this3.props.avatarSize,\n          circle: true\n        }));\n      }));\n    }\n  }]);\n\n  return AvatarGroup;\n}(React__default.Component);\n\n_defineProperty(AvatarGroup, \"defaultProps\", {\n  avatarSize: 30,\n  limit: 5\n});\n/**\n * Component is described here.\n *\n * @example ./examples/AttachedActivity.md\n */\n\n\nvar AttachedActivity = /*#__PURE__*/function (_React$Component) {\n  _inherits(AttachedActivity, _React$Component);\n\n  function AttachedActivity() {\n    _classCallCheck(this, AttachedActivity);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AttachedActivity).apply(this, arguments));\n  }\n\n  _createClass(AttachedActivity, [{\n    key: \"render\",\n    value: function render() {\n      var activity = this.props.activity;\n      var images = activity.attachments !== undefined && activity.attachments.images !== undefined ? activity.attachments.images : [];\n      var actor = userOrDefault(activity.actor);\n\n      if (activity.verb === 'repost' || activity.verb === 'post' || activity.verb === 'comment') {\n        return React__default.createElement(\"div\", {\n          className: \"raf-attached-activity\"\n        }, images.length === 0 && React__default.createElement(React__default.Fragment, null, React__default.createElement(\"p\", {\n          className: \"raf-attached-activity__author\"\n        }, React__default.createElement(\"strong\", null, actor.data.name)), React__default.createElement(\"p\", {\n          className: \"raf-attached-activity__content\"\n        }, activity.object)), images.length > 0 && React__default.createElement(\"div\", {\n          className: \"raf-attached-activity__images\"\n        }, images.slice(0, 5).map(function (image, i) {\n          return React__default.createElement(Thumbnail, {\n            image: image,\n            size: 50,\n            key: \"image-\".concat(i)\n          });\n        })));\n      }\n\n      return null;\n    }\n  }]);\n\n  return AttachedActivity;\n}(React__default.Component);\n/**\n * Simple wrapper for a small dropdown.\n *\n * @example ./examples/Dropdown.md\n */\n\n\nvar Dropdown = /*#__PURE__*/function (_React$Component) {\n  _inherits(Dropdown, _React$Component);\n\n  function Dropdown(props) {\n    var _this;\n\n    _classCallCheck(this, Dropdown);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dropdown).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"dropdownBox\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hideMenu\", function (e) {\n      // $FlowFixMe\n      if (!_this.dropdownBox.current.contains(e.target)) {\n        _this.setState({\n          open: false\n        }, function () {\n          document.removeEventListener('click', _this.hideMenu);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMenu\", function (e) {\n      e.stopPropagation();\n\n      _this.setState({\n        open: true\n      }, function () {\n        document.addEventListener('click', _this.hideMenu);\n      });\n    });\n\n    _this.showMenu = _this.showMenu.bind(_assertThisInitialized(_this));\n    _this.hideMenu = _this.hideMenu.bind(_assertThisInitialized(_this));\n    _this.dropdownBox = createRef();\n    _this.state = {\n      open: false\n    };\n    return _this;\n  }\n\n  _createClass(Dropdown, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // $FlowFixMe\n      document.removeEventListener('click', this.hideMenu);\n    } // $FlowFixMe\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-dropdown\"\n      }, createElement(IconButton, {\n        onClick: this.showMenu\n      }, createElement(\"svg\", {\n        className: \"raf-dropdown__button\",\n        width: \"12\",\n        height: \"8\",\n        viewBox: \"0 0 12 8\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, createElement(\"path\", {\n        d: \"M1.41 0L6 4.77 10.59 0 12 1.469l-6 6.25-6-6.25z\",\n        fill: \"#A0B2B8\",\n        fillRule: \"evenodd\"\n      }))), this.state.open && createElement(\"div\", {\n        className: \"raf-dropdown__box\",\n        ref: this.dropdownBox\n      }, this.props.children));\n    }\n  }]);\n\n  return Dropdown;\n}(Component);\n/**\n * Component is described here.\n *\n * @example ./examples/Notification.md\n */\n\n\nvar Notification = /*#__PURE__*/function (_React$Component) {\n  _inherits(Notification, _React$Component);\n\n  function Notification() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Notification);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Notification)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"getUsers\", function (activities) {\n      return activities.map(function (item) {\n        return userOrDefault(item.actor);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickUser\", function (e, actor) {\n      var onClickUser = _this.props.onClickUser;\n\n      if (onClickUser) {\n        e.stopPropagation();\n        return onClickUser(userOrDefault(actor));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickNotification\", function (e) {\n      var onClickNotification = _this.props.onClickNotification;\n\n      if (onClickNotification) {\n        e.stopPropagation();\n        return onClickNotification(_this.props.activityGroup);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(Notification, [{\n    key: \"_getOnClickUser\",\n    value: function _getOnClickUser(actor) {\n      var _this2 = this;\n\n      return this.props.onClickUser ? function (e) {\n        return _this2.onClickUser(e, actor);\n      } : undefined;\n    }\n  }, {\n    key: \"_getOnClickNotification\",\n    value: function _getOnClickNotification() {\n      return this.props.onClickNotification ? this.onClickNotification : undefined;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var headerText, headerSubtext;\n      var _this$props = this.props,\n          activityGroup = _this$props.activityGroup,\n          onMarkAsRead = _this$props.onMarkAsRead,\n          t = _this$props.t,\n          tDateTimeParser = _this$props.tDateTimeParser;\n      var activities = activityGroup.activities;\n      var latestActivity = activities[0];\n      var lastActor = userOrDefault(latestActivity.actor);\n\n      if (typeof latestActivity.object === 'string') {\n        return null;\n      }\n\n      if (activities.length === 1) {\n        switch (latestActivity.verb) {\n          case 'like':\n            headerText = t('{{ actorName }} liked your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'repost':\n            headerText = t('{{ actorName }} reposted your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'follow':\n            headerText = t('{{ actorName }} followed you', {\n              actorName: lastActor.data.name\n            });\n            break;\n\n          case 'comment':\n            headerText = t('{{ actorName }} commented on your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          default:\n            console.warn('No notification styling found for your verb, please create your own custom Notification group.');\n        }\n      } else if (activities.length > 1 && activities.length < 1 + 1 + 1) {\n        switch (latestActivity.verb) {\n          case 'like':\n            headerText = t('{{ actorName }} and 1 other liked your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'repost':\n            headerText = t('{{ actorName }} and 1 other reposted your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'follow':\n            headerText = t('{{ actorName }} and 1 other followed you', {\n              actorName: lastActor.data.name\n            });\n            break;\n\n          case 'comment':\n            headerText = t('{{ actorName }} and 1 other commented on your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          default:\n            console.warn('No notification styling found for your verb, please create your own custom Notification group.');\n        }\n      } else {\n        switch (latestActivity.verb) {\n          case 'like':\n            headerText = t('{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'repost':\n            headerText = t('{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          case 'follow':\n            headerText = t('{{ actorName }} and {{ countOtherActors }} others followed you', {\n              actorName: lastActor.data.name\n            });\n            break;\n\n          case 'comment':\n            headerText = t('{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}', {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb\n            });\n            break;\n\n          default:\n            console.warn('No notification styling found for your verb, please create your own custom Notification group.');\n        }\n      }\n\n      return React__default.createElement(\"div\", {\n        onClick: this._getOnClickNotification(),\n        className: 'raf-notification' + (activityGroup.is_read ? ' raf-notification--read' : '')\n      }, React__default.createElement(Avatar, {\n        onClick: this._getOnClickUser(lastActor),\n        image: lastActor.data.profileImage,\n        circle: true,\n        size: 30\n      }), React__default.createElement(\"div\", {\n        className: \"raf-notification__content\"\n      }, React__default.createElement(\"div\", {\n        className: \"raf-notification__header\"\n      }, React__default.createElement(\"strong\", null, headerText), \" \", headerSubtext, !activityGroup.is_read && onMarkAsRead && React__default.createElement(Dropdown, null, React__default.createElement(\"div\", null, React__default.createElement(Link, {\n        onClick: function onClick(e) {\n          e.stopPropagation();\n          onMarkAsRead(activityGroup);\n        }\n      }, \"Mark\\xA0as\\xA0read\")))), React__default.createElement(\"div\", null, React__default.createElement(\"small\", null, humanizeTimestamp(latestActivity.time, tDateTimeParser))), latestActivity.verb !== 'follow' ? React__default.createElement(AttachedActivity, {\n        activity: latestActivity.object\n      }) : null), React__default.createElement(\"div\", {\n        className: \"raf-notification__extra\"\n      }, activities.length > 1 && latestActivity.verb === 'follow' ? React__default.createElement(AvatarGroup, {\n        onClickUser: this.props.onClickUser,\n        avatarSize: 30,\n        users: this.getUsers(activities.slice(1, activities.length))\n      }) : null));\n    }\n  }]);\n\n  return Notification;\n}(React__default.Component);\n\nvar Notification$1 = withTranslationContext(Notification);\n/**\n * Renders a notificationfeed, this component is a StreamApp consumer and must\n * always be a child of the `<StreamApp>` element.\n * @example ./examples/NotificationFeed.md\n */\n\nvar NotificationFeed = /*#__PURE__*/function (_React$Component) {\n  _inherits(NotificationFeed, _React$Component);\n\n  function NotificationFeed() {\n    _classCallCheck(this, NotificationFeed);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotificationFeed).apply(this, arguments));\n  }\n\n  _createClass(NotificationFeed, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return createElement(Feed, {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n        options: makeDefaultOptions(this.props.options),\n        notify: this.props.notify,\n        doFeedRequest: this.props.doFeedRequest,\n        doActivityDeleteRequest: this.props.doActivityDeleteRequest,\n        doReactionAddRequest: this.props.doReactionAddRequest,\n        doReactionDeleteRequest: this.props.doReactionDeleteRequest,\n        doChildReactionAddRequest: this.props.doChildReactionAddRequest,\n        doChildReactionDeleteRequest: this.props.doChildReactionDeleteRequest\n      }, createElement(FeedContext.Consumer, null, function (feedCtx) {\n        return createElement(NotificationFeedInner, _extends({}, _this.props, feedCtx));\n      }));\n    }\n  }]);\n\n  return NotificationFeed;\n}(Component);\n\n_defineProperty(NotificationFeed, \"defaultProps\", {\n  feedGroup: 'notification',\n  Group: Notification$1,\n  notify: false,\n  Notifier: NewActivitiesNotification$1,\n  Paginator: LoadMorePaginator,\n  Placeholder: FeedPlaceholder$1\n});\n\nvar makeDefaultOptions = function makeDefaultOptions(options) {\n  var copy = _objectSpread({}, options);\n\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n\n  return copy;\n};\n\nvar NotificationFeedInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(NotificationFeedInner, _React$Component2);\n\n  function NotificationFeedInner() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, NotificationFeedInner);\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NotificationFeedInner)).call.apply(_getPrototypeOf2, [this].concat(_args)));\n\n    _defineProperty(_assertThisInitialized(_this2), \"listRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this2), \"_refresh\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var ref;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.props.refresh(makeDefaultOptions(_this2.props.options));\n\n            case 2:\n              ref = _this2.listRef;\n\n              if (ref && ref.current) {\n                ref.current.scrollToOffset({\n                  offset: 0\n                });\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this2), \"_renderWrappedGroup\", function (_ref2) {\n      var item = _ref2.item;\n      return createElement(ImmutableItemWrapper$1, {\n        renderItem: _this2._renderGroup,\n        item: item,\n        feedGroup: _this2.props.feedGroup,\n        userId: _this2.props.userId,\n        key: item.get('id')\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_renderGroup\", function (item) {\n      var args = {\n        activityGroup: item,\n        feedGroup: _this2.props.feedGroup,\n        userId: _this2.props.userId,\n        onToggleReaction: _this2.props.onToggleReaction,\n        onAddReaction: _this2.props.onAddReaction,\n        onRemoveReaction: _this2.props.onRemoveReaction,\n        onToggleChildReaction: _this2.props.onToggleChildReaction,\n        onAddChildReaction: _this2.props.onAddChildReaction,\n        onRemoveChildReaction: _this2.props.onRemoveChildReaction,\n        onRemoveActivity: _this2.props.onRemoveActivity,\n        onMarkAsRead: _this2.props.onMarkAsRead,\n        onMarkAsSeen: _this2.props.onMarkAsSeen\n      };\n      return smartRender(_this2.props.Group, args);\n    });\n\n    return _this2;\n  }\n\n  _createClass(NotificationFeedInner, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._refresh();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.activities.clear();\n      this.props.activityOrder.splice(0, this.props.activityOrder.length);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var notifierProps = {\n        adds: this.props.realtimeAdds,\n        deletes: this.props.realtimeDeletes,\n        onClick: this._refresh\n      };\n      var _this$props = this.props,\n          loadNextPage = _this$props.loadNextPage,\n          hasNextPage = _this$props.hasNextPage,\n          refreshing = _this$props.refreshing,\n          hasDoneRequest = _this$props.hasDoneRequest;\n\n      if (this.props.activities.size === 0 && hasDoneRequest) {\n        return createElement(Fragment, null, smartRender(this.props.Notifier, notifierProps), smartRender(this.props.Placeholder));\n      }\n\n      if (refreshing && !hasDoneRequest) {\n        return createElement(\"div\", {\n          style: {\n            padding: 40,\n            backgroundColor: 'rgb(247, 247, 247'\n          }\n        }, createElement(LoadingIndicator, null));\n      }\n\n      return createElement(Fragment, null, smartRender(this.props.Notifier, notifierProps), smartRender(this.props.Paginator, {\n        loadNextPage: loadNextPage,\n        hasNextPage: hasNextPage,\n        refreshing: refreshing,\n        children: this.props.activityOrder.map(function (id) {\n          return _this3._renderWrappedGroup({\n            item: _this3.props.activities.get(id)\n          });\n        })\n      }));\n    }\n  }]);\n\n  return NotificationFeedInner;\n}(Component);\n\nvar ImmutableItemWrapper$1 = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ImmutableItemWrapper, _React$PureComponent);\n\n  function ImmutableItemWrapper() {\n    _classCallCheck(this, ImmutableItemWrapper);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutableItemWrapper).apply(this, arguments));\n  }\n\n  _createClass(ImmutableItemWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.renderItem(this.props.item.toJS());\n    }\n  }]);\n\n  return ImmutableItemWrapper;\n}(PureComponent);\n/**\n * Shows the detail of a single activity\n * @example ./examples/SinglePost.md\n */\n\n\nvar SinglePost = /*#__PURE__*/function (_React$Component) {\n  _inherits(SinglePost, _React$Component);\n\n  function SinglePost() {\n    _classCallCheck(this, SinglePost);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SinglePost).apply(this, arguments));\n  }\n\n  _createClass(SinglePost, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return React__default.createElement(React__default.Fragment, null, React__default.createElement(FlatFeed$1, {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n        options: _objectSpread({\n          withRecentReactions: true\n        }, this.props.options),\n        analyticsLocation: this.props.analyticsLocation,\n        Activity: this.props.Activity,\n        doFeedRequest: function doFeedRequest(client, feedGroup, userId, options) {\n          return client.feed(feedGroup, userId).getActivityDetail(_this.props.activityId, options);\n        },\n        doActivityDeleteRequest: this.props.doActivityDeleteRequest,\n        doReactionAddRequest: this.props.doReactionAddRequest,\n        doReactionDeleteRequest: this.props.doReactionDeleteRequest,\n        doChildReactionAddRequest: this.props.doChildReactionAddRequest,\n        doChildReactionDeleteRequest: this.props.doChildReactionDeleteRequest,\n        doReactionsFilterRequest: this.props.doReactionsFilterRequest\n      }));\n    }\n  }]);\n\n  return SinglePost;\n}(React__default.Component);\n/**\n * Simple Components that renders a panel. To be combined with PanelHeader, PanelContent, PanelFooter. Used by the library to render the B2BActivity and StatusUpdateForm\n *\n * @example ./examples/Panel.md\n */\n\n\nvar Panel = /*#__PURE__*/function (_React$Component) {\n  _inherits(Panel, _React$Component);\n\n  function Panel() {\n    _classCallCheck(this, Panel);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Panel).apply(this, arguments));\n  }\n\n  _createClass(Panel, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-panel raf-panel--\".concat(this.props.panelStyle)\n      }, this.props.children);\n    }\n  }]);\n\n  return Panel;\n}(Component);\n\n_defineProperty(Panel, \"defaultProps\", {\n  panelStyle: 'rounded'\n});\n\nvar PanelHeading = /*#__PURE__*/function (_React$Component) {\n  _inherits(PanelHeading, _React$Component);\n\n  function PanelHeading() {\n    _classCallCheck(this, PanelHeading);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PanelHeading).apply(this, arguments));\n  }\n\n  _createClass(PanelHeading, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-panel-header\"\n      }, this.props.children);\n    }\n  }]);\n\n  return PanelHeading;\n}(Component);\n\nvar PanelFooter = /*#__PURE__*/function (_React$Component) {\n  _inherits(PanelFooter, _React$Component);\n\n  function PanelFooter() {\n    _classCallCheck(this, PanelFooter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PanelFooter).apply(this, arguments));\n  }\n\n  _createClass(PanelFooter, [{\n    key: \"render\",\n    value: function render() {\n      return React__default.createElement(\"div\", {\n        className: \"raf-panel-footer\"\n      }, this.props.children);\n    }\n  }]);\n\n  return PanelFooter;\n}(React__default.Component);\n\nvar PanelContent = /*#__PURE__*/function (_React$Component) {\n  _inherits(PanelContent, _React$Component);\n\n  function PanelContent() {\n    _classCallCheck(this, PanelContent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PanelContent).apply(this, arguments));\n  }\n\n  _createClass(PanelContent, [{\n    key: \"render\",\n    value: function render() {\n      return React__default.createElement(\"div\", {\n        className: \"raf-panel-content\"\n      }, this.props.children);\n    }\n  }]);\n\n  return PanelContent;\n}(React__default.Component);\n\nvar AutocompleteItem = function AutocompleteItem(_ref) {\n  var _ref$entity = _ref.entity,\n      id = _ref$entity.id,\n      _native = _ref$entity[\"native\"];\n  return createElement(\"div\", null, _native, \" \", id);\n};\n/**\n * Component is described here.\n *\n * @example ./examples/Textarea.md\n */\n\n\nvar Textarea = /*#__PURE__*/function (_React$Component) {\n  _inherits(Textarea, _React$Component);\n\n  function Textarea() {\n    _classCallCheck(this, Textarea);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Textarea).apply(this, arguments));\n  }\n\n  _createClass(Textarea, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          innerRef = _this$props.innerRef,\n          trigger = _this$props.trigger;\n      return createElement(ReactTextareaAutocomplete, {\n        loadingComponent: LoadingIndicator,\n        trigger: _objectSpread({\n          ':': {\n            dataProvider: function dataProvider(token) {\n              var emojis = emojiIndex.search(token) || [];\n              return emojis.slice(0, 10);\n            },\n            component: AutocompleteItem,\n            output: function output(item) {\n              return {\n                key: item.id,\n                text: item[\"native\"],\n                caretPosition: 'next'\n              };\n            }\n          }\n        }, trigger),\n        innerRef: innerRef && function (el) {\n          if (typeof innerRef === 'function') {\n            innerRef(el);\n          } else if (_this.props.innerRef != null) {\n            innerRef.current = el;\n          }\n        },\n        rows: this.props.rows,\n        maxLength: this.props.maxLength,\n        className: \"raf-textarea__textarea\",\n        containerClassName: \"raf-textarea\",\n        dropdownClassName: \"raf-emojisearch\",\n        listClassName: \"raf-emojisearch__list\",\n        itemClassName: \"raf-emojisearch__item\",\n        placeholder: this.props.placeholder,\n        onChange: this.props.onChange,\n        onSelect: this.props.onChange,\n        onPaste: this.props.onPaste,\n        value: this.props.value\n      });\n    }\n  }]);\n\n  return Textarea;\n}(Component);\n\n_defineProperty(Textarea, \"defaultProps\", {\n  rows: 3,\n  placeholder: 'Share your opinion',\n  trigger: {}\n});\n/**\n * Component is described here.\n *\n * @example ./examples/EmojiPicker.md\n */\n\n\nvar EmojiPicker = /*#__PURE__*/function (_React$Component) {\n  _inherits(EmojiPicker, _React$Component);\n\n  function EmojiPicker() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EmojiPicker);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EmojiPicker)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"emojiPicker\", React__default.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      open: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideMenu\", function (e) {\n      var current = _this.emojiPicker.current;\n\n      if (current && !current.contains(e.target)) {\n        _this.setState({\n          open: false\n        }, function () {\n          document.removeEventListener('click', _this.hideMenu);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMenu\", function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        open: true\n      }, function () {\n        document.addEventListener('click', _this.hideMenu);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(EmojiPicker, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.hideMenu);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var t = this.props.t;\n      return React__default.createElement(\"div\", {\n        className: \"raf-emoji-picker\"\n      }, ' ', this.state.open && React__default.createElement(\"div\", {\n        className: \"raf-emoji-picker__container\",\n        ref: this.emojiPicker\n      }, React__default.createElement(Picker, {\n        emoji: \"point_up\",\n        title: t('Pick your emoji'),\n        onSelect: this.props.onSelect\n      })), React__default.createElement(\"div\", {\n        role: \"button\",\n        onClick: this.showMenu,\n        className: \"raf-emoji-picker__button\"\n      }, React__default.createElement(\"svg\", {\n        width: \"20\",\n        height: \"20\",\n        viewBox: \"0 0 20 20\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, React__default.createElement(\"path\", {\n        d: \"M10 15.498c2.33 0 4.304-1.456 5.106-3.5H4.892c.802 2.044 2.777 3.5 5.107 3.5zm-3.5-6.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-3.5 9a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8zm-.006-18C4.467-.002 0 4.475 0 9.998s4.468 10 9.995 10c5.526 0 10.005-4.477 10.005-10s-4.479-10-10.005-10z\",\n        fill: \"#A0B2B8\",\n        fillRule: \"nonzero\"\n      }))));\n    }\n  }]);\n\n  return EmojiPicker;\n}(React__default.Component);\n\nvar EmojiPicker$1 = withTranslationContext(EmojiPicker);\n/**\n * Component is described here.\n *\n * @example ./examples/Title.md\n */\n\nvar Title = /*#__PURE__*/function (_React$Component) {\n  _inherits(Title, _React$Component);\n\n  function Title() {\n    _classCallCheck(this, Title);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Title).apply(this, arguments));\n  }\n\n  _createClass(Title, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-title\",\n        style: {\n          fontSize: this.props.size\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return Title;\n}(Component);\n\n_defineProperty(Title, \"defaultProps\", {\n  size: 18\n});\n/**\n * Component is described here.\n *\n * @example ./examples/StatusUpdateForm.md\n */\n\n\nvar StatusUpdateForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(StatusUpdateForm, _React$Component);\n\n  function StatusUpdateForm() {\n    _classCallCheck(this, StatusUpdateForm);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(StatusUpdateForm).apply(this, arguments));\n  }\n\n  _createClass(StatusUpdateForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          Header = _this$props.Header;\n      var HeaderComponent = Header ? Header : createElement(Title, null, t('New Post'));\n\n      var forwardedProps = _objectSpread({}, this.props, {\n        Header: HeaderComponent\n      });\n\n      return createElement(StreamApp.Consumer, null, function (appCtx) {\n        return createElement(StatusUpdateFormInner, _extends({}, forwardedProps, appCtx));\n      });\n    }\n  }]);\n\n  return StatusUpdateForm;\n}(Component);\n\n_defineProperty(StatusUpdateForm, \"defaultProps\", {\n  feedGroup: 'user',\n  activityVerb: 'post',\n  modifyActivityData: function modifyActivityData(d) {\n    return d;\n  }\n});\n\nvar StatusUpdateFormInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(StatusUpdateFormInner, _React$Component2);\n\n  function StatusUpdateFormInner(props) {\n    var _this;\n\n    _classCallCheck(this, StatusUpdateFormInner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StatusUpdateFormInner).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_handleOgDebounced\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"textInputRef\", createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"attachTextInputRef\", function (el) {\n      _this.textInputRef.current = el;\n\n      if (typeof _this.props.innerRef === 'function') {\n        _this.props.innerRef(el);\n      } else if (_this.props.innerRef != null) {\n        _this.props.innerRef.current = el;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      text: '',\n      imageUploads: {},\n      imageOrder: [],\n      fileUploads: {},\n      fileOrder: [],\n      ogUrlOrder: [],\n      ogStateByUrl: {},\n      ogActiveUrl: null,\n      submitting: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_dismissOg\", function (og) {\n      if (og && og.url != null) {\n        _this.setState(function (prevState) {\n          var ogStateByUrl = prevState.ogStateByUrl;\n\n          for (var url in ogStateByUrl) {\n            ogStateByUrl[url].dismissed = true;\n          }\n\n          return {\n            ogActiveUrl: null,\n            ogStateByUrl: ogStateByUrl\n          };\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_text\", function () {\n      return _this.state.text.trim();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_object\", function () {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _this._orderedImages()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var image = _step.value;\n\n          if (image.url) {\n            return image.url;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return _this._text();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_orderedImages\", function () {\n      return _this.state.imageOrder.map(function (id) {\n        return _this.state.imageUploads[id];\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadedImages\", function () {\n      return _this._orderedImages().filter(function (upload) {\n        return upload.url;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_orderedFiles\", function () {\n      return _this.state.fileOrder.map(function (id) {\n        return _this.state.fileUploads[id];\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadedFiles\", function () {\n      return _this._orderedFiles().filter(function (upload) {\n        return upload.url;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_orderedOgStates\", function () {\n      return _this.state.ogUrlOrder.map(function (url) {\n        return _this.state.ogStateByUrl[url];\n      }).filter(Boolean);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_isOgScraping\", function () {\n      return _this._orderedOgStates().some(function (state) {\n        return state.scrapingActive;\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_availableOg\", function () {\n      return _this._orderedOgStates().map(function (state) {\n        return state.data;\n      }).filter(Boolean);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_activeOg\", function () {\n      var ogActiveUrl = _this.state.ogActiveUrl;\n\n      if (ogActiveUrl) {\n        return _this.state.ogStateByUrl[ogActiveUrl].data;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_canSubmit\", function () {\n      return Boolean(_this._object()) && _this._orderedImages().every(function (upload) {\n        return upload.state !== 'uploading';\n      }) && _this._orderedFiles().every(function (upload) {\n        return upload.state !== 'uploading';\n      }) && !_this._isOgScraping() && !_this.state.submitting;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmitForm\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                _this.setState({\n                  submitting: true\n                });\n\n                _context.prev = 2;\n                _context.next = 5;\n                return _this.addActivity();\n\n              case 5:\n                response = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](2);\n\n                _this.setState({\n                  submitting: false\n                });\n\n                _this.props.errorHandler(_context.t0, 'add-activity', {\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context.abrupt(\"return\");\n\n              case 13:\n                _this.setState({\n                  text: '',\n                  imageUploads: {},\n                  imageOrder: [],\n                  fileUploads: {},\n                  fileOrder: [],\n                  ogUrlOrder: [],\n                  ogStateByUrl: {},\n                  ogActiveUrl: null,\n                  submitting: false\n                });\n\n                if (_this.props.onSuccess) {\n                  _this.props.onSuccess(response);\n                }\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_getTextAreaElement\", function () {\n      return _this.textInputRef.current;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onSelectEmoji\", function (emoji) {\n      return _this._insertText(emoji[\"native\"]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_insertText\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(insertedText) {\n        var newCursorPosition, textareaElement;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.setState(function (prevState) {\n                  var prevText = prevState.text;\n\n                  var textareaElement = _this._getTextAreaElement();\n\n                  if (!textareaElement) {\n                    return {\n                      text: prevText + insertedText\n                    };\n                  } // Insert emoji at previous cursor position\n\n\n                  var selectionStart = textareaElement.selectionStart,\n                      selectionEnd = textareaElement.selectionEnd;\n                  newCursorPosition = selectionStart + insertedText.length;\n                  return {\n                    text: prevText.slice(0, selectionStart) + insertedText + prevText.slice(selectionEnd)\n                  };\n                });\n\n              case 2:\n                textareaElement = _this._getTextAreaElement();\n\n                if (!(!textareaElement || newCursorPosition == null)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 5:\n                // Update cursorPosition\n                textareaElement.selectionStart = newCursorPosition;\n                textareaElement.selectionEnd = newCursorPosition;\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadNewFiles\", function (files) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = files[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var file = _step2.value;\n\n          if (file.type.startsWith('image/')) {\n            _this._uploadNewImage(file);\n          } else if (file instanceof File) {\n            _this._uploadNewFile(file);\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadNewImage\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(file) {\n        var id, reader;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                id = generateRandomId();\n                _context3.next = 3;\n                return _this.setState(function (prevState) {\n                  prevState.imageUploads[id] = {\n                    id: id,\n                    file: file,\n                    state: 'uploading'\n                  };\n                  return {\n                    imageOrder: prevState.imageOrder.concat(id),\n                    imageUploads: prevState.imageUploads\n                  };\n                });\n\n              case 3:\n                if (FileReader) {\n                  // TODO: Possibly use URL.createObjectURL instead. However, then we need\n                  // to release the previews when not used anymore though.\n                  reader = new FileReader();\n\n                  reader.onload = function (event) {\n                    _this.setState(function (prevState) {\n                      prevState.imageUploads[id].previewUri = event.target.result;\n                      return {\n                        imageUploads: prevState.imageUploads\n                      };\n                    });\n                  };\n\n                  reader.readAsDataURL(file);\n                }\n\n                return _context3.abrupt(\"return\", _this._uploadImage(id));\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadNewFile\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(file) {\n        var id;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                id = generateRandomId();\n                _context4.next = 3;\n                return _this.setState(function (prevState) {\n                  prevState.fileUploads[id] = {\n                    id: id,\n                    file: file,\n                    state: 'uploading'\n                  };\n                  return {\n                    fileOrder: prevState.fileOrder.concat(id),\n                    fileUploads: prevState.fileUploads\n                  };\n                });\n\n              case 3:\n                return _context4.abrupt(\"return\", _this._uploadFile(id));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadImage\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id) {\n        var img, file, response, alreadyRemoved;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                img = _this.state.imageUploads[id];\n\n                if (img) {\n                  _context5.next = 3;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 3:\n                file = img.file;\n                _context5.next = 6;\n                return _this.setState(function (prevState) {\n                  prevState.imageUploads[id].state = 'uploading';\n                  return {\n                    imageUploads: prevState.imageUploads\n                  };\n                });\n\n              case 6:\n                response = {};\n                response = {};\n                _context5.prev = 8;\n                _context5.next = 11;\n                return _this.props.client.images.upload(file);\n\n              case 11:\n                response = _context5.sent;\n                _context5.next = 22;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](8);\n                console.warn(_context5.t0);\n                alreadyRemoved = false;\n                _context5.next = 20;\n                return _this.setState(function (prevState) {\n                  var image = prevState.imageUploads[id];\n\n                  if (!image) {\n                    alreadyRemoved = true;\n                    return {};\n                  }\n\n                  image.state = 'failed';\n                  return {\n                    imageUploads: prevState.imageUploads\n                  };\n                });\n\n              case 20:\n                if (!alreadyRemoved) {\n                  _this.props.errorHandler(_context5.t0, 'upload-image', {\n                    feedGroup: _this.props.feedGroup,\n                    userId: _this.props.userId\n                  });\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 22:\n                _context5.next = 24;\n                return _this.setState(function (prevState) {\n                  img.state = 'finished';\n                  img.url = response.file;\n                  return {\n                    imageUploads: prevState.imageUploads\n                  };\n                });\n\n              case 24:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[8, 14]]);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_uploadFile\", /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id) {\n        var upload, file, response;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                upload = _this.state.fileUploads[id];\n\n                if (upload) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 3:\n                file = upload.file;\n                _context6.next = 6;\n                return _this.setState(function (prevState) {\n                  prevState.fileUploads[id].state = 'uploading';\n                  return {\n                    fileUploads: prevState.fileUploads\n                  };\n                });\n\n              case 6:\n                response = {};\n                response = {};\n                _context6.prev = 8;\n                _context6.next = 11;\n                return _this.props.client.files.upload(file);\n\n              case 11:\n                response = _context6.sent;\n                _context6.next = 21;\n                break;\n\n              case 14:\n                _context6.prev = 14;\n                _context6.t0 = _context6[\"catch\"](8);\n                console.warn(_context6.t0);\n                _context6.next = 19;\n                return _this.setState(function (prevState) {\n                  if (prevState.fileUploads[id]) {\n                    prevState.fileUploads[id].state = 'failed';\n                    return {\n                      fileUploads: prevState.fileUploads\n                    };\n                  }\n\n                  return {};\n                });\n\n              case 19:\n                _this.props.errorHandler(_context6.t0, 'upload-image', {\n                  feedGroup: _this.props.feedGroup,\n                  userId: _this.props.userId\n                });\n\n                return _context6.abrupt(\"return\");\n\n              case 21:\n                _context6.next = 23;\n                return _this.setState(function (prevState) {\n                  if (prevState.fileUploads[id]) {\n                    prevState.fileUploads[id].state = 'finished';\n                    prevState.fileUploads[id].url = response.file;\n                    return {\n                      fileUploads: prevState.fileUploads\n                    };\n                  }\n\n                  return {};\n                });\n\n              case 23:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[8, 14]]);\n      }));\n\n      return function (_x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_removeImage\", function (id) {\n      // TODO: cancel upload if still uploading\n      _this.setState(function (prevState) {\n        var img = prevState.imageUploads[id];\n\n        if (!img) {\n          return {};\n        }\n\n        delete prevState.imageUploads[id];\n        return {\n          imageUploads: prevState.imageUploads,\n          imageOrder: prevState.imageOrder.filter(function (_id) {\n            return id !== _id;\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_removeFile\", function (id) {\n      // TODO: cancel upload if still uploading\n      _this.setState(function (prevState) {\n        var upload = prevState.fileUploads[id];\n\n        if (!upload) {\n          return {};\n        }\n\n        delete prevState.fileUploads[id];\n        return {\n          fileUploads: prevState.fileUploads,\n          fileOrder: prevState.fileOrder.filter(function (_id) {\n            return id !== _id;\n          })\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_onChange\", function (event) {\n      var text = inputValueFromEvent(event);\n\n      if (text == null) {\n        return;\n      }\n\n      _this.setState({\n        text: text\n      });\n\n      _this._handleOgDebounced(text);\n    });\n\n    _this._handleOgDebounced = _debounce(_this.handleOG, 250, {\n      leading: true,\n      trailing: true\n    });\n    return _this;\n  }\n\n  _createClass(StatusUpdateFormInner, [{\n    key: \"handleOG\",\n    value: function handleOG(text) {\n      var _this2 = this;\n\n      var newUrls;\n      var removedUrls;\n      var urlInfos = anchorme(text, {\n        list: true,\n        exclude: function exclude(info) {\n          return info.protocol !== 'https://' && info.protocol !== 'http://';\n        }\n      });\n\n      var urls = _uniq(urlInfos.map(function (info) {\n        return info.protocol + info.encoded;\n      }));\n\n      this.setState(function (prevState) {\n        var oldUrls = prevState.ogUrlOrder;\n        newUrls = _difference(urls, oldUrls);\n        removedUrls = _difference(oldUrls, urls);\n        var newState = {\n          ogUrlOrder: urls\n        };\n\n        if (!_includes(urls, prevState.ogActiveUrl)) {\n          // !urls.includes(prevState.ogActiveUrl) replaced with lodash\n          newState.ogActiveUrl = null;\n          var _iteratorNormalCompletion3 = true;\n          var _didIteratorError3 = false;\n          var _iteratorError3 = undefined;\n\n          try {\n            for (var _iterator3 = urls[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n              var url = _step3.value;\n              var ogState = prevState.ogStateByUrl[url];\n\n              if (ogState && ogState.data && !ogState.dismissed) {\n                newState.ogActiveUrl = url;\n                break;\n              }\n            }\n          } catch (err) {\n            _didIteratorError3 = true;\n            _iteratorError3 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n                _iterator3[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError3) {\n                throw _iteratorError3;\n              }\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = removedUrls[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var _url = _step4.value;\n            delete prevState.ogStateByUrl[_url];\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n              _iterator4[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n          for (var _iterator5 = newUrls[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            var _url2 = _step5.value;\n            prevState.ogStateByUrl[_url2] = {\n              scrapingActive: true,\n              dismissed: false\n            };\n          }\n        } catch (err) {\n          _didIteratorError5 = true;\n          _iteratorError5 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n              _iterator5[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError5) {\n              throw _iteratorError5;\n            }\n          }\n        }\n\n        newState.ogStateByUrl = prevState.ogStateByUrl;\n        return newState;\n      }, function () {\n        newUrls.forEach( /*#__PURE__*/function () {\n          var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(url) {\n            var resp;\n            return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n              while (1) {\n                switch (_context7.prev = _context7.next) {\n                  case 0:\n                    _context7.prev = 0;\n                    _context7.next = 3;\n                    return _this2.props.client.og(url);\n\n                  case 3:\n                    resp = _context7.sent;\n                    _context7.next = 11;\n                    break;\n\n                  case 6:\n                    _context7.prev = 6;\n                    _context7.t0 = _context7[\"catch\"](0);\n                    console.warn(_context7.t0);\n\n                    _this2.setState(function (prevState) {\n                      prevState.ogStateByUrl[url] = {\n                        scrapingActive: false,\n                        dismissed: false\n                      };\n                      return {\n                        ogStateByUrl: prevState.ogStateByUrl\n                      };\n                    });\n\n                    return _context7.abrupt(\"return\");\n\n                  case 11:\n                    resp.url = url;\n\n                    _this2.setState(function (prevState) {\n                      prevState.ogStateByUrl[url] = {\n                        scrapingActive: false,\n                        data: resp,\n                        dismissed: false\n                      };\n                      var newState = {\n                        ogStateByUrl: prevState.ogStateByUrl\n                      };\n\n                      if (!prevState.ogActiveUrl) {\n                        newState.ogActiveUrl = url;\n                      }\n\n                      return newState;\n                    });\n\n                  case 13:\n                  case \"end\":\n                    return _context7.stop();\n                }\n              }\n            }, _callee7, null, [[0, 6]]);\n          }));\n\n          return function (_x7) {\n            return _ref7.apply(this, arguments);\n          };\n        }());\n      });\n    }\n  }, {\n    key: \"addActivity\",\n    value: function () {\n      var _addActivity = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        var activity, uploadedImages, uploadedFiles, attachments, modifiedActivity;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                activity = {\n                  actor: this.props.client.currentUser,\n                  verb: this.props.activityVerb,\n                  object: this._object()\n                };\n                uploadedImages = this._uploadedImages();\n                uploadedFiles = this._uploadedFiles();\n                attachments = {\n                  og: this._activeOg()\n                };\n\n                if (uploadedImages) {\n                  attachments.images = uploadedImages.map(function (image) {\n                    return image.url;\n                  }).filter(Boolean);\n                  activity.text = this._text();\n                }\n\n                if (uploadedFiles) {\n                  attachments.files = uploadedFiles.map(function (upload) {\n                    return {\n                      // url will never actually be empty string because _uploadedFiles\n                      // filters those out.\n                      url: upload.url || '',\n                      name: upload.file.name,\n                      mimeType: upload.file.type\n                    };\n                  });\n                }\n\n                if (Object.keys(attachments).length > 0) {\n                  activity.attachments = attachments;\n                }\n\n                modifiedActivity = this.props.modifyActivityData(activity);\n\n                if (!this.props.doRequest) {\n                  _context8.next = 14;\n                  break;\n                }\n\n                _context8.next = 11;\n                return this.props.doRequest(modifiedActivity);\n\n              case 11:\n                return _context8.abrupt(\"return\", _context8.sent);\n\n              case 14:\n                _context8.next = 16;\n                return this.props.client.feed(this.props.feedGroup, this.props.userId).addActivity(modifiedActivity);\n\n              case 16:\n                return _context8.abrupt(\"return\", _context8.sent);\n\n              case 17:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function addActivity() {\n        return _addActivity.apply(this, arguments);\n      }\n\n      return addActivity;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var t = this.props.t;\n\n      var activeOg = this._activeOg();\n\n      var availableOg = this._availableOg();\n\n      var userData = this.props.user.data || {};\n      return createElement(Panel, null, createElement(\"form\", {\n        onSubmit: this.onSubmitForm\n      }, createElement(ImageDropzone, {\n        handleFiles: this._uploadNewFiles\n      }, createElement(PanelHeading, null, this.props.Header), createElement(PanelContent, null, createElement(\"div\", {\n        style: {\n          display: 'flex'\n        }\n      }, createElement(Fragment, null, userData.profileImage && createElement(\"div\", {\n        style: {\n          marginRight: '16px'\n        }\n      }, createElement(Avatar, {\n        image: // $FlowFixMe\n        userData.profileImage || 'https://placehold.it/100x100',\n        size: 50,\n        circle: true\n      }))), createElement(Textarea, {\n        innerRef: this.textInputRef,\n        placeholder: t('Type your post...'),\n        value: this.state.text,\n        onChange: this._onChange,\n        trigger: this.props.trigger,\n        onPaste: /*#__PURE__*/function () {\n          var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(event) {\n            var items, plainTextPromise, _iteratorNormalCompletion6, _didIteratorError6, _iteratorError6, _loop, _iterator6, _step6, _ret, fileLikes, s;\n\n            return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n              while (1) {\n                switch (_context9.prev = _context9.next) {\n                  case 0:\n                    items = event.clipboardData.items;\n\n                    if (dataTransferItemsHaveFiles(items)) {\n                      _context9.next = 3;\n                      break;\n                    }\n\n                    return _context9.abrupt(\"return\");\n\n                  case 3:\n                    event.preventDefault(); // Get a promise for the plain text in case no files are\n                    // found. This needs to be done here because chrome cleans\n                    // up the DataTransferItems after resolving of a promise.\n\n                    _iteratorNormalCompletion6 = true;\n                    _didIteratorError6 = false;\n                    _iteratorError6 = undefined;\n                    _context9.prev = 7;\n\n                    _loop = function _loop() {\n                      var item = _step6.value;\n\n                      if (item.kind === 'string' && item.type === 'text/plain') {\n                        plainTextPromise = new Promise(function (resolve) {\n                          item.getAsString(function (s) {\n                            resolve(s);\n                          });\n                        });\n                        return \"break\";\n                      }\n                    };\n\n                    _iterator6 = items[Symbol.iterator]();\n\n                  case 10:\n                    if (_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done) {\n                      _context9.next = 17;\n                      break;\n                    }\n\n                    _ret = _loop();\n\n                    if (!(_ret === \"break\")) {\n                      _context9.next = 14;\n                      break;\n                    }\n\n                    return _context9.abrupt(\"break\", 17);\n\n                  case 14:\n                    _iteratorNormalCompletion6 = true;\n                    _context9.next = 10;\n                    break;\n\n                  case 17:\n                    _context9.next = 23;\n                    break;\n\n                  case 19:\n                    _context9.prev = 19;\n                    _context9.t0 = _context9[\"catch\"](7);\n                    _didIteratorError6 = true;\n                    _iteratorError6 = _context9.t0;\n\n                  case 23:\n                    _context9.prev = 23;\n                    _context9.prev = 24;\n\n                    if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n                      _iterator6[\"return\"]();\n                    }\n\n                  case 26:\n                    _context9.prev = 26;\n\n                    if (!_didIteratorError6) {\n                      _context9.next = 29;\n                      break;\n                    }\n\n                    throw _iteratorError6;\n\n                  case 29:\n                    return _context9.finish(26);\n\n                  case 30:\n                    return _context9.finish(23);\n\n                  case 31:\n                    _context9.next = 33;\n                    return dataTransferItemsToFiles(items);\n\n                  case 33:\n                    fileLikes = _context9.sent;\n\n                    if (!fileLikes.length) {\n                      _context9.next = 37;\n                      break;\n                    }\n\n                    _this3._uploadNewFiles(fileLikes);\n\n                    return _context9.abrupt(\"return\");\n\n                  case 37:\n                    if (!plainTextPromise) {\n                      _context9.next = 42;\n                      break;\n                    }\n\n                    _context9.next = 40;\n                    return plainTextPromise;\n\n                  case 40:\n                    s = _context9.sent;\n\n                    _this3._insertText(s);\n\n                  case 42:\n                  case \"end\":\n                    return _context9.stop();\n                }\n              }\n            }, _callee9, null, [[7, 19, 23, 31], [24,, 26, 30]]);\n          }));\n\n          return function (_x8) {\n            return _ref8.apply(this, arguments);\n          };\n        }()\n      })), this._isOgScraping() && createElement(\"div\", {\n        className: \"raf-status-update-form__og-loading\"\n      }, createElement(LoadingIndicator, null), \" Getting website data...\"), activeOg && createElement(\"div\", {\n        style: {\n          margin: '8px 0'\n        }\n      }, !activeOg.videos && !activeOg.audios ? createElement(Card, _extends({}, activeOg, {\n        nolink: true,\n        handleClose: function handleClose(e) {\n          e.preventDefault();\n\n          _this3._dismissOg(activeOg);\n        }\n      })) : createElement(Fragment, null, activeOg.videos ? createElement(Video, {\n        og: activeOg,\n        handleClose: function handleClose(e) {\n          e.preventDefault();\n\n          _this3._dismissOg(activeOg);\n        }\n      }) : null, activeOg.audios ? createElement(Audio, {\n        og: activeOg,\n        handleClose: function handleClose(e) {\n          e.preventDefault();\n\n          _this3._dismissOg(activeOg);\n        }\n      }) : null)), availableOg && availableOg.length > 1 && createElement(Fragment, null, createElement(\"ol\", {\n        className: \"raf-status-update-form__url-list\"\n      }, availableOg.map(function (_ref9) {\n        var url = _ref9.url,\n            title = _ref9.title;\n        return createElement(\"li\", {\n          className: \"raf-status-update-form__url-list-item\".concat(url === _this3.state.ogActiveUrl ? ' raf-status-update-form__url-list-item--active' : ''),\n          onClick: function onClick() {\n            return _this3.setState(function (prevState) {\n              var ogState = prevState.ogStateByUrl[url];\n\n              if (ogState) {\n                ogState.dismissed = false;\n              }\n\n              return {\n                ogActiveUrl: url,\n                ogStateByUrl: prevState.ogStateByUrl\n              };\n            });\n          },\n          key: url\n        }, createElement(FontAwesomeIcon, {\n          icon: faBookmark\n        }), ' ', title !== undefined ? title : url);\n      }))), this.state.imageOrder.length > 0 && createElement(ImagePreviewer, {\n        imageUploads: this.state.imageOrder.map(function (id) {\n          return _this3.state.imageUploads[id];\n        }),\n        handleRemove: this._removeImage,\n        handleRetry: this._uploadImage,\n        handleFiles: this._uploadNewFiles\n      }), this.state.fileOrder.length > 0 && createElement(FilePreviewer, {\n        uploads: this.state.fileOrder.map(function (id) {\n          return _this3.state.fileUploads[id];\n        }),\n        handleRemove: this._removeFile,\n        handleRetry: this._uploadFile,\n        handleFiles: this._uploadNewFiles\n      })), createElement(PanelFooter, null, createElement(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        }\n      }, createElement(\"div\", {\n        style: {\n          flex: 1\n        }\n      }, createElement(\"div\", {\n        style: {\n          marginRight: '32px',\n          display: 'inline-block'\n        }\n      }, createElement(ImageUploadButton, {\n        handleFiles: this._uploadNewFiles,\n        multiple: true\n      })), createElement(\"div\", {\n        style: {\n          marginRight: '32px',\n          display: 'inline-block'\n        }\n      }, createElement(FileUploadButton, {\n        handleFiles: this._uploadNewFiles,\n        multiple: true\n      })), createElement(EmojiPicker$1, {\n        onSelect: this._onSelectEmoji\n      }), this.props.FooterItem), createElement(Button, {\n        type: \"submit\",\n        buttonStyle: \"primary\",\n        loading: this.state.submitting,\n        disabled: !this._canSubmit()\n      }, t('Post')))))));\n    }\n  }]);\n\n  return StatusUpdateFormInner;\n}(Component);\n\nvar StatusUpdateForm$1 = withTranslationContext(StatusUpdateForm);\n/**\n *\n * @example ./examples/IconBadge.md\n */\n\nvar IconBadge = /*#__PURE__*/function (_React$Component) {\n  _inherits(IconBadge, _React$Component);\n\n  function IconBadge() {\n    _classCallCheck(this, IconBadge);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(IconBadge).apply(this, arguments));\n  }\n\n  _createClass(IconBadge, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-icon-badge\",\n        role: \"button\",\n        onClick: this.props.onClick\n      }, this.props.children ? this.props.children : createElement(\"svg\", {\n        width: \"17\",\n        height: \"20\",\n        viewBox: \"0 0 17 20\",\n        xmlns: \"http://www.w3.org/2000/svg\"\n      }, createElement(\"path\", {\n        d: \"M8.5 20c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6.5-6V8.5c0-3.07-2.13-5.64-5-6.32V1.5C10 .67 9.33 0 8.5 0S7 .67 7 1.5v.68c-2.87.68-5 3.25-5 6.32V14l-2 2v1h17v-1l-2-2zm-2 1H4V8.5C4 6.01 6.01 4 8.5 4S13 6.01 13 8.5V15z\" // fill=\"#414D54\"\n        ,\n        fillRule: \"evenodd\"\n      })), !this.props.hidden && this.props.unseen > 0 ? createElement(\"div\", {\n        className: \"raf-icon-badge__badge\"\n      }, this.props.showNumber ? createElement(\"p\", null, this.props.unseen) : null) : null);\n    }\n  }]);\n\n  return IconBadge;\n}(Component);\n/**\n * `DropdownPanel` is a more advanced component used to create a notification dropdown for instance, it comes with three parts: `Header`, `Content` and `Footer`. The content has a limited height and the `overflow` is set to `scroll`.\n *\n * @example ./examples/DropdownPanel.md\n */\n\n\nvar DropdownPanel = /*#__PURE__*/function (_React$Component) {\n  _inherits(DropdownPanel, _React$Component);\n\n  function DropdownPanel() {\n    _classCallCheck(this, DropdownPanel);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DropdownPanel).apply(this, arguments));\n  }\n\n  _createClass(DropdownPanel, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-dropdown-panel \".concat(this.props.arrow ? ' raf-dropdown-panel--arrow' : '', \" \").concat(this.props.right ? ' raf-dropdown-panel--right raf-dropdown-panel--arrow-right' : 'raf-dropdown-panel--left raf-dropdown-panel--arrow-left')\n      }, this.props.Header != null && createElement(\"div\", {\n        className: \"raf-dropdown-panel__header\"\n      }, smartRender(this.props.Header, {}, null)), createElement(\"div\", {\n        className: \"raf-dropdown-panel__content\"\n      }, this.props.children), this.props.Footer != null && createElement(\"div\", {\n        className: \"raf-dropdown-panel__footer\"\n      }, smartRender(this.props.Footer, {}, null)));\n    }\n  }]);\n\n  return DropdownPanel;\n}(Component);\n\n_defineProperty(DropdownPanel, \"defaultProps\", {\n  arrow: false,\n  left: true,\n  right: false\n});\n/**\n * IMPORTANT: Changing most of the props below doesn't result in the desired\n * effect. These settings related to feed management should be changed in the\n * `sharedFeeds` prop of the [`StreamApp`](#streamapp) component.\n * @example ./examples/NotificationDropdown.md\n */\n\n\nvar NotificationDropdown = /*#__PURE__*/function (_React$Component) {\n  _inherits(NotificationDropdown, _React$Component);\n\n  function NotificationDropdown() {\n    _classCallCheck(this, NotificationDropdown);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotificationDropdown).apply(this, arguments));\n  }\n\n  _createClass(NotificationDropdown, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return createElement(Feed, {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n        options: makeDefaultOptions$1({\n          mark_seen: false\n        }),\n        doFeedRequest: this.props.doFeedRequest\n      }, createElement(FeedContext.Consumer, null, function (feedCtx) {\n        return createElement(NotificationDropdownInner, _extends({}, _this.props, feedCtx));\n      }));\n    }\n  }]);\n\n  return NotificationDropdown;\n}(Component);\n\n_defineProperty(NotificationDropdown, \"defaultProps\", {\n  feedGroup: 'notification',\n  Group: Notification$1,\n  notify: true,\n  Notifier: NewActivitiesNotification$1,\n  Paginator: LoadMorePaginator,\n  Placeholder: FeedPlaceholder$1,\n  width: 475\n});\n\nvar NotificationDropdownInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(NotificationDropdownInner, _React$Component2);\n\n  function NotificationDropdownInner(props) {\n    var _this2;\n\n    _classCallCheck(this, NotificationDropdownInner);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(NotificationDropdownInner).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this2), \"dropdownRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this2), \"_refresh\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.props.refresh(makeDefaultOptions$1(_this2.props.options));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this2), \"openDropdown\", function () {\n      _this2.setState({\n        open: true\n      }, function () {\n        //$FlowFixMe\n        document.addEventListener('click', _this2.closeDropdown, false);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"closeDropdown\", function (e) {\n      if (_this2.dropdownRef.current !== null && !_this2.dropdownRef.current.contains(e.target)) {\n        _this2.setState({\n          open: false\n        }, function () {\n          //$FlowFixMe\n          document.removeEventListener('click', _this2.closeDropdown, false);\n        });\n      }\n    });\n\n    _this2.state = {\n      open: false\n    };\n    _this2.dropdownRef = createRef();\n    return _this2;\n  }\n\n  _createClass(NotificationDropdownInner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.refreshUnreadUnseen();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      //$FlowFixMe\n      document.removeEventListener('click', this.closeDropdown, false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        style: {\n          position: 'relative',\n          display: 'inline-block'\n        }\n      }, createElement(IconBadge, {\n        unseen: this.props.unseen,\n        onClick: this.openDropdown,\n        showNumber: true,\n        hidden: !this.props.notify\n      }, this.props.Icon && smartRender(this.props.Icon, {}, null)), createElement(\"div\", {\n        ref: this.dropdownRef,\n        style: {\n          position: 'absolute',\n          left: this.props.right ? '' : '-22px',\n          right: this.props.right ? -29 : 0,\n          top: 35,\n          width: '100vw',\n          maxWidth: this.props.width,\n          zIndex: 9999,\n          visibility: this.state.open ? 'visible' : 'hidden',\n          transform: this.state.open ? 'translateY(0px)' : 'translateY(10px)',\n          opacity: this.state.open ? '1' : '0',\n          transition: 'all .2s ease-out'\n        }\n      }, this.state.open && createElement(DropdownPanel, {\n        arrow: true,\n        right: this.props.right,\n        Header: this.props.Header,\n        Footer: this.props.Footer\n      }, createElement(NotificationFeed, {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n        options: this.props.options,\n        Group: this.props.Group,\n        notify: this.props.notify,\n        Notifier: this.props.Notifier,\n        Paginator: this.props.Paginator,\n        Placeholder: this.props.Placeholder,\n        doFeedRequest: this.props.doFeedRequest,\n        doActivityDeleteRequest: this.props.doActivityDeleteRequest,\n        doReactionAddRequest: this.props.doReactionAddRequest,\n        doReactionDeleteRequest: this.props.doReactionDeleteRequest,\n        doChildReactionAddRequest: this.props.doChildReactionAddRequest,\n        doChildReactionDeleteRequest: this.props.doChildReactionDeleteRequest,\n        analyticsLocation: this.props.analyticsLocation\n      }))));\n    }\n  }]);\n\n  return NotificationDropdownInner;\n}(Component);\n\nvar makeDefaultOptions$1 = function makeDefaultOptions(options) {\n  var copy = _objectSpread({}, options);\n\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n\n  return copy;\n};\n\nvar InfiniteScroll = /*#__PURE__*/function (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll(props) {\n    var _this;\n\n    _classCallCheck(this, InfiniteScroll);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InfiniteScroll).call(this, props));\n    _this.scrollListener = _this.scrollListener.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.pageLoaded = this.props.pageStart;\n      this.attachScrollListener();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.attachScrollListener();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.detachScrollListener();\n      this.detachMousewheelListener();\n    } // Set a defaut loader for all your `InfiniteScroll` components\n\n  }, {\n    key: \"setDefaultLoader\",\n    value: function setDefaultLoader(loader) {\n      this.defaultLoader = loader;\n    }\n  }, {\n    key: \"detachMousewheelListener\",\n    value: function detachMousewheelListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false) {\n        scrollEl = this.scrollComponent.parentNode;\n      }\n\n      scrollEl.removeEventListener('mousewheel', this.mousewheelListener, this.props.useCapture);\n    }\n  }, {\n    key: \"detachScrollListener\",\n    value: function detachScrollListener() {\n      var scrollEl = window;\n\n      if (this.props.useWindow === false && this.props.getScrollParent) {\n        scrollEl = this.props.getScrollParent().current;\n      } else if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.removeEventListener('scroll', this.scrollListener, this.props.useCapture);\n      scrollEl.removeEventListener('resize', this.scrollListener, this.props.useCapture);\n    }\n  }, {\n    key: \"getParentElement\",\n    value: function getParentElement(el) {\n      return el && el.parentNode;\n    }\n  }, {\n    key: \"filterProps\",\n    value: function filterProps(props) {\n      return props;\n    }\n  }, {\n    key: \"attachScrollListener\",\n    value: function attachScrollListener() {\n      if (!this.props.hasMore || this.props.isLoading || !this.getParentElement(this.scrollComponent)) {\n        return;\n      }\n\n      var scrollEl = window;\n\n      if (this.props.useWindow === false && this.props.getScrollParent) {\n        scrollEl = this.props.getScrollParent().current;\n      } else if (this.props.useWindow === false) {\n        scrollEl = this.getParentElement(this.scrollComponent);\n      }\n\n      scrollEl.addEventListener('mousewheel', this.mousewheelListener, this.props.useCapture);\n      scrollEl.addEventListener('scroll', this.scrollListener, this.props.useCapture);\n      scrollEl.addEventListener('resize', this.scrollListener, this.props.useCapture);\n\n      if (this.props.initialLoad) {\n        this.scrollListener();\n      }\n    }\n  }, {\n    key: \"mousewheelListener\",\n    value: function mousewheelListener(e) {\n      // Prevents Chrome hangups\n      // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n      if (e.deltaY === 1) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"scrollListener\",\n    value: function scrollListener() {\n      var el = this.scrollComponent;\n      var scrollEl = window;\n      var parentNode = this.getParentElement(el);\n      var offset;\n\n      if (this.props.useWindow) {\n        var doc = document.documentElement || document.body.parentNode || document.body;\n        var scrollTop = scrollEl.pageYOffset !== undefined ? scrollEl.pageYOffset : doc.scrollTop;\n\n        if (this.props.isReverse) {\n          offset = scrollTop;\n        } else {\n          offset = this.calculateOffset(el, scrollTop);\n        }\n      } else if (this.props.isReverse) {\n        offset = parentNode.scrollTop;\n      } else {\n        offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n      } // Here we make sure the element is visible as well as checking the offset\n\n\n      if (offset < Number(this.props.threshold) && el && el.offsetParent !== null) {\n        this.detachScrollListener(); // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n\n        if (typeof this.props.loadMore === 'function') {\n          this.props.loadMore(this.pageLoaded += 1);\n        }\n      }\n    }\n  }, {\n    key: \"calculateOffset\",\n    value: function calculateOffset(el, scrollTop) {\n      if (!el) {\n        return 0;\n      }\n\n      return this.calculateTopPosition(el) + (el.offsetHeight - scrollTop - window.innerHeight);\n    }\n  }, {\n    key: \"calculateTopPosition\",\n    value: function calculateTopPosition(el) {\n      if (!el) {\n        return 0;\n      }\n\n      return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var renderProps = this.filterProps(this.props);\n\n      var children = renderProps.children,\n          element = renderProps.element,\n          hasMore = renderProps.hasMore,\n          initialLoad = renderProps.initialLoad,\n          isReverse = renderProps.isReverse,\n          loader = renderProps.loader,\n          loadMore = renderProps.loadMore,\n          pageStart = renderProps.pageStart,\n          ref = renderProps.ref,\n          threshold = renderProps.threshold,\n          useCapture = renderProps.useCapture,\n          useWindow = renderProps.useWindow,\n          isLoading = renderProps.isLoading,\n          props = _objectWithoutProperties(renderProps, [\"children\", \"element\", \"hasMore\", \"initialLoad\", \"isReverse\", \"loader\", \"loadMore\", \"pageStart\", \"ref\", \"threshold\", \"useCapture\", \"useWindow\", \"isLoading\"]);\n\n      delete props.getScrollParent;\n\n      props.ref = function (node) {\n        _this2.scrollComponent = node;\n\n        if (ref) {\n          ref(node);\n        }\n      };\n\n      var childrenArray = [children];\n\n      if (isLoading) {\n        if (loader) {\n          isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n        } else if (this.defaultLoader) {\n          isReverse ? childrenArray.unshift(this.defaultLoader) : childrenArray.push(this.defaultLoader);\n        }\n      }\n\n      return React__default.createElement(element, props, childrenArray);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(Component);\n\n_defineProperty(InfiniteScroll, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  element: PropTypes.node,\n  hasMore: PropTypes.bool,\n  initialLoad: PropTypes.bool,\n  isReverse: PropTypes.bool,\n  loader: PropTypes.node,\n  loadMore: PropTypes.func.isRequired,\n  getScrollParent: PropTypes.func,\n  pageStart: PropTypes.number,\n  ref: PropTypes.func,\n  threshold: PropTypes.number,\n  useCapture: PropTypes.bool,\n  useWindow: PropTypes.bool\n});\n\n_defineProperty(InfiniteScroll, \"defaultProps\", {\n  element: 'div',\n  hasMore: false,\n  initialLoad: true,\n  pageStart: 0,\n  ref: null,\n  threshold: 250,\n  useWindow: true,\n  isReverse: false,\n  useCapture: false,\n  loader: null\n});\n\nvar InfiniteScrollPaginator = /*#__PURE__*/function (_React$Component) {\n  _inherits(InfiniteScrollPaginator, _React$Component);\n\n  function InfiniteScrollPaginator() {\n    _classCallCheck(this, InfiniteScrollPaginator);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(InfiniteScrollPaginator).apply(this, arguments));\n  }\n\n  _createClass(InfiniteScrollPaginator, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(InfiniteScroll, {\n        loadMore: this.props.loadNextPage,\n        hasMore: this.props.hasNextPage,\n        isLoading: this.props.refreshing,\n        isReverse: this.props.reverse,\n        threshold: this.props.threshold,\n        getScrollParent: this.props.getScrollParent,\n        useWindow: this.props.useWindow,\n        loader: createElement(Fragment, {\n          key: \"loading-indicator\"\n        }, smartRender(this.props.Loader))\n      }, this.props.children);\n    }\n  }]);\n\n  return InfiniteScrollPaginator;\n}(Component);\n\n_defineProperty(InfiniteScrollPaginator, \"defaultProps\", {\n  Loader: createElement(LoadingIndicator, null),\n  threshold: 250,\n  useWindow: true\n});\n/**\n * Component is described here.\n *\n * @example ./examples/ReactionIcon.md\n */\n\n\nvar ReactionIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactionIcon, _React$Component);\n\n  function ReactionIcon() {\n    _classCallCheck(this, ReactionIcon);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ReactionIcon).apply(this, arguments));\n  }\n\n  _createClass(ReactionIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          counts = _this$props.counts,\n          kind = _this$props.kind,\n          height = _this$props.height,\n          width = _this$props.width,\n          labelSingle = _this$props.labelSingle,\n          labelPlural = _this$props.labelPlural,\n          onPress = _this$props.onPress,\n          icon = _this$props.icon,\n          t = _this$props.t;\n      var count = null;\n\n      if (counts && kind) {\n        count = counts[kind] || 0;\n      }\n\n      if (!count) count = 0;\n      var label;\n\n      if (labelSingle && labelPlural) {\n        label = count === 1 ? \"1 \".concat(labelSingle) : \"\".concat(count, \" \").concat(labelPlural);\n      }\n\n      if (!labelSingle || !labelPlural) {\n        switch (kind) {\n          case 'like':\n            label = count === 1 ? t('1 like') : t('{{ countLikes }} likes', {\n              countLikes: count\n            });\n            break;\n\n          case 'repost':\n            label = count === 1 ? t('1 repost') : t('{{ countReposts }} reposts', {\n              countReposts: count\n            });\n            break;\n\n          case 'comment':\n            label = count === 1 ? t('1 comment') : t('{{ countComments }} comments', {\n              countComments: count\n            });\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return createElement(\"div\", {\n        className: \"raf-reaction-icon\",\n        onClick: onPress\n      }, icon ? createElement(\"img\", {\n        className: \"raf-reaction-icon__image\",\n        src: icon,\n        alt: \"\"\n      }) : null, count != null ? createElement(\"p\", {\n        className: \"raf-reaction-icon__label\"\n      }, label) : null);\n    }\n  }]);\n\n  return ReactionIcon;\n}(Component);\n\nvar ReactionIcon$1 = withTranslationContext(ReactionIcon);\n/**\n * A generic component that can be used to toggle a reaction and display it's\n * current state. Mostly used for reactions such as like and repost.\n * The [source for\n * LikeButton](https://github.com/GetStream/react-activity-feed/blob/master/src/components/LikeButton.js)\n * is a good example of the usage of this component.\n *\n * @example ./examples/ReactionToggleIcon.md\n */\n\nvar ReactionToggleIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactionToggleIcon, _React$Component);\n\n  function ReactionToggleIcon() {\n    _classCallCheck(this, ReactionToggleIcon);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ReactionToggleIcon).apply(this, arguments));\n  }\n\n  _createClass(ReactionToggleIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          inactiveIcon = _this$props.inactiveIcon,\n          activeIcon = _this$props.activeIcon,\n          own_reactions = _this$props.own_reactions,\n          kind = _this$props.kind,\n          restProps = _objectWithoutProperties(_this$props, [\"inactiveIcon\", \"activeIcon\", \"own_reactions\", \"kind\"]);\n\n      var icon = inactiveIcon;\n\n      if (own_reactions && own_reactions[kind] && own_reactions[kind].length) {\n        icon = activeIcon;\n      }\n\n      return React__default.createElement(\"div\", {\n        className: \"raf-reaction-toggle-icon\"\n      }, React__default.createElement(ReactionIcon$1, _extends({\n        icon: icon,\n        kind: kind\n      }, restProps)));\n    }\n  }]);\n\n  return ReactionToggleIcon;\n}(React__default.Component);\n\nvar likebuttonActive = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUxJREFUOBGtk89Kw0AQxudLi4Zmo1ARPIgtnvoAPfoCevZPn0LoG9QX8OBBvHtpohcP4s2zIsUHEMR4EPEgWGqFVDPORhaibGPFLCQzu/PNb3YzG6IJhxfct1UQdfLkyAuamAqjdWYKiRllB82XzVrPxLK2nJ3YfD+MVpKEDyWWFv4gR9l0es0ZF9Dr/vFDQ3Z0Iq6b6gCeUpXr1Le8xsLmw6eF5D0+Y+aqyQPzzfPaXN/Mf1orTEBqyG+nIq5/SwBZv5XRWBugulHIxBtGlGtBMQj7g61aG173jo34tVVP4V4QjaRzvzbH5Gk7PePPWo/5V5D0Od5erQ7ssGzJCXww3XaApBAYEy50zUJgJWlAUbDLfmvpqhiYU9rTID3+d0zQY2N58egLNQ4GDI0gz8plPeg1MTIa685kcYc0UH5s60NIAJy7bmXXgLT9BOn0XD2NtcXgAAAAAElFTkSuQmCC\";\nvar likebuttonInactive = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUpJREFUOBGtk7FKA0EQhmeWLQSDiWKhnaVYH8TCUoiKptLKFPcKeQN9gRQpgmVUsDgrcwQ9BK9VRHwAwdpaJGACO85EllxkXS4kA8fMzv7z3ewsC5DT2p2kfh4nJz45+jbtHkMOOY6ICEFhEO5XXuxe1qvswhVfxPdbBHA5BLFAGSy4dJLzwq7iZN2AuQGiOREjIim98Cqxy/6FRd10pU90y6ClUSG91fY2P0fr8cgJi9K00DPfXZaujckJnLOyGucF8MBl2EdW5PMM6BNgK6xW6tju3PF8fy2s7gzhDBswTNt8Hq91qeg85qQg6e54t/zlhOXpJKshxHe+aTMTGN/4o8BnAtOgWwKbaMhS8Nf4eE+1g+1nyU/dGQI17Q+mgyF8bKwuX/thCD0r8HkEPAuCYGA1zs4UqFNgoDxs18fFhkEPpcX5hgWJ/wEycGS98JuJ8gAAAABJRU5ErkJggg==\";\n/**\n * Like button ready to be embedded as Activity footer\n * @example ./examples/LikeButton.md\n */\n\nvar LikeButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(LikeButton, _React$Component);\n\n  function LikeButton() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LikeButton);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LikeButton)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_onPress\", function () {\n      var _this$props = _this.props,\n          activity = _this$props.activity,\n          reaction = _this$props.reaction,\n          onToggleReaction = _this$props.onToggleReaction,\n          onToggleChildReaction = _this$props.onToggleChildReaction;\n\n      if (reaction && onToggleChildReaction) {\n        return onToggleChildReaction('like', reaction, {}, {});\n      }\n\n      return onToggleReaction('like', activity, {}, {});\n    });\n\n    return _this;\n  }\n\n  _createClass(LikeButton, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          activity = _this$props2.activity,\n          reaction = _this$props2.reaction;\n      var counts, own_reactions;\n\n      if (reaction && this.props.onToggleChildReaction) {\n        counts = reaction.children_counts;\n        own_reactions = reaction.own_children;\n      } else {\n        if (reaction) {\n          console.warn('reaction is passed to the LikeButton but ' + 'onToggleChildReaction is not, falling back to liking the activity');\n        }\n\n        counts = activity.reaction_counts;\n        own_reactions = activity.own_reactions;\n      }\n\n      return createElement(ReactionToggleIcon, {\n        counts: counts,\n        own_reactions: own_reactions,\n        kind: \"like\",\n        onPress: this._onPress,\n        activeIcon: likebuttonActive,\n        inactiveIcon: likebuttonInactive,\n        labelSingle: \"like\",\n        labelPlural: \"likes\"\n      });\n    }\n  }]);\n\n  return LikeButton;\n}(Component);\n\nvar repostButtonActive = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqDXaArdptoNvAVrBDe071I/3oFwkhxzdysS0nz9+J0zSVq1/3WY+2Gnj8lNKksGoQiirMqKJbtkTfa83sHVKkBR8awP++xqLymNOYHUDN5znMIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAJWhChOoqSnsAAAAASUVORK5CYII=\";\nvar repostButtonInactive = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqbnCBFdpNoJvACnBpp0v1I/3oFwkhxzdysS0nz9+J0zSVa92/sx5tNfD4KaVJYdUgFFWYUcWyfRJ9rzWzd0iRFnxoAP819kXlMacxO4Ca59DNIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAvNZE146X6PUAAAAASUVORK5CYII=\";\n/**\n * A repost button ready to be embedded as Activity footer\n * @example ./examples/RepostButton.md\n */\n\nvar RepostButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(RepostButton, _React$Component);\n\n  function RepostButton() {\n    _classCallCheck(this, RepostButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RepostButton).apply(this, arguments));\n  }\n\n  _createClass(RepostButton, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      if (this.props.userId != null) {\n        return createElement(RepostButtonInner, this.props);\n      }\n\n      return createElement(StreamApp.Consumer, null, function (appCtx) {\n        return createElement(RepostButtonInner, _extends({}, _this.props, {\n          userId: appCtx.user.id\n        }));\n      });\n    }\n  }]);\n\n  return RepostButton;\n}(Component);\n\n_defineProperty(RepostButton, \"defaultProps\", {\n  feedGroup: 'user'\n});\n\nvar RepostButtonInner = /*#__PURE__*/function (_React$Component2) {\n  _inherits(RepostButtonInner, _React$Component2);\n\n  function RepostButtonInner() {\n    _classCallCheck(this, RepostButtonInner);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RepostButtonInner).apply(this, arguments));\n  }\n\n  _createClass(RepostButtonInner, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          feedGroup = _this$props.feedGroup,\n          userId = _this$props.userId,\n          activity = _this$props.activity,\n          onToggleReaction = _this$props.onToggleReaction;\n      return createElement(ReactionToggleIcon, {\n        counts: activity.reaction_counts,\n        own_reactions: activity.own_reactions,\n        kind: \"repost\",\n        onPress: function onPress() {\n          return onToggleReaction('repost', activity, {}, {\n            targetFeeds: [\"\".concat(feedGroup, \":\").concat(userId)]\n          });\n        },\n        activeIcon: repostButtonActive,\n        inactiveIcon: repostButtonInactive\n      });\n    }\n  }]);\n\n  return RepostButtonInner;\n}(Component);\n\nvar RepostButton$1 = withTranslationContext(RepostButton);\n/**\n * Simple Flex wrapper for centering UI elements. To be expanded in the future.\n *\n * @example ./examples/Flex.md\n */\n\nvar Flex = /*#__PURE__*/function (_React$Component) {\n  _inherits(Flex, _React$Component);\n\n  function Flex() {\n    _classCallCheck(this, Flex);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Flex).apply(this, arguments));\n  }\n\n  _createClass(Flex, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-flex\",\n        style: _objectSpread({\n          justifyContent: this.props.j,\n          alignItems: this.props.a,\n          justifySelf: this.props.js,\n          flexDirection: this.props.d,\n          flexWrap: this.props.w\n        }, this.props.style)\n      }, this.props.children);\n    }\n  }]);\n\n  return Flex;\n}(Component);\n\n_defineProperty(Flex, \"defaultProps\", {\n  d: 'row',\n  w: 'nowrap'\n});\n/**\n * Wrapper with LikeButton and Repost Button used by the Standard Activity.\n *\n * @example ./examples/ActivityFooter.md\n */\n\n\nvar ActivityFooter = /*#__PURE__*/function (_React$Component) {\n  _inherits(ActivityFooter, _React$Component);\n\n  function ActivityFooter() {\n    _classCallCheck(this, ActivityFooter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ActivityFooter).apply(this, arguments));\n  }\n\n  _createClass(ActivityFooter, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          activity = _this$props.activity,\n          onToggleReaction = _this$props.onToggleReaction;\n      return createElement(\"div\", {\n        className: \"raf-activity-footer\"\n      }, createElement(\"div\", {\n        className: \"raf-activity-footer__left\"\n      }), createElement(\"div\", {\n        className: \"raf-activity-footer__right\"\n      }, createElement(Flex, {\n        a: \"center\"\n      }, createElement(LikeButton, {\n        activity: activity,\n        onToggleReaction: onToggleReaction\n      }), createElement(RepostButton$1, this.props))));\n    }\n  }]);\n\n  return ActivityFooter;\n}(Component);\n\n_defineProperty(ActivityFooter, \"defaultProps\", {\n  feedGroup: 'user'\n});\n/**\n * Component is described here.\n *\n * @example ./examples/FollowButton.md\n */\n\n\nvar FollowButton = /*#__PURE__*/function (_React$Component) {\n  _inherits(FollowButton, _React$Component);\n\n  function FollowButton(props) {\n    var _this;\n\n    _classCallCheck(this, FollowButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FollowButton).call(this, props));\n    _this.state = {\n      followed: _this.props.followed || false\n    };\n    return _this;\n  }\n\n  _createClass(FollowButton, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          onClick = _this$props.onClick,\n          followed = _this$props.followed;\n      return React__default.createElement(\"div\", {\n        className: \"raf-follow-button \".concat(followed ? 'raf-follow-button--active' : ''),\n        role: \"button\",\n        onClick: onClick\n      }, followed ? 'Following' : 'Follow');\n    }\n  }]);\n\n  return FollowButton;\n}(React__default.Component);\n\nvar ReactionList = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ReactionList, _React$PureComponent);\n\n  function ReactionList() {\n    _classCallCheck(this, ReactionList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ReactionList).apply(this, arguments));\n  }\n\n  _createClass(ReactionList, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return createElement(FeedContext.Consumer, null, function (appCtx) {\n        return createElement(ReactionListInner, _extends({}, _this.props, appCtx));\n      });\n    }\n  }]);\n\n  return ReactionList;\n}(PureComponent);\n\n_defineProperty(ReactionList, \"defaultProps\", {\n  Paginator: LoadMorePaginator,\n  oldestToNewest: false,\n  reverseOrder: false\n});\n\nvar ReactionListInner = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactionListInner, _React$Component);\n\n  function ReactionListInner() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, ReactionListInner);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ReactionListInner)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this2), \"renderReaction\", function (reaction) {\n      var Reaction = _this2.props.Reaction;\n      return smartRender(Reaction, {\n        reaction: reaction\n      });\n    });\n\n    return _this2;\n  }\n\n  _createClass(ReactionListInner, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          activityId = _this$props.activityId,\n          activities = _this$props.activities,\n          reactionKind = _this$props.reactionKind,\n          getActivityPath = _this$props.getActivityPath,\n          oldestToNewest = _this$props.oldestToNewest;\n\n      if (!oldestToNewest) {\n        return;\n      }\n\n      var activityPath = this.props.activityPath || getActivityPath(activityId);\n      var orderPrefix = 'oldest';\n      var reactions_extra = activities.getIn([].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra']));\n\n      if (reactions_extra) {\n        return;\n      }\n\n      return this.props.loadNextReactions(activityId, reactionKind, activityPath, oldestToNewest);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          activityId = _this$props2.activityId,\n          activities = _this$props2.activities,\n          reactionKind = _this$props2.reactionKind,\n          getActivityPath = _this$props2.getActivityPath,\n          oldestToNewest = _this$props2.oldestToNewest,\n          reverseOrder = _this$props2.reverseOrder;\n      var activityPath = this.props.activityPath || getActivityPath(activityId);\n      var orderPrefix = 'latest';\n\n      if (oldestToNewest) {\n        orderPrefix = 'oldest';\n      }\n\n      var reactionsOfKind = activities.getIn([].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions', reactionKind]), immutable.List());\n\n      if (reverseOrder) {\n        reactionsOfKind = reactionsOfKind.reverse();\n      }\n\n      var reactions_extra = activities.getIn([].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra']));\n      var nextUrl = 'https://api.stream-io-api.com/';\n\n      if (reactions_extra) {\n        nextUrl = reactions_extra.getIn([reactionKind, 'next'], '');\n      }\n\n      var refreshing = activities.getIn([].concat(_toConsumableArray(activityPath), [orderPrefix + '_reactions_extra', reactionKind, 'refreshing']), false);\n      return smartRender(this.props.Paginator, {\n        loadNextPage: function loadNextPage() {\n          return _this3.props.loadNextReactions(activityId, reactionKind, activityPath, oldestToNewest);\n        },\n        hasNextPage: Boolean(nextUrl),\n        refreshing: refreshing,\n        reverse: reverseOrder,\n        children: createElement(Fragment, null, reactionsOfKind.map(function (reaction) {\n          return createElement(ImmutableItemWrapper$2, {\n            key: reaction.get('id'),\n            item: reaction,\n            renderItem: _this3.renderReaction\n          });\n        }))\n      });\n    }\n  }]);\n\n  return ReactionListInner;\n}(Component);\n\nvar ImmutableItemWrapper$2 = /*#__PURE__*/function (_React$PureComponent2) {\n  _inherits(ImmutableItemWrapper, _React$PureComponent2);\n\n  function ImmutableItemWrapper() {\n    _classCallCheck(this, ImmutableItemWrapper);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutableItemWrapper).apply(this, arguments));\n  }\n\n  _createClass(ImmutableItemWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.renderItem(this.props.item.toJS());\n    }\n  }]);\n\n  return ImmutableItemWrapper;\n}(PureComponent);\n/**\n * Component is described here.\n *\n * @example ./examples/CommentItem.md\n */\n\n\nvar CommentItem = /*#__PURE__*/function (_React$Component) {\n  _inherits(CommentItem, _React$Component);\n\n  function CommentItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CommentItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CommentItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_user\", function () {\n      var user = _this.props.comment.user;\n      return user;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickUser\", function () {\n      var onClickUser = _this.props.onClickUser;\n\n      if (onClickUser) {\n        return onClickUser(_this._user());\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CommentItem, [{\n    key: \"_getOnClickUser\",\n    value: function _getOnClickUser() {\n      return this.props.onClickUser ? this.onClickUser : undefined;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          comment = _this$props.comment,\n          tDateTimeParser = _this$props.tDateTimeParser;\n      return React__default.createElement(\"div\", {\n        className: \"raf-comment-item\"\n      }, React__default.createElement(Flex, {\n        a: \"flex-start\",\n        style: {\n          padding: '8px 0'\n        }\n      }, comment.user.data.profileImage && React__default.createElement(Avatar, {\n        onClick: this._getOnClickUser(),\n        image: comment.user.data.profileImage,\n        circle: true,\n        size: 25\n      })), React__default.createElement(Flex, {\n        d: \"column\",\n        style: {\n          flex: 1,\n          margin: '0 8px'\n        }\n      }, React__default.createElement(\"div\", {\n        className: \"raf-comment-item__content\"\n      }, React__default.createElement(\"time\", {\n        dateTime: comment.created_at,\n        title: comment.created_at\n      }, React__default.createElement(\"small\", null, humanizeTimestamp(comment.created_at, tDateTimeParser))), React__default.createElement(\"p\", null, React__default.createElement(\"span\", {\n        onClick: this._getOnClickUser(),\n        className: \"raf-comment-item__author\"\n      }, comment.user.data.name), ' ', textRenderer(comment.data.text, 'raf-comment-item', this.props.onClickMention, this.props.onClickHashtag)))));\n    }\n  }]);\n\n  return CommentItem;\n}(React__default.Component);\n\nvar CommentItem$1 = withTranslationContext(CommentItem);\n/**\n * CommentList uses ReactionList under the hood to render a list of comments.\n *\n * @example ./examples/CommentList.md\n */\n\nvar CommentList = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(CommentList, _React$PureComponent);\n\n  function CommentList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CommentList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CommentList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_Reaction\", function (_ref) {\n      var reaction = _ref.reaction;\n      return smartRender(_this.props.CommentItem, {\n        comment: reaction\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(CommentList, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Paginator = _this$props.Paginator,\n          activityId = _this$props.activityId,\n          activityPath = _this$props.activityPath,\n          oldestToNewest = _this$props.oldestToNewest,\n          reverseOrder = _this$props.reverseOrder;\n      return React__default.createElement(React__default.Fragment, null, React__default.createElement(ReactionList, {\n        Paginator: Paginator,\n        activityId: activityId,\n        reactionKind: 'comment',\n        Reaction: this._Reaction,\n        activityPath: activityPath,\n        oldestToNewest: oldestToNewest,\n        reverseOrder: reverseOrder\n      }));\n    }\n  }]);\n\n  return CommentList;\n}(React__default.PureComponent);\n\n_defineProperty(CommentList, \"defaultProps\", {\n  Paginator: LoadMorePaginator,\n  CommentItem: CommentItem$1,\n  oldestToNewest: false,\n  reverseOrder: false\n});\n/**\n * Component is described here.\n *\n * @example ./examples/CommentField.md\n */\n\n\nvar CommentField = /*#__PURE__*/function (_React$Component) {\n  _inherits(CommentField, _React$Component);\n\n  function CommentField() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CommentField);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CommentField)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"textareaRef\", React__default.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      text: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmitForm\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(_this.state.text !== '')) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.prev = 2;\n                _context.next = 5;\n                return _this.props.onAddReaction('comment', _this.props.activity, {\n                  text: _this.state.text\n                });\n\n              case 5:\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n                return _context.abrupt(\"return\");\n\n              case 10:\n                _this.setState({\n                  text: ''\n                });\n\n                if (_this.props.onSuccess) {\n                  _this.props.onSuccess();\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 7]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_onChange\", function (event) {\n      var text = inputValueFromEvent(event);\n\n      if (text == null) {\n        return;\n      }\n\n      _this.setState({\n        text: text\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(CommentField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.textareaRef.current) {\n        this.textareaRef.current.addEventListener('keydown', function (e) {\n          if (e.which === 13 && _this2.textareaRef.current && _this2.textareaRef.current.nextSibling === null) {\n            _this2.onSubmitForm(e);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          placeholder = _this$props.placeholder;\n      return React__default.createElement(\"form\", {\n        onSubmit: this.onSubmitForm,\n        className: \"raf-comment-field\"\n      }, this.props.image ? React__default.createElement(Avatar, {\n        image: this.props.image,\n        circle: true,\n        size: 39\n      }) : null, React__default.createElement(\"div\", {\n        className: \"raf-comment-field__group\"\n      }, React__default.createElement(Textarea, {\n        rows: 1,\n        value: this.state.text,\n        placeholder: placeholder || t('Start Typing...'),\n        onChange: this._onChange,\n        trigger: this.props.trigger,\n        onPaste: function onPaste() {\n          return null;\n        },\n        maxLength: 280,\n        innerRef: this.textareaRef\n      }), React__default.createElement(Button, {\n        buttonStyle: \"primary\",\n        disabled: this.state.text === '',\n        type: \"submit\"\n      }, t('Post'))));\n    }\n  }]);\n\n  return CommentField;\n}(React__default.Component);\n\nvar CommentField$1 = withTranslationContext(CommentField);\n/**\n * Component is described here.\n *\n * @example ./examples/DataLabel.md\n */\n\nvar DataLabel = /*#__PURE__*/function (_React$Component) {\n  _inherits(DataLabel, _React$Component);\n\n  function DataLabel() {\n    _classCallCheck(this, DataLabel);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DataLabel).apply(this, arguments));\n  }\n\n  _createClass(DataLabel, [{\n    key: \"render\",\n    value: function render() {\n      return createElement(\"div\", {\n        className: \"raf-data-label\"\n      }, createElement(\"span\", {\n        className: \"raf-data-label__label\"\n      }, this.props.label), createElement(\"span\", {\n        className: \"raf-data-label__data\"\n      }, this.props.data));\n    }\n  }]);\n\n  return DataLabel;\n}(Component);\n\n_defineProperty(DataLabel, \"defaultProps\", {\n  label: 'label',\n  data: 'data'\n});\n\nexport { FlatFeed$1 as FlatFeed, NotificationFeed, SinglePost, StatusUpdateForm$1 as StatusUpdateForm, Activity$1 as Activity, Notification$1 as Notification, NotificationDropdown, NewActivitiesNotification$1 as NewActivitiesNotification, InfiniteScrollPaginator, LoadMorePaginator, ActivityFooter, AttachedActivity, UserBar$1 as UserBar, Card, Gallery, Avatar, AvatarGroup, Dropdown, Link, Video, Audio, LikeButton, RepostButton$1 as RepostButton, ReactionIcon$1 as ReactionIcon, ReactionToggleIcon, IconBadge, FollowButton, CommentList, ReactionList, CommentItem$1 as CommentItem, CommentField$1 as CommentField, Button, DataLabel, Textarea, EmojiPicker$1 as EmojiPicker, Title, Panel, PanelHeading, PanelFooter, PanelContent, Streami18n, Feed, FeedContext, StreamContext, TranslationContext, withTranslationContext, StreamApp, enTranslations, nlTranslations, ruTranslations, trTranslations, frTranslations, hiTranslations, itTranslations };","map":{"version":3,"sources":["../src/utils.js","../src/Context/FeedManager.js","../src/errors.js","../src/Streami18n.js","../src/Context/StreamApp.js","../src/Context/Feed.js","../src/images/placeholder.png","../src/components/Avatar.js","../src/components/UserBar.js","../src/components/Card.js","../src/components/Audio.js","../src/components/Video.js","../src/components/Gallery.js","../src/components/Activity.js","../src/components/Link.js","../src/components/NewActivitiesNotification.js","../src/components/Button.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/components/FeedPlaceholder.js","../src/components/FlatFeed.js","../src/components/AvatarGroup.js","../src/components/AttachedActivity.js","../src/components/Dropdown.js","../src/components/Notification.js","../src/components/NotificationFeed.js","../src/components/SinglePost.js","../src/components/Panel.js","../src/components/PanelHeader.js","../src/components/PanelFooter.js","../src/components/PanelContent.js","../src/components/Textarea.js","../src/components/EmojiPicker.js","../src/components/Title.js","../src/components/StatusUpdateForm.js","../src/components/IconBadge.js","../src/components/DropdownPanel.js","../src/components/NotificationDropdown.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/ReactionIcon.js","../src/components/ReactionToggleIcon.js","../src/images/like-active@1x.png","../src/images/like@1x.png","../src/components/LikeButton.js","../src/images/repost-active@1x.png","../src/images/repost@1x.png","../src/components/RepostButton.js","../src/components/Flex.js","../src/components/ActivityFooter.js","../src/components/FollowButton.js","../src/components/ReactionList.js","../src/components/CommentItem.js","../src/components/CommentList.js","../src/components/CommentField.js","../src/components/DataLabel.js"],"names":["Dayjs","time","tDateTimeParser","now","smartRender","ElementOrComponentOrLiteral","React","ComponentOrLiteral","React.createElement","notFound","id","created_at","updated_at","data","name","profileImage","user","actor","S4","Math","items","item","fileLikes","file","getFileLikes","blobPromises","parser","doc","imageTags","imagePromises","tag","res","fetch","contentType","buf","blob","type","Promise","accept","event","target","inputTarget","url","proto","URL","textRenderer","text","onClickMention","word","mention","twitter","onClickHashtag","hashtag","anchorme","link","list","urlText","_truncate","length","accu","FeedManager","activityOrder","activities","immutable","activityIdToPath","activityIdToPaths","reactionIdToPaths","reactionActivities","lastResponse","lastReverseResponse","refreshing","realtimeAdds","realtimeDeletes","subscription","unread","unseen","numSubscribers","reactionsBeingToggled","childReactionsBeingToggled","initialOptions","previousUrl","next","callback","changed","analyticsClient","console","feed","label","feed_id","content","foreign_id","activity","location","analyticsLocation","rest","activityId","activityPath","reactionId","reaction","options","kind","feedGroup","userId","enrichedReaction","full","prevState","path","v","r","togglingReactions","currentReactions","last","childReaction","outerId","groupArrayPath","markArg","group","groupArray","Array","g","limit","id_lte","counterKey","counter","groupId","markerPath","extraOptions","propOpts","id_gt","id_gte","id_lt","offset","withReactionCounts","withOwnReactions","map","a","response","aggregatedResponse","act","previous","currentPath","obj","addFoundActivities","_isPlainObject","addFoundReactions","oldLength","removeFoundReactions","_remove","_isEqual","setReactionActivities","newState","numActivityDiff","Boolean","cancel","nextURL","activity_id","orderPrefix","latestReactionsPath","nextUrlPath","refreshingPath","reactions_extra","nextUrl","generateRandomId","handleError","defaultNS","defaultLng","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","meridiemParse","meridiemHour","hour","meridiem","en_locale","weekdays","months","defaultStreami18nOptions","language","disableDateTimeTranslations","debug","logger","dayjsLocaleConfigForLanguage","DateTimeParser","Streami18n","i18n","en","nl","ru","tr","fr","hi","it","finalOptions","Error","translationsForLanguage","nsSeparator","keySeparator","fallbackLng","lng","interpolation","escapeValue","parseMissingKeyHandler","resources","currentLanguage","t","Object","availableLanguages","key","StreamContext","changedUserData","sharedFeedManagers","client","TranslationContext","ContextAwareComponent","OriginalComponent","StreamApp","sharedFeeds","notify","mark_seen","defaultUserData","errorHandler","props","appCtx","Child","userData","prevProps","i18nInstance","streami18n","state","stream","apiKey","token","analyticsToken","appId","feedProps","manager","streamContextValue","width","height","minHeight","display","flexDirection","alignItems","justifyContent","color","backgroundColor","fontFamily","FeedContext","Feed","FeedInner","feedId","clientDifferent","notifyDifferent","feedDifferent","optionsDifferent","doFeedRequestDifferent","getActivityPath","onToggleReaction","onAddReaction","onRemoveReaction","onToggleChildReaction","onAddChildReaction","onRemoveChildReaction","onRemoveActivity","onMarkAsRead","onMarkAsSeen","hasDoneRequest","refresh","refreshUnreadUnseen","loadNextReactions","loadNextPage","hasNextPage","loadReverseNextPage","hasReverseNextPage","feedManager","Avatar","PureComponent","size","image","alt","rounded","circle","UserBar","humanizeTimestamp","avatar","onClickUser","timestamp","withTranslationContext","Card","Component","trimmedUrl","images","handleClose","nolink","sanitizeURL","svg","__html","Audio","open","playing","progress","updateProgress","setInterval","window","position","duration","og","audio","audioRef","faPlayCircle","faPauseCircle","Video","urlsThatAreGifs","videos","video","CloseButton","i","newUrl","videoProps","controls","preload","poster","parsedUrl","gifUrl","autoPlay","muted","loop","playsInline","Gallery","lightboxIsOpen","currentImage","src","Activity","userOrDefault","padding","HeaderRight","attachments","mimeType","Link","onClick","NewActivitiesNotification","adds","deletes","labelSingle","labelPlural","labelFunction","addCount","deleteCount","count","singleNotificationText","pluralNotificationText","notificationCount","Button","buttonStyle","disabled","loading","children","LoadMoreButton","LoadMorePaginator","FeedPlaceholder","FlatFeed","Notifier","Placeholder","Paginator","LoadingIndicator","doReactionsFilterRequest","FlatFeedInner","ref","args","notifierProps","undefined","ImmutableItemWrapper","AvatarGroup","avatarSize","e","AttachedActivity","Dropdown","document","showMenu","dropdownBox","Notification","onClickNotification","activityGroup","latestActivity","lastActor","headerText","actorName","activityVerb","verb","object","NotificationFeed","Group","makeDefaultOptions","doChildReactionDeleteRequest","copy","NotificationFeedInner","_refresh","SinglePost","withRecentReactions","Panel","panelStyle","PanelHeading","PanelFooter","PanelContent","AutocompleteItem","native","Textarea","rows","placeholder","trigger","innerRef","dataProvider","emojis","emojiIndex","component","output","caretPosition","value","EmojiPicker","current","emojiPicker","onSelect","Title","fontSize","StatusUpdateForm","modifyActivityData","Header","HeaderComponent","forwardedProps","StatusUpdateFormInner","imageUploads","imageOrder","fileUploads","fileOrder","ogUrlOrder","ogStateByUrl","ogActiveUrl","submitting","_debounce","leading","trailing","urlInfos","exclude","info","urls","_uniq","oldUrls","newUrls","_difference","removedUrls","_includes","ogState","scrapingActive","dismissed","resp","upload","uploadedImages","uploadedFiles","modifiedActivity","doRequest","emoji","prevText","textareaElement","insertedText","selectionStart","selectionEnd","newCursorPosition","files","reader","img","alreadyRemoved","inputValueFromEvent","activeOg","availableOg","onSubmitForm","_uploadNewFiles","marginRight","dataTransferItemsHaveFiles","plainTextPromise","resolve","dataTransferItemsToFiles","s","margin","title","faBookmark","flex","_onSelectEmoji","IconBadge","DropdownPanel","arrow","left","right","NotificationDropdown","doFeedRequest","NotificationDropdownInner","top","maxWidth","zIndex","visibility","transform","opacity","transition","Footer","InfiniteScroll","PropTypes","element","hasMore","initialLoad","isReverse","loader","loadMore","getScrollParent","pageStart","threshold","useCapture","useWindow","bool","scrollEl","el","parentNode","scrollTop","Number","renderProps","isLoading","childrenArray","InfiniteScrollPaginator","Loader","ReactionIcon","counts","onPress","icon","countLikes","countReposts","countComments","ReactionToggleIcon","inactiveIcon","activeIcon","own_reactions","restProps","LikeButton","RepostButton","RepostButtonInner","targetFeeds","repostButtonInactive","Flex","d","w","justifySelf","flexWrap","ActivityFooter","FollowButton","followed","ReactionList","oldestToNewest","reverseOrder","ReactionListInner","reactionKind","reactionsOfKind","reverse","renderReaction","Reaction","CommentItem","comment","CommentList","CommentField","textareaRef","DataLabel"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport URL from 'url-parse';\nimport anchorme from 'anchorme';\nimport _truncate from 'lodash/truncate';\nimport twitter from 'twitter-text';\nimport type { UserResponse } from './types';\nimport Dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport minMax from 'dayjs/plugin/minMax';\nimport type { Renderable, RenderableButNotElement, FileLike } from './types';\nDayjs.extend(utc);\nDayjs.extend(minMax);\n\n// import type { UserResponse } from 'getstream';\n\nexport function humanizeTimestamp(\n  timestamp: string | number,\n  tDateTimeParser: (input?: string | number) => Function,\n): string {\n  // Following calculation is based on assumption that tDateTimeParser()\n  // either returns momentjs or dayjs object.\n  const time = tDateTimeParser(timestamp).add(\n    Dayjs(timestamp).utcOffset(),\n    'minute',\n  ); // parse time as UTC\n  const now = tDateTimeParser();\n  return time.from(now);\n}\n\nexport const smartRender = (\n  ElementOrComponentOrLiteral: Renderable,\n  props?: {},\n  fallback?: Renderable,\n) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    return ((ElementOrComponentOrLiteral: any): React.Element<any>);\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ((ElementOrComponentOrLiteral: any): RenderableButNotElement);\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const getRetinaImage = (images: string) =>\n  images\n    .split('|')\n    .map((item, i) => `${item} ${i + 1}x`)\n    .join(', ');\n\nexport function userOrDefault(\n  user: UserResponse | string | {| error: string |},\n): UserResponse {\n  let actor: UserResponse;\n  const notFound = {\n    id: '!not-found',\n    created_at: '',\n    updated_at: '',\n    data: { name: 'Unknown', profileImage: '' },\n  };\n  if (!user || typeof user === 'string' || typeof user.error === 'string') {\n    actor = notFound;\n  } else {\n    //$FlowBug\n    actor = (user: any);\n  }\n  return actor;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport function dataTransferItemsHaveFiles(\n  items: ?(DataTransferItem[]),\n): boolean {\n  if (!items || !items.length) {\n    return false;\n  }\n  for (const item of items) {\n    if (item.kind === 'file' || item.type === 'text/html') {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getFileLikes(items) {\n  const fileLikes = [];\n  for (const item of items) {\n    if (item.kind === 'file') {\n      const file = item.getAsFile();\n      if (file) {\n        fileLikes.push(file);\n      }\n    }\n  }\n  return fileLikes;\n}\n\nexport async function dataTransferItemsToFiles(\n  items: ?(DataTransferItem[]),\n): Promise<FileLike[]> {\n  if (!items || !items.length) {\n    return [];\n  }\n\n  const fileLikes = getFileLikes(items);\n  // If there are files inside the DataTransferItem prefer those\n  if (fileLikes.length) {\n    return fileLikes;\n  }\n\n  // Otherwise extract images from html\n  const blobPromises = [];\n  const parser = new DOMParser();\n  for (const item of items) {\n    if (item.type === 'text/html') {\n      blobPromises.push(\n        new Promise((accept) => {\n          item.getAsString(async (s) => {\n            const doc = parser.parseFromString(s, 'text/html');\n            const imageTags = doc.getElementsByTagName('img');\n\n            const imagePromises = [];\n            for (const tag of imageTags) {\n              if (!tag.src) {\n                continue;\n              }\n              imagePromises.push(\n                (async () => {\n                  let res;\n                  try {\n                    res = await fetch(tag.src);\n                  } catch (e) {\n                    return;\n                  }\n                  const contentType =\n                    res.headers.get('Content-type') ||\n                    'application/octet-stream';\n                  const buf = await res.arrayBuffer();\n                  const blob = new Blob([buf], { type: contentType });\n                  fileLikes.push(blob);\n                })(),\n              );\n            }\n            await Promise.all(imagePromises);\n            accept();\n          });\n        }),\n      );\n    }\n  }\n  await Promise.all(blobPromises);\n  return fileLikes;\n}\n\nexport function inputValueFromEvent(\n  event?: ?SyntheticEvent<HTMLTextAreaElement> | ?Event,\n): ?string {\n  if (!event) {\n    return;\n  }\n  let target;\n  if (event.currentTarget) {\n    target = event.currentTarget;\n  } else {\n    target = event.target;\n  }\n  // Trick flow into believing the target maybe has a value field\n  const inputTarget: { value?: string } = (target: any);\n  return inputTarget.value;\n}\n\nexport function sanitizeURL(url: ?string): ?string {\n  if (url == null) {\n    return url;\n  }\n\n  const proto = URL(url).protocol;\n  // allow http, https, ftp\n  // IMPORTANT: Don't allow data: protocol because of:\n  // <a href=\"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk7PC9zY3JpcHQ+\" target=\"_blank\">here</a>\n  if (proto === 'https:' || proto === 'http:' || proto === 'ftp:') {\n    return url;\n  }\n  return undefined;\n}\n\nexport const textRenderer = (\n  text: string,\n  parentClass: string,\n  onClickMention?: (word: string) => mixed,\n  onClickHashtag?: (word: string) => mixed,\n) => {\n  if (text === undefined) return;\n  return text\n    .split(' ')\n    .map((word, i) => {\n      if (onClickMention && word.includes('@')) {\n        const mention = twitter.extractMentions(word);\n        if (!mention.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`@${mention[0]}`) &&\n              word.slice(0, word.indexOf(mention[0]) - 1)}\n            <a\n              onClick={() => onClickMention && onClickMention(mention[0])}\n              className={`${parentClass}__mention`}\n            >\n              @{mention[0]}\n            </a>\n            {!word.endsWith(mention[0]) &&\n              word.slice(word.indexOf(mention[0]) + mention[0].length)}\n          </React.Fragment>\n        );\n      } else if (onClickHashtag && word.includes('#')) {\n        const hashtag = twitter.extractHashtags(word);\n        if (!hashtag.length) return word;\n\n        return (\n          <React.Fragment key={`item-${i}`}>\n            {!word.startsWith(`#${hashtag[0]}`) &&\n              word.slice(0, word.indexOf(hashtag[0]) - 1)}\n            <a\n              onClick={() => onClickHashtag && onClickHashtag(hashtag[0])}\n              className={`${parentClass}__hashtag`}\n            >\n              #{hashtag[0]}\n            </a>\n            {!word.endsWith(hashtag[0]) &&\n              word.slice(word.indexOf(hashtag[0]) + hashtag[0].length)}\n          </React.Fragment>\n        );\n      }\n      if (anchorme.validate.url(word) || anchorme.validate.email(word)) {\n        const link = anchorme(word, { list: true });\n        if (\n          link[0].protocol !== 'http://' &&\n          link[0].protocol !== 'https://' &&\n          link[0].protocol !== 'mailto:'\n        ) {\n          return word;\n        }\n        const url = link[0].protocol + link[0].encoded;\n        const urlText = _truncate(link[0].encoded, { length: 33 });\n        return (\n          <a\n            href={url}\n            className={`${parentClass}__link`}\n            target=\"blank\"\n            rel=\"noopener\"\n            key={`item-${i}`}\n          >\n            {urlText}\n          </a>\n        );\n      }\n\n      return word;\n    })\n    .reduce((accu, elem) => (accu === null ? [elem] : [accu, ' ', elem]));\n};\n","// @flow\n/* eslint sonarjs/no-identical-functions: 0 */\nimport immutable from 'immutable';\nimport URL from 'url-parse';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ReactionRequestOptions,\n  ReactionFilterResponse,\n  ReactionFilterOptions,\n} from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseReaction,\n} from '../types';\nimport type { FeedInnerProps } from './Feed';\nimport { generateRandomId } from '../utils';\nimport _isPlainObject from 'lodash/isPlainObject';\nimport _isEqual from 'lodash/isEqual';\nimport _remove from 'lodash/remove';\n\n// type FR = FeedResponse<Object, Object>;\ntype FR = FeedResponse<{}, {}>;\ntype RR = ReactionFilterResponse<{}, {}>;\n\ntype FeedManagerState = {|\n  activityOrder: Array<string>,\n  activities: any,\n  refreshing: boolean,\n  lastResponse: ?FR,\n  lastReverseResponse: ?{ next: string },\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  subscription: ?any,\n  activityIdToPath: { [string]: Array<string> },\n  // activities created by creating a reaction with targetFeeds. It's a mapping\n  // of a reaction id to an activity id.\n  reactionActivities: { [string]: string },\n  // Used for finding reposted activities\n  activityIdToPaths: { [string]: Array<Array<string>> },\n  reactionIdToPaths: { [string]: Array<Array<string>> },\n  unread: number,\n  unseen: number,\n  numSubscribers: number,\n  reactionsBeingToggled: { [kind: string]: { [activityId: string]: boolean } },\n  childReactionsBeingToggled: {\n    [kind: string]: { [reactionId: string]: boolean },\n  },\n|};\n\nexport class FeedManager {\n  props: FeedInnerProps;\n  state: FeedManagerState = {\n    activityOrder: [],\n    activities: immutable.Map(),\n    activityIdToPath: {},\n    activityIdToPaths: {},\n    reactionIdToPaths: {},\n    reactionActivities: {},\n    lastResponse: null,\n    lastReverseResponse: null,\n    refreshing: false,\n    realtimeAdds: [],\n    realtimeDeletes: [],\n    subscription: null,\n    unread: 0,\n    unseen: 0,\n    numSubscribers: 0,\n    reactionsBeingToggled: {},\n    childReactionsBeingToggled: {},\n  };\n  registeredCallbacks: Array<() => mixed>;\n\n  constructor(props: FeedInnerProps) {\n    this.props = props;\n    const initialOptions = this.getOptions();\n    this.registeredCallbacks = [];\n    let previousUrl = '';\n    if (initialOptions.id_gte) {\n      previousUrl = `?id_lt=${initialOptions.id_gte}`;\n    } else if (initialOptions.id_gt) {\n      previousUrl = `?id_lte=${initialOptions.id_gt}`;\n    } else if (initialOptions.id_lte) {\n      previousUrl = `?id_gt=${initialOptions.id_lte}`;\n    } else if (initialOptions.id_lt) {\n      previousUrl = `?id_gte=${initialOptions.id_lt}`;\n    }\n    this.state.lastReverseResponse = { next: previousUrl };\n  }\n\n  register(callback: () => mixed) {\n    this.registeredCallbacks.push(callback);\n    this.subscribe();\n  }\n  unregister(callback: () => mixed) {\n    this.registeredCallbacks.splice(\n      this.registeredCallbacks.indexOf(callback),\n      1,\n    );\n    this.unsubscribe();\n  }\n\n  triggerUpdate() {\n    for (const callback of this.registeredCallbacks) {\n      callback();\n    }\n  }\n\n  setState = (\n    changed:\n      | $Shape<FeedManagerState>\n      | ((FeedManagerState) => $Shape<FeedManagerState>),\n  ) => {\n    if (typeof changed === 'function') {\n      changed = changed(this.state);\n    }\n    this.state = { ...this.state, ...changed };\n    this.triggerUpdate();\n  };\n\n  trackAnalytics = (\n    label: string,\n    activity: BaseActivityResponse,\n    track: ?boolean,\n  ) => {\n    const analyticsClient = this.props.analyticsClient;\n\n    if (!track) {\n      return;\n    }\n    if (!analyticsClient) {\n      console.warn(\n        'trackAnalytics was enabled, but analytics client was not initialized. ' +\n          'Please set the analyticsToken prop on StreamApp',\n      );\n      return;\n    }\n\n    const feed = this.props.client.feed(\n      this.props.feedGroup,\n      this.props.userId,\n    );\n\n    analyticsClient.trackEngagement({\n      label,\n      feed_id: feed.id,\n      content: {\n        foreign_id: activity.foreign_id,\n      },\n      location: this.props.analyticsLocation,\n    });\n  };\n\n  getActivityPath = (\n    activity: BaseActivityResponse | string,\n    ...rest: Array<string>\n  ) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    const activityPath = this.state.activityIdToPath[activityId];\n    if (activityPath === undefined) {\n      return [activityId, ...rest];\n    }\n    return [...activityPath, ...rest];\n  };\n\n  getActivityPaths = (activity: BaseActivityResponse | string) => {\n    let activityId;\n    if (typeof activity === 'string') {\n      activityId = activity;\n    } else {\n      activityId = activity.id;\n    }\n\n    return this.state.activityIdToPaths[activityId];\n  };\n\n  getReactionPaths = (reaction: BaseReaction | string) => {\n    let reactionId;\n    if (typeof reaction === 'string') {\n      reactionId = reaction;\n    } else {\n      reactionId = reaction.id;\n    }\n\n    return this.state.reactionIdToPaths[reactionId];\n  };\n\n  onAddReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let reaction;\n    try {\n      if (this.props.doReactionAddRequest) {\n        reaction = await this.props.doReactionAddRequest(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      } else {\n        reaction = await this.props.client.reactions.add(\n          kind,\n          activity,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics(kind, activity, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...reaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n  };\n\n  onRemoveReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    id: string,\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doReactionDeleteRequest) {\n        await this.props.doReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        activity,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.trackAnalytics('un' + kind, activity, options.trackAnalytics);\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      const { reactionIdToPaths } = prevState;\n      for (const path of this.getActivityPaths(activity)) {\n        this.removeFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n\n        activities = activities\n          .updateIn([...path, 'reaction_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_reactions', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn(\n            [...path, 'latest_reactions', kind],\n            (v = immutable.List()) =>\n              v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n\n        this.addFoundReactionIdPaths(\n          activities.getIn(path).toJS(),\n          reactionIdToPaths,\n          path,\n        );\n      }\n\n      return { activities, reactionIdToPaths };\n    });\n\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n  };\n\n  onToggleReaction = async (\n    kind: string,\n    activity: BaseActivityResponse,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.reactionsBeingToggled[kind] || {};\n    if (togglingReactions[activity.id]) {\n      return;\n    }\n    togglingReactions[activity.id] = true;\n    this.state.reactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getActivityPaths(activity)[0], 'own_reactions', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveReaction(kind, activity, last.get('id'), options);\n    } else {\n      await this.onAddReaction(kind, activity, data, options);\n    }\n    delete togglingReactions[activity.id];\n  };\n\n  onAddChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data?: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    let childReaction;\n    try {\n      if (this.props.doChildReactionAddRequest) {\n        childReaction = await this.props.doChildReactionAddRequest(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      } else {\n        childReaction = await this.props.client.reactions.addChild(\n          kind,\n          reaction,\n          data,\n          options,\n        );\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'add-child-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    // this.trackAnalytics(kind, reaction, options.trackAnalytics);\n    const enrichedReaction = immutable.fromJS({\n      ...childReaction,\n      user: this.props.user.full,\n    });\n\n    this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v + 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.unshift(enrichedReaction),\n          )\n          .updateIn(\n            [...path, 'latest_children', kind],\n            (v = immutable.List()) => v.unshift(enrichedReaction),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onRemoveChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    id: string,\n    /* eslint-disable-next-line no-unused-vars */\n    options: { trackAnalytics?: boolean } = {},\n  ) => {\n    try {\n      if (this.props.doChildReactionDeleteRequest) {\n        await this.props.doChildReactionDeleteRequest(id);\n      } else {\n        await this.props.client.reactions.delete(id);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-reaction', {\n        kind,\n        reaction,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    // this.trackAnalytics('un' + kind, reaction, options.trackAnalytics);\n    if (this.state.reactionActivities[id]) {\n      this._removeActivityFromState(this.state.reactionActivities[id]);\n    }\n\n    return this.setState((prevState) => {\n      let { activities } = prevState;\n      for (const path of this.getReactionPaths(reaction)) {\n        activities = activities\n          .updateIn([...path, 'children_counts', kind], (v = 0) => v - 1)\n          .updateIn([...path, 'own_children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          )\n          .updateIn([...path, 'children', kind], (v = immutable.List()) =>\n            v.remove(v.findIndex((r) => r.get('id') === id)),\n          );\n      }\n\n      return { activities };\n    });\n  };\n\n  onToggleChildReaction = async (\n    kind: string,\n    reaction: BaseReaction,\n    data: {},\n    options: { trackAnalytics?: boolean } & ReactionRequestOptions = {},\n  ) => {\n    const togglingReactions = this.state.childReactionsBeingToggled[kind] || {};\n    if (togglingReactions[reaction.id]) {\n      return;\n    }\n    togglingReactions[reaction.id] = true;\n    this.state.childReactionsBeingToggled[kind] = togglingReactions;\n\n    const currentReactions = this.state.activities.getIn(\n      [...this.getReactionPaths(reaction)[0], 'own_children', kind],\n      immutable.List(),\n    );\n\n    const last = currentReactions.last();\n    if (last) {\n      await this.onRemoveChildReaction(kind, reaction, last.get('id'), options);\n    } else {\n      await this.onAddChildReaction(kind, reaction, data, options);\n    }\n    delete togglingReactions[reaction.id];\n  };\n\n  _removeActivityFromState = (activityId: string) =>\n    this.setState(\n      ({\n        activities,\n        activityOrder,\n        activityIdToPath,\n        activityIdToPaths,\n        reactionIdToPaths,\n      }) => {\n        const path = this.getActivityPath(activityId);\n        let outerId = activityId;\n        if (path.length > 1) {\n          // It's an aggregated group we should update the paths of everything in\n          // the list\n          const groupArrayPath = path.slice(0, -1);\n          activityIdToPath = this.removeFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        } else {\n          // Otherwise remove all things inside this activity from the path\n          // objects\n          activityIdToPaths = this.removeFoundActivityIdPaths(\n            activities.get(activityId).toJS(),\n            activityIdToPaths,\n            [activityId],\n          );\n          reactionIdToPaths = this.removeFoundReactionIdPaths(\n            activities.get(activityId).toJS(),\n            reactionIdToPaths,\n            [activityId],\n          );\n        }\n\n        activities = activities.removeIn(path);\n        if (path.length > 1) {\n          const groupArrayPath = path.slice(0, -1);\n          if (activities.getIn(groupArrayPath).size === 0) {\n            outerId = path[0]; //\n          } else {\n            outerId = null;\n          }\n          activityIdToPath = this.addFoundActivityIdPath(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPath,\n            groupArrayPath,\n          );\n          activityIdToPaths = this.addFoundActivityIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            activityIdToPaths,\n            groupArrayPath,\n          );\n          reactionIdToPaths = this.addFoundReactionIdPaths(\n            activities.getIn(groupArrayPath).toJS(),\n            reactionIdToPaths,\n            groupArrayPath,\n          );\n        }\n        if (outerId != null) {\n          activityOrder = activityOrder.filter((id) => id !== outerId);\n        }\n        return {\n          activities,\n          activityOrder,\n          activityIdToPaths,\n          reactionIdToPaths,\n          activityIdToPath,\n        };\n      },\n    );\n\n  onRemoveActivity = async (activityId: string) => {\n    try {\n      if (this.props.doActivityDeleteRequest) {\n        await this.props.doActivityDeleteRequest(activityId);\n      } else {\n        await this.feed().removeActivity(activityId);\n      }\n    } catch (e) {\n      this.props.errorHandler(e, 'delete-activity', {\n        activityId: this.props.feedGroup,\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this._removeActivityFromState(activityId);\n  };\n\n  onMarkAsRead = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('read', group);\n\n  onMarkAsSeen = (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => this._onMarkAs('seen', group);\n\n  _onMarkAs = async (\n    type: 'seen' | 'read',\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => {\n    let groupArray: $ReadOnlyArray<string>;\n    let markArg = group;\n    if (group === true) {\n      groupArray = this.state.activityOrder;\n    } else if (Array.isArray(group)) {\n      groupArray = group.map((g) => g.id);\n      markArg = groupArray;\n    } else {\n      markArg = group.id;\n      groupArray = [group.id];\n    }\n    try {\n      await this.doFeedRequest({\n        limit: 1,\n        id_lte: this.state.activityOrder[0],\n        ['mark_' + type]: markArg,\n      });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n    }\n    this.setState((prevState) => {\n      const counterKey = 'un' + type;\n      let activities = prevState.activities;\n      let counter = prevState[counterKey];\n      for (const groupId of groupArray) {\n        const markerPath = [groupId, 'is_' + type];\n        if (activities.getIn(markerPath) !== false) {\n          continue;\n        }\n        activities = activities.setIn(markerPath, true);\n        counter--;\n      }\n      return { activities, [counterKey]: counter };\n    });\n  };\n\n  getOptions = (extraOptions?: FeedRequestOptions = {}): FeedRequestOptions => {\n    const propOpts = { ...this.props.options };\n    const { id_gt, id_gte, id_lt, id_lte, offset } = extraOptions;\n    if (id_gt || id_gte || id_lt || id_lte || offset != null) {\n      delete propOpts.id_gt;\n      delete propOpts.id_gte;\n      delete propOpts.id_lt;\n      delete propOpts.id_lte;\n      delete propOpts.offset;\n      delete propOpts.refresh;\n    }\n\n    return {\n      withReactionCounts: true,\n      withOwnReactions: true,\n      limit: 10,\n      ...propOpts,\n      ...extraOptions,\n    };\n  };\n\n  doFeedRequest = async (options: FeedRequestOptions): Promise<FR> => {\n    if (this.props.doFeedRequest) {\n      return await this.props.doFeedRequest(\n        this.props.client,\n        this.props.feedGroup,\n        this.props.userId,\n        options,\n      );\n    }\n    return await this.feed().get(options);\n  };\n\n  feed = () => this.props.client.feed(this.props.feedGroup, this.props.userId);\n\n  responseToActivityMap = (response: FR) =>\n    immutable.fromJS(\n      response.results.reduce((map, a) => {\n        map[a.id] = a;\n        return map;\n      }, {}),\n    );\n\n  responseToActivityIdToPath = (response: FR) => {\n    if (\n      response.results.length === 0 ||\n      response.results[0].activities === undefined\n    ) {\n      return {};\n    }\n    const aggregatedResponse = (response: any);\n\n    const map = {};\n    for (const group of aggregatedResponse.results) {\n      group.activities.forEach((act, i) => {\n        map[act.id] = [group.id, 'activities', i];\n      });\n    }\n    return map;\n  };\n\n  responseToActivityIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundActivities((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  feedResponseToReactionIdToPaths = (response: FR, previous: {} = {}) => {\n    const map = previous;\n    const currentPath = [];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(a.id);\n      addFoundReactions((a: any));\n      currentPath.pop();\n    }\n    return map;\n  };\n\n  reactionResponseToReactionIdToPaths = (\n    response: RR,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n    oldLength: number,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    for (const a of response.results) {\n      currentPath.push(oldLength);\n      addFoundReactions((a: any));\n      currentPath.pop();\n      oldLength++;\n    }\n    return map;\n  };\n\n  removeFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function removeFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          removeFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          removeFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    removeFoundReactions(data);\n    return map;\n  };\n\n  removeFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          _remove(map[obj.id], (path) => _isEqual(path, currentPath));\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundActivities(data);\n    return map;\n  };\n\n  removeFoundActivityIdPath = (\n    data: any[],\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    data.forEach((obj, i) => {\n      currentPath.push(i);\n      if (_isEqual(map[obj.id], currentPath)) {\n        delete map[obj.id];\n      }\n      currentPath.pop();\n    });\n    return map;\n  };\n\n  addFoundReactionIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundReactions(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundReactions(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.kind && obj.data) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundReactions(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n\n    addFoundReactions(data);\n    return map;\n  };\n\n  addFoundActivityIdPaths = (\n    data: any,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    const currentPath = [...basePath];\n    function addFoundActivities(obj) {\n      if (Array.isArray(obj)) {\n        obj.forEach((v, i) => {\n          currentPath.push(i);\n          addFoundActivities(v);\n          currentPath.pop();\n        });\n      } else if (_isPlainObject(obj)) {\n        if (obj.id && obj.actor && obj.verb && obj.object) {\n          if (!map[obj.id]) {\n            map[obj.id] = [];\n          }\n          map[obj.id].push([...currentPath]);\n        }\n        for (const k in obj) {\n          currentPath.push(k);\n          addFoundActivities(obj[k]);\n          currentPath.pop();\n        }\n      }\n    }\n    addFoundActivities(data);\n    return map;\n  };\n\n  addFoundActivityIdPath = (\n    data: Array<{ id: string }>,\n    previous: {},\n    basePath: $ReadOnlyArray<mixed>,\n  ) => {\n    const map = previous;\n    data.forEach((obj, i) => {\n      map[obj.id] = [...basePath, i];\n    });\n    return map;\n  };\n\n  responseToReactionActivities = (response: FR) => {\n    if (response.results.length === 0) {\n      return {};\n    }\n    const map = {};\n    function setReactionActivities(activities: any) {\n      for (const a of activities) {\n        if (a.reaction && a.reaction.id) {\n          map[a.reaction.id] = a.id;\n        }\n      }\n    }\n\n    if (response.results[0].activities === undefined) {\n      setReactionActivities(response.results);\n    } else {\n      const aggregatedResponse = (response: any);\n\n      for (const group of aggregatedResponse.results) {\n        setReactionActivities(group.activities);\n      }\n    }\n    return map;\n  };\n\n  unseenUnreadFromResponse(response: FR) {\n    let unseen = 0;\n    let unread = 0;\n    if (typeof response.unseen === 'number') {\n      unseen = response.unseen;\n    }\n    if (typeof response.unread === 'number') {\n      unread = response.unread;\n    }\n    return { unseen, unread };\n  }\n\n  refresh = async (extraOptions: FeedRequestOptions) => {\n    const options = this.getOptions(extraOptions);\n\n    await this.setState({ refreshing: true });\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n\n    const newState = {\n      activityOrder: response.results.map((a) => a.id),\n      activities: this.responseToActivityMap(response),\n      activityIdToPath: this.responseToActivityIdToPath(response),\n      activityIdToPaths: this.responseToActivityIdToPaths(response),\n      reactionIdToPaths: this.feedResponseToReactionIdToPaths(response),\n      reactionActivities: this.responseToReactionActivities(response),\n      refreshing: false,\n      lastResponse: response,\n      realtimeAdds: [],\n      realtimeDeletes: [],\n      ...this.unseenUnreadFromResponse(response),\n    };\n\n    if (options.mark_seen === true) {\n      newState.unseen = 0;\n    }\n    if (options.mark_read === true) {\n      newState.unread = 0;\n    }\n\n    return this.setState(newState);\n  };\n\n  subscribe = async () => {\n    if (this.props.notify) {\n      const feed = this.feed();\n      await this.setState((prevState) => {\n        if (prevState.subscription) {\n          return {};\n        }\n        const subscription = feed.subscribe((data) => {\n          this.setState((prevState) => {\n            const numActivityDiff = data.new.length - data.deleted.length;\n            return {\n              realtimeAdds: prevState.realtimeAdds.concat(data.new),\n              realtimeDeletes: prevState.realtimeDeletes.concat(data.deleted),\n              unread: prevState.unread + numActivityDiff,\n              unseen: prevState.unseen + numActivityDiff,\n            };\n          });\n        });\n\n        subscription.then(\n          () => {\n            console.log(\n              `now listening to changes in realtime for ${this.feed().id}`,\n            );\n          },\n          (err) => {\n            console.error(err);\n          },\n        );\n        return { subscription };\n      });\n    }\n  };\n\n  unsubscribe = async () => {\n    const { subscription } = this.state;\n    if (!subscription) {\n      return;\n    }\n    await subscription;\n    if (this.registeredCallbacks.length === 0) {\n      try {\n        await subscription.cancel();\n        console.log(\n          `stopped listening to changes in realtime for ${this.feed().id}`,\n        );\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  hasNextPage = () => {\n    const lastResponse = this.state.lastResponse;\n    return Boolean(lastResponse && lastResponse.next);\n  };\n\n  hasReverseNextPage = () => {\n    const { lastReverseResponse } = this.state;\n    return Boolean(lastReverseResponse && lastReverseResponse.next);\n  };\n\n  loadNextPage = async () => {\n    const lastResponse = this.state.lastResponse;\n    if (!lastResponse || !lastResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: prevState.activityOrder.concat(\n          response.results.map((a) => a.id),\n        ),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastResponse: response,\n      };\n    });\n  };\n\n  loadReverseNextPage = async () => {\n    const { lastReverseResponse } = this.state;\n    if (!lastReverseResponse || !lastReverseResponse.next) {\n      return;\n    }\n    let cancel = false;\n    await this.setState((prevState) => {\n      if (prevState.refreshing) {\n        cancel = true;\n        return {};\n      }\n      return { refreshing: true };\n    });\n\n    if (cancel) {\n      return;\n    }\n\n    const nextURL = new URL(lastReverseResponse.next, true);\n    const options = this.getOptions(nextURL.query);\n\n    let response: FR;\n    try {\n      response = await this.doFeedRequest(options);\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-feed-next-page', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState((prevState) => {\n      const activities = prevState.activities.merge(\n        this.responseToActivityMap(response),\n      );\n      const activityIdToPath = {\n        ...prevState.activityIdToPath,\n        ...this.responseToActivityIdToPath(response),\n      };\n      return {\n        activityOrder: response.results\n          .map((a) => a.id)\n          .concat(prevState.activityOrder),\n        activities,\n        activityIdToPath,\n        activityIdToPaths: this.responseToActivityIdToPaths(\n          response,\n          prevState.activityIdToPaths,\n        ),\n        reactionIdToPaths: this.feedResponseToReactionIdToPaths(\n          response,\n          prevState.reactionIdToPaths,\n        ),\n        reactionActivities: {\n          ...prevState.reactionActivities,\n          ...this.responseToReactionActivities(response),\n        },\n        refreshing: false,\n        lastReverseResponse: response,\n      };\n    });\n  };\n\n  loadNextReactions = async (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => {\n    let options: ReactionFilterOptions = {\n      activity_id: activityId,\n      kind,\n    };\n\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    if (!activityPath) {\n      activityPath = this.getActivityPath(activityId);\n    }\n    const latestReactionsPath = [\n      ...activityPath,\n      orderPrefix + '_reactions',\n      kind,\n    ];\n    const nextUrlPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'next',\n    ];\n    const refreshingPath = [\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n      kind,\n      'refreshing',\n    ];\n\n    const reactions_extra = this.state.activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([kind, 'next'], '');\n    } else if (oldestToNewest) {\n      // If it's the first request and oldest to newest make sure\n      // order is reversed by this trick with a non existant id.\n      options.id_gt = 'non-existant-' + generateRandomId();\n    }\n\n    const refreshing = this.state.activities.getIn(refreshingPath, false);\n\n    if (!nextUrl || refreshing) {\n      return;\n    }\n\n    this.setState((prevState) => ({\n      activities: prevState.activities.setIn(refreshingPath, true),\n    }));\n\n    options = {\n      ...URL(nextUrl, true).query,\n      ...options,\n    };\n\n    let response;\n    try {\n      if (this.props.doReactionsFilterRequest) {\n        response = await this.props.doReactionsFilterRequest(options);\n      } else {\n        response = await this.props.client.reactions.filter(options);\n      }\n    } catch (e) {\n      this.setState({ refreshing: false });\n      this.props.errorHandler(e, 'get-reactions-next-page', {\n        options,\n      });\n      return;\n    }\n    this.setState((prevState) => ({\n      activities: prevState.activities\n        .setIn(refreshingPath, false)\n        .setIn(nextUrlPath, response.next)\n        .updateIn(latestReactionsPath, (v = immutable.List()) =>\n          v.concat(immutable.fromJS(response.results)),\n        ),\n      reactionIdToPaths: this.reactionResponseToReactionIdToPaths(\n        response,\n        prevState.reactionIdToPaths,\n        latestReactionsPath,\n        prevState.activities.getIn(latestReactionsPath, immutable.List()).toJS()\n          .length,\n      ),\n    }));\n  };\n\n  refreshUnreadUnseen = async () => {\n    let response: FR;\n    try {\n      response = await this.doFeedRequest({ limit: 0 });\n    } catch (e) {\n      this.props.errorHandler(e, 'get-notification-counts', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    return this.setState(this.unseenUnreadFromResponse(response));\n  };\n}\n","// @flow\n\nimport type { FlowRequestTypes } from './types';\nimport stream from 'getstream';\nexport const handleError = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n) => {\n  console.warn(error, type, detail);\n};\n\nexport const getErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  console.warn(error);\n  if (!(error instanceof stream.errors.StreamApiError)) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const response = error.response;\n\n  if (!response.status || !response.body || !response.body.detail) {\n    return fallbackErrorMessage(error, type, detail);\n  }\n  const status = response.status;\n  const text = response.body.detail;\n\n  /* eslint-disable no-magic-numbers */\n  if (status >= 400 && status < 600) {\n    return text;\n  }\n  /* eslint-enable no-magic-numbers */\n\n  return fallbackErrorMessage(error, type, detail);\n};\n\nexport const fallbackErrorMessage = (\n  error: Error,\n  type: FlowRequestTypes,\n  detail: Object,\n): string => {\n  let text = 'Something went wrong';\n  let suffix = '';\n  switch (type) {\n    case 'get-user-info':\n      text += ' when loading user info';\n      break;\n    case 'get-feed':\n      text += ' when loading the feed';\n      break;\n    case 'get-feed-next-page':\n      text += ' when loading the next page of the feed';\n      break;\n    case 'get-notification-counts':\n      text += ' when loading your unread notification counts';\n      break;\n    case 'upload-image':\n      text += ' when uploading your image';\n      suffix = ' If it is, the image is probably too big';\n      break;\n    case 'add-activity':\n      text += ' when submitting your post';\n      break;\n    case ('add-reaction', 'add-child-reaction'):\n      text += ' when submitting your ' + detail.kind;\n      break;\n    case ('delete-reaction', 'delete-child-reaction'):\n      text += ' when removing your ' + detail.kind;\n      break;\n    default:\n  }\n\n  text += '. Is your internet working?' + suffix;\n  return text;\n};\n","import i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport {\n  enTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n} from './i18n';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[] LT',\n    nextDay: '[] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[] LT',\n    lastWeek: '[] dddd, LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /|||/,\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === '') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour;\n    } else if (meridiem === '') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === '') {\n      return hour + 12;\n    }\n  },\n  meridiem(hour) {\n    if (hour < 4) {\n      return '';\n    } else if (hour < 10) {\n      return '';\n    } else if (hour < 17) {\n      return '';\n    } else if (hour < 20) {\n      return '';\n    } else {\n      return '';\n    }\n  },\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourdhui ] LT',\n    nextDay: '[Demain ] LT',\n    nextWeek: 'dddd [] LT',\n    lastDay: '[Hier ] LT',\n    lastWeek: 'dddd [dernier ] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugn saat] LT',\n    nextDay: '[yarn saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dn] LT',\n    lastWeek: '[geen] dddd [saat] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[, ] LT',\n    nextDay: '[, ] LT',\n    lastDay: '[, ] LT',\n  },\n});\n\nconst en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(\n    '_',\n  ),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n    '_',\n  ),\n};\n\nconst defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: (msg) => console.warn(msg),\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs,\n};\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback = () => null;\n  initialized = false;\n\n  t = null;\n  tDateTimeParser = null;\n  translations = {\n    en: { [defaultNS]: enTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n  };\n  /**\n   * dayjs.updateLocale('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales = {};\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins`,\n        error,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: { escapeValue: false },\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage(this.currentLanguage);\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        resources: this.translations,\n        lng: this.currentLanguage,\n      });\n      this.initialized = true;\n\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    } catch (e) {\n      this.logger(`Something went wrong with init:`, e);\n    }\n  }\n\n  localeExists = (language) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  /**\n   * Register translation\n   *\n   * @param {*} language\n   * @param {*} translation\n   * @param {*} customDayjsLocale\n   */\n  registerTranslation(language, translation, customDayjsLocale) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...{ ...en_locale, ...config } }, null, true);\n    }\n  }\n\n  /**\n   * Changes the language.\n   * @param {*} language\n   */\n  async setLanguage(language) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (e) {\n      this.logger(`Failed to set language:`, e);\n    }\n  }\n\n  /**\n   *\n   * @param {*} callback\n   */\n  registerSetLanguageCallback(callback) {\n    this.setLanguageCallback = callback;\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport stream from 'getstream';\n\nimport StreamAnalytics from 'stream-analytics';\nimport type { StreamClient, StreamUser } from 'getstream';\n\nimport type { ErrorHandler } from '../types';\n\nimport { FeedManager } from './FeedManager';\nimport type { FeedProps } from './Feed';\nimport { handleError } from '../errors';\nimport Dayjs from 'dayjs';\n\nimport { Streami18n } from '../Streami18n';\n\nexport const StreamContext = React.createContext({\n  changedUserData: () => {},\n  sharedFeedManagers: {},\n  client: null,\n});\n\nexport const TranslationContext = React.createContext({\n  t: (msg) => msg,\n  tDateTimeParser: (input) => Dayjs(input),\n});\n\nexport function withTranslationContext(\n  OriginalComponent: React.ComponentType<any>,\n) {\n  const ContextAwareComponent = function ContextComponent(props: {}) {\n    return (\n      <TranslationContext.Consumer>\n        {(translationContext) =>\n          OriginalComponent && (\n            <OriginalComponent {...translationContext} {...props} />\n          )\n        }\n      </TranslationContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n\nexport type AppCtx<UserData> = {|\n  client: StreamClient<UserData>,\n  user: StreamUser<UserData>,\n  // We cannot simply take userData from user.data, since the reference to user\n  // will stay the same all the time. Because of this react won't notice that\n  // the internal fields changed so it thinks it doesn't need to rerender.\n  userData: ?UserData,\n  changedUserData: () => void,\n  changeNotificationCounts?: any,\n  analyticsClient?: any,\n  sharedFeedManagers: { [string]: FeedManager },\n  errorHandler: ErrorHandler,\n|};\n\nexport type Streami18Ctx = {|\n  t: (msg: string, data?: Object) => string,\n  tDateTimeParser: (input?: string | number) => Function,\n|};\n\ntype StreamAppProps<UserData> = {|\n  /** The ID of your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  appId: string | number,\n  /** The API key for your app, can be found on the [Stream dashboard](https://getstream.io/dashboard) */\n  apiKey: string,\n  /** The access token for the end user that uses your website, how to generate it can be found [here](https://getstream.io/docs/#frontend_setup) */\n  token: string,\n  /** Any options that [`stream.connect()`](https://getstream.io/docs/#setup) accepts */\n  options?: {},\n  analyticsToken?: string,\n  /** Normaly feed state is local to the feed component, such as FlatFeed and\n   * NotificationFeed. This means that changes in one feed don't affect the\n   * other. However in some cases you want the state to be shared in multiple\n   * components. In the case of the NotificationDropdown you need state shared\n   * between the NotificationFeed and the dropdown badge. This prop should be\n   * used in those cases. Each element in the array provided to `sharedFeeds`\n   * will create one globally managed feed. The default of this prop makes sure\n   * that the NotificationDropdown works correctly. If you want need to change\n   * some props on the NotificationDropdown, you should change them here\n   * instead.\n   */\n  sharedFeeds: Array<FeedProps>,\n  /** The data a user should get when no data is present in stream for this user yet */\n  defaultUserData: UserData,\n  /** A callback to handle errors produced by the components. This should\n   * probably hook into your own notification system. */\n  errorHandler: ErrorHandler,\n  i18nInstance: Streami18n,\n  children?: React.Node,\n|};\n\ntype StreamAppState<UserData> = AppCtx<UserData> & Streami18Ctx;\n\n/**\n * Manages the connection with Stream. Any components that should talk to\n * Stream should be a child of this component.\n */\nexport class StreamApp extends React.Component<\n  StreamAppProps<Object>,\n  StreamAppState<Object>,\n> {\n  static defaultProps = {\n    sharedFeeds: [\n      {\n        feedGroup: 'notification',\n        notify: true,\n        options: { mark_seen: true },\n      },\n    ],\n    defaultUserData: { name: 'Unknown' },\n    errorHandler: handleError,\n  };\n\n  static Consumer = function StreamAppConsumer(props: {\n    children?: (AppCtx<any>) => ?React.Element<any>,\n  }) {\n    return (\n      <StreamContext.Consumer>\n        {(appCtx) => {\n          if (!props.children || !props.children.length) {\n            return null;\n          }\n          if (!appCtx.client || !appCtx.user) {\n            throw new Error(\n              'This component should be a child of a StreamApp component',\n            );\n          }\n          const Child = props.children;\n          return Child(appCtx);\n        }}\n      </StreamContext.Consumer>\n    );\n  };\n\n  constructor(props: StreamAppProps<Object>) {\n    super(props);\n\n    this.state = StreamApp.initClientState(props, {\n      changedUserData: () => {\n        this.setState({ userData: this.state.user.data });\n      },\n      t: null,\n      tDateTimeParser: null,\n    });\n  }\n\n  componentDidUpdate(prevProps: StreamAppProps<Object>) {\n    if (\n      this.props.apiKey !== prevProps.apiKey ||\n      this.props.token !== prevProps.token ||\n      this.props.appId !== prevProps.appId\n    ) {\n      this.getUserInfo();\n    }\n  }\n\n  async componentDidMount() {\n    this.getUserInfo();\n    const { i18nInstance } = this.props;\n    let streami18n;\n\n    if (i18nInstance && i18nInstance instanceof Streami18n) {\n      streami18n = i18nInstance;\n    } else {\n      streami18n = new Streami18n({ language: 'en' });\n    }\n\n    streami18n.registerSetLanguageCallback((t) => {\n      this.setState({ t });\n    });\n\n    const { t, tDateTimeParser } = await streami18n.getTranslators();\n    this.setState({ t, tDateTimeParser });\n  }\n\n  static getDerivedStateFromProps(\n    props: StreamAppProps<Object>,\n    state: StreamAppState<Object>,\n  ) {\n    if (\n      state.client.apiKey !== props.apiKey ||\n      state.client.userToken !== props.token ||\n      state.client.appId !== props.appId\n    ) {\n      return StreamApp.initClientState(props, state);\n    }\n    return null;\n  }\n\n  static initClientState = function(\n    props: StreamAppProps<Object>,\n    state: Object,\n  ) {\n    const client: StreamClient<Object> = stream.connect(\n      props.apiKey,\n      props.token,\n      props.appId,\n      props.options || {},\n    );\n\n    let analyticsClient;\n    if (props.analyticsToken) {\n      analyticsClient = new StreamAnalytics({\n        apiKey: props.apiKey,\n        token: props.analyticsToken,\n      });\n      analyticsClient.setUser(client.userId);\n    }\n\n    const newState = {\n      ...state,\n      client,\n      user: client.currentUser,\n      userData: client.currentUser.data,\n      analyticsClient,\n      sharedFeedManagers: {},\n      errorHandler: props.errorHandler,\n      apiKey: props.apiKey,\n      token: props.token,\n      appId: props.appId,\n    };\n\n    for (const feedProps of props.sharedFeeds) {\n      const manager = new FeedManager({\n        ...feedProps,\n        ...newState,\n      });\n      newState.sharedFeedManagers[manager.feed().id] = manager;\n    }\n\n    return newState;\n  };\n\n  getUserInfo = async () => {\n    try {\n      await this.state.user.getOrCreate(this.props.defaultUserData);\n    } catch (e) {\n      this.props.errorHandler(e, 'get-user-info', {\n        userId: this.state.user.id,\n      });\n      return;\n    }\n    this.state.changedUserData();\n  };\n\n  render() {\n    if (!this.state.t) return null;\n\n    const { t, tDateTimeParser, ...streamContextValue } = this.state;\n    return (\n      <StreamContext.Provider value={streamContextValue}>\n        <TranslationContext.Provider\n          value={{\n            t,\n            tDateTimeParser,\n          }}\n        >\n          <React.Fragment>\n            {this.props.children || (\n              <React.Fragment>\n                <div\n                  style={{\n                    width: 100 + '%',\n                    height: 100 + '%',\n                    minHeight: 400,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    color: '#fff',\n                    backgroundColor: '#008AFF',\n                    fontFamily:\n                      '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol',\n                  }}\n                >\n                  <h3>You are connected to:</h3>\n                  <svg\n                    width=\"117\"\n                    height=\"21\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <g fill=\"none\" fillRule=\"evenodd\">\n                      <path\n                        className=\"stream\"\n                        d=\"M48.812 16.9c.168-.15.317-.317.448-.504.13-.187.196-.401.196-.644 0-.299-.107-.55-.322-.756a2.794 2.794 0 0 0-.784-.518 4.892 4.892 0 0 0-.966-.322c-.336-.075-.616-.14-.84-.196a13.04 13.04 0 0 1-1.736-.546 5.849 5.849 0 0 1-1.414-.784 3.53 3.53 0 0 1-.952-1.092c-.233-.42-.35-.92-.35-1.498 0-.541.13-1.05.392-1.526a4.35 4.35 0 0 1 1.05-1.26 5.156 5.156 0 0 1 1.54-.868 5.387 5.387 0 0 1 1.862-.322c.579 0 1.13.084 1.652.252.523.168.994.397 1.414.686.42.29.775.64 1.064 1.05.29.41.48.868.574 1.372l-2.436.588a2.036 2.036 0 0 0-.728-1.12c-.373-.299-.887-.448-1.54-.448a2.69 2.69 0 0 0-.7.098 2.41 2.41 0 0 0-.672.294c-.205.13-.378.29-.518.476-.14.187-.21.401-.21.644 0 .261.08.485.238.672.159.187.35.34.574.462.224.121.467.22.728.294.261.075.504.14.728.196.99.243 1.81.504 2.464.784.653.28 1.176.588 1.568.924.392.336.667.705.826 1.106.159.401.238.854.238 1.358a3.6 3.6 0 0 1-.406 1.68 4.22 4.22 0 0 1-1.12 1.358 5.304 5.304 0 0 1-1.708.896 6.912 6.912 0 0 1-2.142.322c-1.157 0-2.189-.285-3.094-.854-.905-.57-1.517-1.33-1.834-2.282l2.296-1.036c.299.653.681 1.097 1.148 1.33.467.233.999.35 1.596.35.747 0 1.372-.205 1.876-.616zm12.276 2.772a9.115 9.115 0 0 1-2.268.476c-.747.056-1.419-.051-2.016-.322-.597-.27-1.083-.747-1.456-1.428-.373-.681-.56-1.638-.56-2.87V9.313h-2.226V6.356h.609c.727 0 1.376-.177 1.834-.916.194-.313.22-.633.243-1.502V2.913h2.332v3.443h2.749v2.957h-2.75l-.075 6.635c0 .448.051.803.154 1.064.103.261.275.457.518.588.243.13.56.196.952.196.392 0 .868-.037 1.428-.112l.532 1.988zM69.676 8.78l-.392-.168a5.38 5.38 0 0 0-.392-.112 1.957 1.957 0 0 0-.476-.056c-.541 0-1.045.089-1.512.266a3.849 3.849 0 0 0-1.204.714 3.372 3.372 0 0 0-.798 1.05 2.866 2.866 0 0 0-.294 1.274L64.58 20h-2.716V6.288h2.156l.56 1.484a4.134 4.134 0 0 1 1.47-1.302c.607-.327 1.367-.49 2.282-.49.597 0 1.279.084 2.044.252l-.7 2.548zm7.048 11.256c-.97 0-1.88-.182-2.73-.546a7.032 7.032 0 0 1-2.226-1.498 6.99 6.99 0 0 1-1.498-2.24 6.957 6.957 0 0 1-.546-2.744c0-.97.173-1.885.518-2.744a7.226 7.226 0 0 1 1.4-2.24A6.526 6.526 0 0 1 73.7 6.526a5.91 5.91 0 0 1 2.52-.546c.915 0 1.76.159 2.534.476A5.203 5.203 0 0 1 80.77 7.94c.57.672 1.013 1.526 1.33 2.562.317 1.036.476 2.273.476 3.71h-9.968c.13.485.336.938.616 1.358.28.42.611.784.994 1.092.383.308.812.546 1.288.714.476.168.975.252 1.498.252.71 0 1.367-.13 1.974-.392a4.925 4.925 0 0 0 1.554-1.036l1.68 1.68c-.653.653-1.451 1.176-2.394 1.568-.943.392-1.974.588-3.094.588zM76.22 8.444c-.43 0-.835.084-1.218.252a3.89 3.89 0 0 0-1.064.7 4.32 4.32 0 0 0-.84 1.064c-.233.41-.406.859-.518 1.344h7.084a4.331 4.331 0 0 0-.308-1.288 3.311 3.311 0 0 0-1.75-1.806c-.401-.177-.863-.266-1.386-.266zm20.9-2.156V20h-2.296l-.42-1.84a4.424 4.424 0 0 1-1.792 1.4 5.49 5.49 0 0 1-2.212.476 6.326 6.326 0 0 1-2.618-.546 6.712 6.712 0 0 1-2.128-1.498 7.162 7.162 0 0 1-1.442-2.24 7.116 7.116 0 0 1-.532-2.744c0-.97.177-1.885.532-2.744a7.162 7.162 0 0 1 1.442-2.24 6.712 6.712 0 0 1 2.128-1.498A6.326 6.326 0 0 1 90.4 5.98c.747 0 1.465.145 2.156.434.69.29 1.307.742 1.848 1.358l.42-1.484h2.296zm-6.72 11.34c.541 0 1.055-.121 1.54-.364a3.94 3.94 0 0 0 1.26-.994c.355-.42.635-.91.84-1.47.205-.56.308-1.157.308-1.792s-.103-1.232-.308-1.792a4.834 4.834 0 0 0-.84-1.47 3.94 3.94 0 0 0-1.26-.994 3.398 3.398 0 0 0-1.54-.364c-.541 0-1.055.121-1.54.364a3.94 3.94 0 0 0-1.26.994c-.355.42-.635.91-.84 1.47a5.164 5.164 0 0 0-.308 1.792c0 .635.103 1.232.308 1.792.205.56.485 1.05.84 1.47.355.42.775.751 1.26.994s.999.364 1.54.364zM101.808 20h-2.716V6.288h2.156l.56 1.148a5.135 5.135 0 0 1 1.204-1.022c.467-.29 1.036-.434 1.708-.434.261 0 .555.033.882.098.327.065.663.177 1.008.336a4.3 4.3 0 0 1 .994.644c.317.27.588.62.812 1.05.317-.579.798-1.078 1.442-1.498.644-.42 1.33-.63 2.058-.63.485 0 .999.075 1.54.224.541.15 1.045.43 1.512.84.467.41.85.98 1.148 1.708.299.728.448 1.67.448 2.828V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.597 0-1.12.252-1.568.756-.448.504-.672 1.297-.672 2.38V20h-2.548v-8.448c0-1.157-.238-1.965-.714-2.422-.476-.457-1.106-.686-1.89-.686-.56 0-1.05.215-1.47.644-.42.43-.667 1.101-.742 2.016V20z\"\n                        fill=\"#fff\"\n                      />\n                      <path\n                        className=\"stream-mark\"\n                        d=\"M26.15 6.428l12.802-.908a1 1 0 0 1 .883 1.581L30.88 19.576a1 1 0 0 1-.812.417H9.982a1 1 0 0 1-.811-.416L.19 7.102a1 1 0 0 1 .882-1.582l12.764.908L19.29.333a1 1 0 0 1 1.496.006l5.364 6.09zm2.68 11.587l-8.309-3.105v3.105h8.31zm-9.309 0V14.91l-8.309 3.105h8.31zm-.959-3.847l-8.489 3.17-6.246-8.682 14.735 5.512zm2.9 0l8.49 3.17 6.246-8.682-14.735 5.512zm-1.933-.724V2.994l-6.941 7.837 6.941 2.613zm.992 0V2.996l6.942 7.835-6.942 2.613zm-9.969-3.336l1.597-1.794-7.802-.56 6.205 2.354zm18.863 0l-1.597-1.794 7.803-.56-6.206 2.354z\"\n                        fill=\"#fff\"\n                      />\n                    </g>\n                  </svg>\n                </div>\n              </React.Fragment>\n            )}\n          </React.Fragment>\n        </TranslationContext.Provider>\n      </StreamContext.Provider>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport _isEqual from 'lodash/isEqual';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\nimport type {\n  BaseActivityResponse,\n  BaseActivityGroupResponse,\n  BaseAppCtx,\n  BaseClient,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  AddReactionCallbackFunction,\n  RemoveReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n  AddChildReactionCallbackFunction,\n  RemoveChildReactionCallbackFunction,\n} from '../types';\nimport type { AppCtx } from './StreamApp';\nimport { StreamApp } from './StreamApp';\nimport { FeedManager } from './FeedManager';\n\nexport const FeedContext = React.createContext({});\n\nexport type FeedCtx = {|\n  feedGroup: string,\n  userId?: string,\n  activityOrder: Array<string>,\n  activities: any,\n  unread: number,\n  unseen: number,\n  refresh: (extraOptions?: FeedRequestOptions) => Promise<mixed>,\n  refreshUnreadUnseen: () => Promise<mixed>,\n  loadNextReactions: (\n    activityId: string,\n    kind: string,\n    activityPath?: ?Array<string>,\n    oldestToNewest?: boolean,\n  ) => Promise<mixed>,\n  loadNextPage: () => Promise<mixed>,\n  hasNextPage: boolean,\n  loadReverseNextPage: () => Promise<mixed>,\n  hasReverseNextPage: boolean,\n  refreshing: boolean,\n  hasDoneRequest: boolean,\n  realtimeAdds: Array<{}>,\n  realtimeDeletes: Array<{}>,\n  feedManager: FeedManager,\n  onToggleReaction: ToggleReactionCallbackFunction,\n  onAddReaction: AddReactionCallbackFunction,\n  onRemoveReaction: RemoveReactionCallbackFunction,\n  onToggleChildReaction: ToggleChildReactionCallbackFunction,\n  onAddChildReaction: AddChildReactionCallbackFunction,\n  onRemoveChildReaction: RemoveChildReactionCallbackFunction,\n  onRemoveActivity: (activityId: string) => Promise<mixed>,\n  onMarkAsRead: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  onMarkAsSeen: (\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n  getActivityPath: (\n    activity: BaseActivityResponse | string,\n    ...Array<string>\n  ) => Array<string>,\n|};\n\nexport type FeedProps = {|\n  /** The feed group part of the feed */\n  feedGroup: string,\n  /** The user_id part of the feed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify?: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /* Components to display in the feed */\n  children?: React.Node,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\nexport class Feed extends React.Component<FeedProps> {\n  // Used to avoid unmount-remount behaviour, which causes\n  // unsubscribe-subscribe behaviour.\n  _appCtxWrapperFunc = (appCtx: AppCtx<any>) => (\n    <FeedInner {...this.props} {...appCtx} />\n  );\n\n  render() {\n    return <StreamApp.Consumer>{this._appCtxWrapperFunc}</StreamApp.Consumer>;\n  }\n}\n\nexport type FeedInnerProps = {| ...FeedProps, ...BaseAppCtx |};\n\ntype FeedState = {|\n  manager: FeedManager,\n|};\n\nclass FeedInner extends React.Component<FeedInnerProps, FeedState> {\n  constructor(props: FeedInnerProps) {\n    super(props);\n    const feedId = props.client.feed(props.feedGroup, props.userId).id;\n    let manager = props.sharedFeedManagers[feedId];\n    if (!manager) {\n      manager = new FeedManager(props);\n    }\n\n    this.state = {\n      manager,\n    };\n  }\n  boundForceUpdate = () => this.forceUpdate();\n\n  componentDidMount() {\n    return this.state.manager.register(this.boundForceUpdate);\n  }\n\n  componentDidUpdate(prevProps) {\n    const clientDifferent = this.props.client !== prevProps.client;\n    const notifyDifferent = this.props.notify !== prevProps.notify;\n    const feedDifferent =\n      this.props.userId !== prevProps.userId ||\n      this.props.feedGroup !== prevProps.feedGroup;\n    const optionsDifferent = !_isEqual(this.props.options, prevProps.options);\n    const doFeedRequestDifferent =\n      this.props.doFeedRequest !== prevProps.doFeedRequest;\n\n    if (\n      clientDifferent ||\n      feedDifferent ||\n      optionsDifferent ||\n      doFeedRequestDifferent\n    ) {\n      // TODO: Implement\n    }\n    if (clientDifferent || feedDifferent || notifyDifferent) {\n      // TODO: Implement\n    }\n  }\n\n  componentWillUnmount() {\n    return this.state.manager.unregister(this.boundForceUpdate);\n  }\n\n  getCtx = () => {\n    const { manager } = this.state;\n    const state = manager.state;\n    return {\n      getActivityPath: manager.getActivityPath,\n      onToggleReaction: manager.onToggleReaction,\n      onAddReaction: manager.onAddReaction,\n      onRemoveReaction: manager.onRemoveReaction,\n      onToggleChildReaction: manager.onToggleChildReaction,\n      onAddChildReaction: manager.onAddChildReaction,\n      onRemoveChildReaction: manager.onRemoveChildReaction,\n      onRemoveActivity: manager.onRemoveActivity,\n      onMarkAsRead: manager.onMarkAsRead,\n      onMarkAsSeen: manager.onMarkAsSeen,\n      hasDoneRequest: state.lastResponse != null,\n      refresh: manager.refresh,\n      refreshUnreadUnseen: manager.refreshUnreadUnseen,\n      loadNextReactions: manager.loadNextReactions,\n      loadNextPage: manager.loadNextPage,\n      hasNextPage: manager.hasNextPage(),\n      loadReverseNextPage: manager.loadReverseNextPage,\n      hasReverseNextPage: manager.hasReverseNextPage(),\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      activityOrder: state.activityOrder,\n      activities: state.activities,\n      realtimeAdds: state.realtimeAdds,\n      realtimeDeletes: state.realtimeDeletes,\n      refreshing: state.refreshing,\n      unread: state.unread,\n      unseen: state.unseen,\n      feedManager: manager,\n    };\n  };\n\n  render() {\n    return (\n      <FeedContext.Provider value={this.getCtx()}>\n        {this.props.children}\n      </FeedContext.Provider>\n    );\n  }\n}\n","export default \"1519fc1dc6e473ee.png\"","// @flow\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\n\nexport type Props = {|\n  size?: number,\n  image?: string,\n  alt?: string,\n  rounded?: boolean,\n  circle?: boolean,\n  onClick?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Avatar.md\n */\nexport default class Avatar extends React.PureComponent<Props> {\n  render() {\n    const { size, image, alt, rounded, circle } = this.props;\n    return (\n      <React.Fragment>\n        <img\n          style={size ? { width: `${size}px`, height: `${size}px` } : {}}\n          className={`raf-avatar ${rounded ? 'raf-avatar--rounded' : ''} ${\n            circle ? 'raf-avatar--circle' : ''\n          }`}\n          onClick={this.props.onClick}\n          src={image ? image : placeholder}\n          alt={alt || ''}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { humanizeTimestamp } from '../utils';\nimport Avatar from './Avatar';\n\nimport type { Renderable } from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport { smartRender } from '../utils';\nimport { withTranslationContext } from '../Context';\n\nexport type Props = {|\n  username: ?string,\n  avatar?: string,\n  subtitle?: string,\n  time?: string, // text that should be displayed as the time\n  timestamp?: string | number, // a timestamp that should be humanized\n  icon?: string,\n  onClickUser?: () => mixed,\n  follow?: boolean,\n  Right?: Renderable,\n  AfterUsername?: React.Node,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/UserBar.md\n */\nclass UserBar extends React.Component<Props> {\n  render() {\n    const { tDateTimeParser } = this.props;\n    let time = this.props.time;\n    if (time === undefined && this.props.timestamp != null) {\n      time = humanizeTimestamp(this.props.timestamp, tDateTimeParser);\n    }\n    return (\n      <div className=\"raf-user-bar\">\n        {this.props.avatar ? (\n          <Avatar\n            onClick={this.props.onClickUser}\n            size={50}\n            circle\n            image={this.props.avatar}\n          />\n        ) : null}\n        <div className=\"raf-user-bar__details\">\n          <p\n            className=\"raf-user-bar__username\"\n            onClick={this.props.onClickUser}\n          >\n            {this.props.username}\n          </p>\n          {this.props.AfterUsername}\n          {this.props.icon !== undefined ? (\n            <img src={this.props.icon} alt=\"icon\" />\n          ) : null}\n          {this.props.subtitle ? (\n            <p className=\"raf-user-bar__subtitle\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {this.props.subtitle}\n              </time>\n            </p>\n          ) : null}\n        </div>\n        <React.Fragment>\n          {smartRender(this.props.Right, {}, () => (\n            <p className=\"raf-user-bar__extra\">\n              <time\n                dateTime={this.props.timestamp}\n                title={this.props.timestamp}\n              >\n                {time}\n              </time>\n            </p>\n          ))}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(UserBar);\n","// @flow\n\nimport React from 'react';\nimport placeholder from '../images/placeholder.png';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nexport type Props = {|\n  image?: ?string,\n  images?: Array<{ image: string }>,\n  alt?: ?string,\n  title?: ?string,\n  url?: string,\n  nolink?: boolean,\n  description?: ?string,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Card.md\n */\nexport default class Card extends React.Component<Props> {\n  trimUrl = (url: string) => {\n    let trimmedUrl;\n    if (url !== undefined || url !== null) {\n      trimmedUrl = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/')[0];\n    }\n    return trimmedUrl;\n  };\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { alt, images, handleClose, nolink } = this.props;\n    let image = this.props.image;\n    if (!image && images && images.length) {\n      image = images[0].image;\n    }\n    const url = sanitizeURL(this.props.url);\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    return (\n      <a\n        href={!nolink ? url : null}\n        target=\"blank\"\n        rel=\"noopener\"\n        className={`raf-card ${\n          image !== undefined ? 'raf-card--with-image' : ''\n        }`}\n      >\n        {handleClose && image ? (\n          <IconButton onClick={(e) => this._handleClose(e)}>\n            <div dangerouslySetInnerHTML={{ __html: svg }} />\n          </IconButton>\n        ) : null}\n        {image !== undefined && (\n          <div className=\"raf-card__image\">\n            <img\n              src={image == null ? placeholder : image}\n              alt={alt || this.props.title || this.props.description || ''}\n            />\n          </div>\n        )}\n        <div className=\"raf-card__content\">\n          <div className=\"raf-card__content-left\">\n            <p className=\"raf-card__title\">{this.props.title}</p>\n            <p className=\"raf-card__url\">{this.trimUrl(url || '')}</p>\n            <p className=\"raf-card__description\">{this.props.description}</p>\n          </div>\n          {handleClose && image === undefined ? (\n            <div className=\"raf-card__content-right\">\n              <IconButton onClick={(e) => this._handleClose(e)}>\n                <div dangerouslySetInnerHTML={{ __html: svg }} />\n              </IconButton>\n            </div>\n          ) : null}\n        </div>\n      </a>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport { sanitizeURL } from '../utils';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faPlayCircle,\n  faPauseCircle,\n} from '@fortawesome/free-regular-svg-icons';\n\nimport type { OgData } from '../types';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n|};\n\ntype State = {|\n  open: boolean,\n  playing: boolean,\n  progress: number,\n  updateProgress?: IntervalID | null,\n|};\n\nexport default class Audio extends React.Component<Props, State> {\n  audioRef: { current: HTMLAudioElement | null };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null,\n    };\n    this.audioRef = React.createRef();\n  }\n\n  playAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n      this.updateProgress();\n      this.setState({\n        playing: true,\n        updateProgress: setInterval(this.updateProgress, 500),\n      });\n      //$FlowFixMe\n      this.audioRef.current.play();\n    }\n  };\n\n  pauseAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n    }\n    this.setState({ playing: false });\n    window.clearInterval(this.state.updateProgress);\n  };\n\n  updateProgress = () => {\n    if (this.audioRef.current !== null) {\n      const position = this.audioRef.current.currentTime;\n      const duration = this.audioRef.current.duration;\n      const progress = (100 / duration) * position;\n      this.setState({\n        progress,\n      });\n      if (position === duration) {\n        this.pauseAudio();\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    window.clearInterval(this.state.updateProgress);\n  }\n\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { og } = this.props;\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const audio = og.audios[0];\n    const url = sanitizeURL(audio.secure_url || audio.audio);\n    const image = ((og.images || [])[0] || {}).image;\n    return (\n      <div className=\"raf-audio\">\n        <div className=\"raf-audio__wrapper\">\n          <audio ref={this.audioRef}>\n            <source src={url} type=\"audio/mp3\" />\n          </audio>\n          <div className=\"raf-audio__image\">\n            <div className=\"raf-audio__image--overlay\">\n              {!this.state.playing ? (\n                <div\n                  onClick={() => this.playAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPlayCircle} />\n                </div>\n              ) : (\n                <div\n                  onClick={() => this.pauseAudio()}\n                  className=\"raf-audio__image--button\"\n                >\n                  <FontAwesomeIcon icon={faPauseCircle} />\n                </div>\n              )}\n            </div>\n            <img src={image} alt={`${og.description}`} />\n          </div>\n          <div className=\"raf-audio__content\">\n            <span className=\"raf-audio__content--title\">\n              <strong>{og.title}</strong>\n            </span>\n            <span className=\"raf-audio__content--subtitle\">\n              {og.description}\n            </span>\n            <div className=\"raf-audio__content--progress\">\n              <div style={{ width: `${this.state.progress}%` }} />\n            </div>\n          </div>\n          {this.props.handleClose ? (\n            <IconButton onClick={(e) => this._handleClose(e)}>\n              <div dangerouslySetInnerHTML={{ __html: svg }} />\n            </IconButton>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { IconButton } from 'react-file-utils';\nimport type { OgData } from '../types';\nimport { sanitizeURL } from '../utils';\nimport URL from 'url-parse';\n\ntype Props = {|\n  og: OgData,\n  handleClose?: (e: SyntheticEvent<>) => mixed,\n  urlsThatAreGifs: Array<string>,\n|};\n\n/**\n * Component for rendering an Youtube or Vimeo embedded player\n * @example ./examples/Video.md\n */\nexport default class Video extends React.Component<Props> {\n  static defaultProps = {\n    urlsThatAreGifs: ['i.giphy.com', 'i.imgur.com', 'media.giphy.com'],\n  };\n  _handleClose = (e: SyntheticEvent<>) => {\n    if (this.props.handleClose) {\n      this.props.handleClose(e);\n    }\n  };\n\n  render() {\n    const { videos, images = [] } = this.props.og;\n    let video: {\n      video?: string,\n      secure_url?: string,\n      type?: string,\n      width?: string,\n      height?: string,\n    } = {};\n\n    const svg =\n      '<svg width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M465 5c5.53 0 10 4.47 10 10s-4.47 10-10 10-10-4.47-10-10 4.47-10 10-10zm3.59 5L465 13.59 461.41 10 460 11.41l3.59 3.59-3.59 3.59 1.41 1.41 3.59-3.59 3.59 3.59 1.41-1.41-3.59-3.59 3.59-3.59-1.41-1.41z\" id=\"b\"/><filter x=\"-30%\" y=\"-30%\" width=\"160%\" height=\"160%\" filterUnits=\"objectBoundingBox\" id=\"a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"/><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\" in=\"shadowBlurOuter1\"/></filter></defs><g transform=\"translate(-451 -1)\" fill-rule=\"nonzero\" fill=\"none\"><use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\"/><use fill=\"#FFF\" fill-rule=\"evenodd\" xlink:href=\"#b\"/></g></svg>';\n    const CloseButton = Boolean(this.props.handleClose) && (\n      <IconButton onClick={(e) => this._handleClose(e)}>\n        <div dangerouslySetInnerHTML={{ __html: svg }} />\n      </IconButton>\n    );\n\n    for (let i = 0; i < videos.length; i++) {\n      if (videos[i].type === 'text/html' || videos[i].type === 'video/mp4') {\n        video = videos[i];\n        break;\n      }\n    }\n    const url = sanitizeURL(video.secure_url || video.video);\n\n    if (video.type === 'text/html') {\n      const newUrl = url && url.split('/watch?v=').join('/embed/');\n      return (\n        <div className=\"raf-video__frame\">\n          {CloseButton}\n          <iframe\n            title={'embedded player'}\n            id=\"ytplayer\"\n            type={video.type}\n            width={video.width}\n            height={video.height}\n            src={newUrl}\n            frameBorder=\"0\"\n          />\n        </div>\n      );\n    } else {\n      let videoProps = {\n        controls: true,\n        // Try fetching length of video etc\n        preload: 'metadata',\n        poster: '',\n      };\n\n      if (images[0]) {\n        if (images[0].secure_url) videoProps.poster = images[0].secure_url;\n        else if (images[0].image) videoProps.poster = images[0].image;\n      }\n\n      const parsedUrl = new URL(url);\n\n      for (const gifUrl of this.props.urlsThatAreGifs) {\n        if (gifUrl === parsedUrl.host) {\n          videoProps = {\n            // Load the video right away\n            preload: 'auto',\n            // Display it like it's a gif\n            autoPlay: true,\n            muted: true,\n            loop: true,\n            controls: false,\n            // On mobile don't open video fullscreen\n            playsInline: true,\n            'webkit-playsinline': 'webkit-playsinline',\n          };\n\n          break;\n        }\n      }\n\n      return (\n        <div className=\"raf-video__video\">\n          <video className=\"raf-video__video--video\" {...videoProps}>\n            <source src={url} type={video.type} />\n          </video>\n          <div className=\"raf-video__video--content\">\n            <div className=\"raf-video__video--title\">{this.props.og.title}</div>\n            <div className=\"raf-video__video--description\">\n              {this.props.og.description}\n            </div>\n            <div className=\"raf-video__video--link\">\n              <a href={sanitizeURL(this.props.og.url)} target=\"blank\">\n                {this.props.og.site_name}\n              </a>\n            </div>\n          </div>\n          {CloseButton}\n        </div>\n      );\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Lightbox from 'react-images';\n\nexport type Props = {|\n  images: string[],\n|};\nexport type State = {|\n  lightboxIsOpen: boolean,\n  currentImage: number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/Gallery.md\n */\nexport default class Gallery extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      lightboxIsOpen: false,\n      currentImage: 0,\n    };\n  }\n\n  gotoPrevious = () => {\n    this.setState({\n      currentImage: this.state.currentImage - 1,\n    });\n  };\n  gotoNext = () => {\n    this.setState({\n      currentImage: this.state.currentImage + 1,\n    });\n  };\n  openLightbox = (image?: number) => {\n    this.setState({\n      lightboxIsOpen: true,\n      currentImage: image,\n    });\n  };\n\n  closeLightbox = () => {\n    this.setState({\n      lightboxIsOpen: false,\n      currentImage: 0,\n    });\n  };\n\n  getImages = (images: any) =>\n    images.map((item) => ({\n      src: item,\n    }));\n\n  //  TODO: Provide way to add alt tags.\n  render() {\n    const { images } = this.props;\n\n    return (\n      <React.Fragment>\n        <div className=\"raf-gallery\">\n          {images.slice(0, 5).map((image, i) => (\n            <div\n              className={`img ${\n                i === 4 && images.length > 5 ? 'img--last' : ''\n              }`}\n              onClick={() => this.openLightbox(i)}\n              key={`image-${i}`}\n            >\n              <img src={image} className={`raf-gallery__image `} alt=\"\" />\n              <React.Fragment>\n                {i === 4 && images.length > 5 ? (\n                  <p>{images.length - 4} more</p>\n                ) : null}\n              </React.Fragment>\n            </div>\n            // </div>\n          ))}\n\n          <Lightbox\n            backdropClosesModal\n            images={this.getImages(images)}\n            isOpen={this.state.lightboxIsOpen}\n            onClickPrev={this.gotoPrevious}\n            onClickNext={this.gotoNext}\n            onClose={this.closeLightbox}\n            currentImage={this.state.currentImage}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\n\nimport UserBar from './UserBar';\nimport Card from './Card';\nimport Audio from './Audio';\nimport Video from './Video';\nimport { FileIcon } from 'react-file-utils';\nimport Gallery from './Gallery';\n\nimport type { ActivityData, Renderable } from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport {\n  smartRender,\n  sanitizeURL,\n  userOrDefault,\n  textRenderer,\n  humanizeTimestamp,\n} from '../utils';\nimport { withTranslationContext } from '../Context';\n\ntype Props = {\n  Header?: Renderable,\n  Content?: Renderable,\n  Footer?: Renderable,\n  HeaderRight?: Renderable,\n  onClickUser?: (?any) => mixed,\n  sub?: string,\n  icon?: string,\n  activity: ActivityData,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/Activity.md\n */\nclass Activity extends React.Component<Props> {\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  renderHeader = () => {\n    const { tDateTimeParser } = this.props;\n    const actor = userOrDefault(this.props.activity.actor);\n\n    return (\n      <div style={{ padding: '8px 16px' }}>\n        <UserBar\n          username={actor.data.name}\n          avatar={actor.data.profileImage}\n          onClickUser={this._getOnClickUser()}\n          subtitle={\n            this.props.HeaderRight != null\n              ? humanizeTimestamp(this.props.activity.time, tDateTimeParser)\n              : undefined\n          }\n          timestamp={this.props.activity.time}\n          icon={this.props.icon}\n          Right={this.props.HeaderRight}\n        />\n      </div>\n    );\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(userOrDefault(this.props.activity.actor));\n    }\n  };\n\n  renderContent = () => {\n    let { text } = this.props.activity;\n\n    if (text === undefined) {\n      if (typeof this.props.activity.object === 'string') {\n        text = this.props.activity.object;\n      } else {\n        text = '';\n      }\n    }\n    text = text.trim();\n    const { attachments = {} } = this.props.activity;\n\n    return (\n      <div className=\"raf-activity__content\">\n        {!!text && (\n          <div style={{ padding: '8px 16px' }}>\n            <p>\n              {textRenderer(\n                text,\n                'raf-activity',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        )}\n\n        {this.props.activity.verb === 'repost' &&\n          this.props.activity.object instanceof Object && (\n            <Card {...this.props.activity.object.data} />\n          )}\n\n        {attachments &&\n          attachments.og &&\n          Object.keys(attachments.og).length > 0 && (\n            <div style={{ padding: '8px 16px' }}>\n              {attachments.og.videos ? (\n                <Video og={attachments.og} />\n              ) : attachments.og.audios ? (\n                <Audio og={attachments.og} />\n              ) : (\n                <Card {...attachments.og} />\n              )}\n            </div>\n          )}\n\n        {Boolean(this.props.activity.image) &&\n        this.props.activity.image !== undefined ? (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery\n              images={[this.props.activity.image]}\n              // resizeMethod=\"resize\"\n            />\n          </div>\n        ) : null}\n\n        {attachments.images && Boolean(attachments.images.length) && (\n          <div style={{ padding: '8px 0' }}>\n            <Gallery images={attachments.images} />\n          </div>\n        )}\n\n        {attachments.files && Boolean(attachments.files.length) && (\n          <ol className=\"raf-activity__attachments\">\n            {attachments.files.map(({ name, url, mimeType }, i) => (\n              <a href={sanitizeURL(url)} download key={i}>\n                <li className=\"raf-activity__file\">\n                  <FileIcon mimeType={mimeType} filename={name} /> {name}\n                </li>\n              </a>\n            ))}\n          </ol>\n        )}\n      </div>\n    );\n  };\n\n  renderFooter = () => null;\n\n  render() {\n    return (\n      <div className=\"raf-activity\">\n        <React.Fragment>\n          {smartRender(this.props.Header, {}, this.renderHeader)}\n          {smartRender(this.props.Content, {}, this.renderContent)}\n          {smartRender(this.props.Footer, {}, this.renderFooter)}\n        </React.Fragment>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(Activity);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  to?: string,\n  onClick?: (SyntheticEvent<>) => mixed,\n|};\n\n/**\n *\n * @example ./examples/Link.md\n */\nexport default class Link extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <a\n          href={this.props.to}\n          className=\"raf-link\"\n          onClick={this.props.onClick}\n        >\n          {this.props.children}\n        </a>\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Link from './Link';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\nexport type Props = Streami18Ctx & {|\n  adds: Array<{}>,\n  deletes: Array<{}>,\n  labelSingle?: string,\n  labelPlural?: string,\n  /** A function that returns either the string to display or null in case no\n   * notification should be displayed */\n  labelFunction?: ({\n    count: number,\n    deleteCount: number,\n    addCount: number,\n    labelPlural?: string,\n    labelSingle?: string,\n  }) => string | null,\n  onClick?: () => mixed,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/NewActivitiesNotification.md\n */\nclass NewActivitiesNotification extends React.Component<Props> {\n  static defaultProps = {\n    adds: [],\n    deletes: [],\n  };\n\n  _labelFunction = () => {\n    const {\n      adds,\n      deletes,\n      labelSingle,\n      labelPlural,\n      labelFunction,\n      t,\n    } = this.props;\n    const addCount = (adds || []).length;\n    const deleteCount = (deletes || []).length;\n    const count = addCount + deleteCount;\n    if (labelFunction) {\n      return labelFunction({\n        count,\n        addCount,\n        deleteCount,\n        labelSingle,\n        labelPlural,\n      });\n    }\n    if (addCount === 0) {\n      return null;\n    }\n    let singleNotificationText = '';\n    let pluralNotificationText = '';\n\n    if (labelSingle) {\n      singleNotificationText = `You have 1 new ${labelSingle}`;\n    } else {\n      singleNotificationText = t('You have 1 new notification');\n    }\n\n    if (labelPlural) {\n      pluralNotificationText = `You have ${addCount} new ${labelPlural}`;\n    } else {\n      pluralNotificationText = t(\n        'You have {{ notificationCount }} new notifications',\n        {\n          notificationCount: addCount,\n        },\n      );\n    }\n\n    return addCount > 1 ? pluralNotificationText : singleNotificationText;\n  };\n  render() {\n    const label = this._labelFunction();\n    if (label === null) {\n      return null;\n    }\n\n    return (\n      <button\n        className=\"raf-new-activities-notification\"\n        type=\"button\"\n        onClick={this.props.onClick}\n      >\n        <Link>{label}</Link>\n      </button>\n    );\n  }\n}\n\nexport default withTranslationContext(NewActivitiesNotification);\n","// @flow\nimport * as React from 'react';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport type Props = {|\n  children: React.Node,\n  buttonStyle: string,\n  type: 'button' | 'submit' | 'reset',\n  onClick?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  onKeyPress?: (SyntheticEvent<HTMLButtonElement>) => mixed,\n  disabled: boolean,\n  loading: boolean,\n|};\n\n/**\n *\n * @example ./examples/Button.md\n */\nexport default class Button extends React.Component<Props> {\n  static defaultProps = {\n    buttonStyle: 'info',\n    type: 'button',\n    disabled: false,\n    loading: false,\n  };\n\n  render() {\n    const { children, buttonStyle } = this.props;\n    return (\n      <button\n        className={`raf-button${\n          buttonStyle ? ' raf-button--' + buttonStyle : ''\n        }`}\n        onClick={this.props.onClick}\n        onKeyPress={this.props.onKeyPress}\n        type={this.props.type}\n        disabled={this.props.disabled}\n      >\n        {!this.props.loading ? (\n          children\n        ) : (\n          <LoadingIndicator\n            backgroundColor=\"rgba(255,255,255,0.1)\"\n            color=\"rgba(255,255,255,0.4)\"\n          />\n        )}\n      </button>\n    );\n  }\n}\n","//@flow\nimport * as React from 'react';\n\nimport Button from './Button';\n\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  onClick: () => mixed,\n  refreshing: boolean,\n  children: React.Node,\n|} & Streami18Ctx;\n\nclass LoadMoreButton extends React.Component<Props> {\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"raf-load-more-button\">\n        <Button\n          onClick={this.props.onClick}\n          buttonStyle=\"info\"\n          disabled={this.props.refreshing}\n          loading={this.props.refreshing}\n        >\n          {this.props.children ? this.props.children : t('Load more')}\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(LoadMoreButton);\n","//@flow\nimport * as React from 'react';\nimport LoadMoreButton from './LoadMoreButton';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\ntype Props = {|\n  /** The button the user should click to click to load more */\n  LoadMoreButton: Renderable,\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** The paginated content to display */\n  children: React.Node,\n|};\n\nexport default class LoadMorePaginator extends React.Component<Props> {\n  static defaultProps = {\n    LoadMoreButton,\n  };\n  render() {\n    return (\n      <React.Fragment>\n        {!this.props.reverse && this.props.children}\n        {this.props.hasNextPage\n          ? smartRender(this.props.LoadMoreButton, {\n              refreshing: this.props.refreshing,\n              onClick: this.props.loadNextPage,\n            })\n          : null}\n        {this.props.reverse && this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  text: string,\n|} & Streami18Ctx;\nclass FeedPlaceholder extends React.Component<Props> {\n  render() {\n    const { t, text } = this.props;\n    return (\n      <div className=\"raf-feed-placeholder\">\n        <p>{text || t('No data to display...')}</p>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(FeedPlaceholder);\n","// @flow\nimport * as React from 'react';\n\nimport Activity from './Activity';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport type { Props as NotifierProps } from './NewActivitiesNotification';\nimport type { Streami18Ctx } from '../Context';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { Feed, FeedContext, withTranslationContext } from '../Context';\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\nimport type {\n  FeedRequestOptions,\n  FeedResponse,\n  ActivityResponse,\n} from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, ranking, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render an activity in the feed */\n  Activity: Renderable,\n  /** Component to show when the feed is refreshing **/\n  LoadingIndicator: Renderable,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** If true, feed shows the Notifier component when new activities are added */\n  notify: boolean,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|} & Streami18Ctx;\n\n/**\n * Renders a feed of activities, this component is a StreamApp consumer\n * and must always be a child of the `<StreamApp>` element\n * @example ./examples/FlatFeed.md\n */\nclass FlatFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'timeline',\n    notify: false,\n    Activity,\n    Notifier: (props: NotifierProps) => (\n      <NewActivitiesNotification\n        labelPlural=\"activities\"\n        labelSingle=\"activity\"\n        {...props}\n      />\n    ),\n    Placeholder: FeedPlaceholder,\n    Paginator: LoadMorePaginator,\n    LoadingIndicator,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={this.props.options}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n        doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <FlatFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass FlatFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(this.props.options);\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  _renderWrappedActivity = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderActivity}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _childProps = () => ({\n    onToggleReaction: this.props.onToggleReaction,\n    onAddReaction: this.props.onAddReaction,\n    onRemoveReaction: this.props.onRemoveReaction,\n    onToggleChildReaction: this.props.onToggleChildReaction,\n    onAddChildReaction: this.props.onAddChildReaction,\n    onRemoveChildReaction: this.props.onRemoveChildReaction,\n    onRemoveActivity: this.props.onRemoveActivity,\n    feedGroup: this.props.feedGroup,\n    userId: this.props.userId,\n  });\n\n  _renderActivity = (item: ActivityResponse<Object, Object>) => {\n    const args = {\n      activity: item,\n      ...this._childProps(),\n    };\n\n    return smartRender(this.props.Activity, { ...args });\n  };\n\n  render() {\n    const notifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n      labelFunction: undefined,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n      loadReverseNextPage,\n      hasReverseNextPage,\n      t,\n    } = this.props;\n    if (hasReverseNextPage) {\n      notifierProps.onClick = loadReverseNextPage;\n      notifierProps.labelFunction = () => t('Load activities');\n    }\n\n    if (this.props.activities.size === 0 && this.props.hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div className=\"raf-loading-indicator\">\n          {smartRender(this.props.LoadingIndicator, {})}\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedActivity({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n\nexport default withTranslationContext(FlatFeed);\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport type { UserResponse } from '../types';\nimport { userOrDefault } from '../utils';\n\nexport type Props = {|\n  /* The list of users to display */\n  users: UserResponse[],\n  /* The size of the avatar in px */\n  avatarSize: number,\n  /* The limit of avatars to display */\n  limit: number,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/AvatarGroup.md\n */\nexport default class AvatarGroup extends React.Component<Props> {\n  static defaultProps = {\n    avatarSize: 30,\n    limit: 5,\n  };\n\n  _getOnClickUser(user: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, user)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, user: UserResponse) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(user));\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"raf-avatar-group\">\n        {this.props.users &&\n          this.props.users.slice(0, this.props.limit).map((user, i) => (\n            <div className=\"raf-avatar-group__avatar\" key={`avatar-${i}`}>\n              <Avatar\n                onClick={this._getOnClickUser(user)}\n                image={user && user.data.profileImage}\n                size={this.props.avatarSize}\n                circle\n              />\n            </div>\n          ))}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { userOrDefault } from '../utils';\nimport type { ActivityData } from '../types';\n\nimport { Thumbnail } from 'react-file-utils';\n\ntype Props = {|\n  activity: ActivityData,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/AttachedActivity.md\n */\nexport default class AttachedActivity extends React.Component<Props> {\n  render() {\n    const { activity } = this.props;\n    const images =\n      activity.attachments !== undefined &&\n      activity.attachments.images !== undefined\n        ? activity.attachments.images\n        : [];\n    const actor = userOrDefault(activity.actor);\n\n    if (\n      activity.verb === 'repost' ||\n      activity.verb === 'post' ||\n      activity.verb === 'comment'\n    ) {\n      return (\n        <div className=\"raf-attached-activity\">\n          {images.length === 0 && (\n            <React.Fragment>\n              <p className=\"raf-attached-activity__author\">\n                <strong>{actor.data.name}</strong>\n              </p>\n              <p className=\"raf-attached-activity__content\">\n                {activity.object}\n              </p>\n            </React.Fragment>\n          )}\n          {images.length > 0 && (\n            <div className=\"raf-attached-activity__images\">\n              {images.slice(0, 5).map((image, i) => (\n                <Thumbnail image={image} size={50} key={`image-${i}`} />\n              ))}\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { IconButton } from 'react-file-utils';\n\nexport type Props = {|\n  children?: React.Node,\n|};\n\nexport type State = {|\n  open: boolean,\n|};\n\n/**\n * Simple wrapper for a small dropdown.\n *\n * @example ./examples/Dropdown.md\n */\nexport default class Dropdown extends React.Component<Props, State> {\n  dropdownBox: { current: null | HTMLDivElement };\n\n  constructor(props: Props) {\n    super(props);\n    this.showMenu = this.showMenu.bind(this);\n    this.hideMenu = this.hideMenu.bind(this);\n    this.dropdownBox = React.createRef();\n\n    this.state = {\n      open: false,\n    };\n  }\n\n  componentWillUnmount() {\n    // $FlowFixMe\n    document.removeEventListener('click', this.hideMenu);\n  }\n  // $FlowFixMe\n  hideMenu = (e) => {\n    // $FlowFixMe\n    if (!this.dropdownBox.current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  // $FlowFixMe\n  showMenu = (e) => {\n    e.stopPropagation();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"raf-dropdown\">\n        <IconButton onClick={this.showMenu}>\n          <svg\n            className=\"raf-dropdown__button\"\n            width=\"12\"\n            height=\"8\"\n            viewBox=\"0 0 12 8\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M1.41 0L6 4.77 10.59 0 12 1.469l-6 6.25-6-6.25z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </IconButton>\n\n        {this.state.open && (\n          <div className=\"raf-dropdown__box\" ref={this.dropdownBox}>\n            {this.props.children}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport AvatarGroup from './AvatarGroup';\nimport AttachedActivity from './AttachedActivity';\nimport Dropdown from './Dropdown';\nimport Link from './Link';\n\nimport { humanizeTimestamp, userOrDefault } from '../utils';\nimport type { UserResponse, BaseActivityGroupResponse } from '../types';\nimport type { Streami18Ctx } from '../Context';\nimport { withTranslationContext } from '../Context';\n\ntype Props = {\n  /* The activity group to display in this notification */\n  activityGroup: any,\n  /* Callback to call when clicking on a notification */\n  onClickNotification?: (activityGroup: BaseActivityGroupResponse) => mixed,\n  /* Callback to call when clicking on a user in the notification */\n  onClickUser?: (UserResponse) => mixed,\n  /* Callback to mark a notification as read, if not supplied the dropdown used\n   * to mark as read will not be shown */\n  onMarkAsRead?: ?(\n    group:\n      | true\n      | BaseActivityGroupResponse\n      | $ReadOnlyArray<BaseActivityGroupResponse>,\n  ) => Promise<mixed>,\n} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/Notification.md\n */\nclass Notification extends React.Component<Props> {\n  getUsers = (activities: any) =>\n    activities.map((item) => userOrDefault(item.actor));\n\n  _getOnClickUser(actor: UserResponse) {\n    return this.props.onClickUser\n      ? (e: SyntheticEvent<>) => this.onClickUser(e, actor)\n      : undefined;\n  }\n\n  onClickUser = (e: SyntheticEvent<>, actor: any) => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      e.stopPropagation();\n      return onClickUser(userOrDefault(actor));\n    }\n  };\n\n  _getOnClickNotification() {\n    return this.props.onClickNotification\n      ? this.onClickNotification\n      : undefined;\n  }\n\n  onClickNotification = (e: SyntheticEvent<>) => {\n    const { onClickNotification } = this.props;\n    if (onClickNotification) {\n      e.stopPropagation();\n      return onClickNotification(this.props.activityGroup);\n    }\n  };\n\n  render() {\n    let headerText, headerSubtext;\n    const { activityGroup, onMarkAsRead, t, tDateTimeParser } = this.props;\n    const activities = activityGroup.activities;\n    const latestActivity = activities[0];\n    const lastActor = userOrDefault(latestActivity.actor);\n\n    if (typeof latestActivity.object === 'string') {\n      return null;\n    }\n\n    if (activities.length === 1) {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t('{{ actorName }} liked your {{ activityVerb }}', {\n            actorName: lastActor.data.name,\n            activityVerb: latestActivity.object.verb,\n          });\n          break;\n        case 'repost':\n          headerText = t('{{ actorName }} reposted your {{ activityVerb }}', {\n            actorName: lastActor.data.name,\n            activityVerb: latestActivity.object.verb,\n          });\n          break;\n        case 'follow':\n          headerText = t('{{ actorName }} followed you', {\n            actorName: lastActor.data.name,\n          });\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    } else if (activities.length > 1 && activities.length < 1 + 1 + 1) {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t(\n            '{{ actorName }} and 1 other liked your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'repost':\n          headerText = t(\n            '{{ actorName }} and 1 other reposted your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'follow':\n          headerText = t('{{ actorName }} and 1 other followed you', {\n            actorName: lastActor.data.name,\n          });\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} and 1 other commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    } else {\n      switch (latestActivity.verb) {\n        case 'like':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others liked your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'repost':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others reposted your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        case 'follow':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others followed you',\n            { actorName: lastActor.data.name },\n          );\n          break;\n        case 'comment':\n          headerText = t(\n            '{{ actorName }} and {{ countOtherActors }} others commented on your {{ activityVerb }}',\n            {\n              actorName: lastActor.data.name,\n              activityVerb: latestActivity.object.verb,\n            },\n          );\n          break;\n        default:\n          console.warn(\n            'No notification styling found for your verb, please create your own custom Notification group.',\n          );\n      }\n    }\n\n    return (\n      <div\n        onClick={this._getOnClickNotification()}\n        className={\n          'raf-notification' +\n          (activityGroup.is_read ? ' raf-notification--read' : '')\n        }\n      >\n        <Avatar\n          onClick={this._getOnClickUser(lastActor)}\n          image={lastActor.data.profileImage}\n          circle\n          size={30}\n        />\n        <div className=\"raf-notification__content\">\n          <div className=\"raf-notification__header\">\n            <strong>{headerText}</strong> {headerSubtext}\n            {!activityGroup.is_read && onMarkAsRead && (\n              <Dropdown>\n                <div>\n                  <Link\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onMarkAsRead(activityGroup);\n                    }}\n                  >\n                    Mark&nbsp;as&nbsp;read\n                  </Link>\n                </div>\n              </Dropdown>\n            )}\n          </div>\n          <div>\n            <small>\n              {humanizeTimestamp(latestActivity.time, tDateTimeParser)}\n            </small>\n          </div>\n          {latestActivity.verb !== 'follow' ? (\n            <AttachedActivity activity={latestActivity.object} />\n          ) : null}\n        </div>\n        <div className=\"raf-notification__extra\">\n          {activities.length > 1 && latestActivity.verb === 'follow' ? (\n            <AvatarGroup\n              onClickUser={this.props.onClickUser}\n              avatarSize={30}\n              users={this.getUsers(activities.slice(1, activities.length))}\n            />\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(Notification);\n","// @flow\nimport * as React from 'react';\n\nimport { Feed, FeedContext } from '../Context';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport Notification from './Notification';\nimport { LoadingIndicator } from 'react-file-utils';\nimport FeedPlaceholder from './FeedPlaceholder';\n\nimport { smartRender } from '../utils';\n\nimport type {\n  BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseReaction,\n} from '../types';\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** the component used to render a group in the feed */\n  Group: Renderable,\n  /** if true, feed shows the NewActivitiesNotification component when new activities are added */\n  notify: boolean,\n  /** The component used to render the new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed **/\n  Placeholder: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n|};\n\n/**\n * Renders a notificationfeed, this component is a StreamApp consumer and must\n * always be a child of the `<StreamApp>` element.\n * @example ./examples/NotificationFeed.md\n */\nexport default class NotificationFeed extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: false,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n  };\n\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions(this.props.options)}\n        notify={this.props.notify}\n        doFeedRequest={this.props.doFeedRequest}\n        doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n        doReactionAddRequest={this.props.doReactionAddRequest}\n        doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n        doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n        doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => <NotificationFeedInner {...this.props} {...feedCtx} />}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationFeedInner extends React.Component<PropsInner> {\n  listRef = React.createRef();\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n    const ref = this.listRef;\n    if (ref && ref.current) {\n      ref.current.scrollToOffset({ offset: 0 });\n    }\n  };\n  async componentDidMount() {\n    await this._refresh();\n  }\n\n  componentWillUnmount() {\n    this.props.activities.clear();\n    this.props.activityOrder.splice(0, this.props.activityOrder.length);\n  }\n\n  _renderWrappedGroup = ({ item }: { item: any }) => (\n    <ImmutableItemWrapper\n      renderItem={this._renderGroup}\n      item={item}\n      feedGroup={this.props.feedGroup}\n      userId={this.props.userId}\n      key={item.get('id')}\n    />\n  );\n\n  _renderGroup = (item: BaseActivityResponse) => {\n    const args = {\n      activityGroup: item,\n      feedGroup: this.props.feedGroup,\n      userId: this.props.userId,\n      onToggleReaction: this.props.onToggleReaction,\n      onAddReaction: this.props.onAddReaction,\n      onRemoveReaction: this.props.onRemoveReaction,\n      onToggleChildReaction: this.props.onToggleChildReaction,\n      onAddChildReaction: this.props.onAddChildReaction,\n      onRemoveChildReaction: this.props.onRemoveChildReaction,\n      onRemoveActivity: this.props.onRemoveActivity,\n      onMarkAsRead: this.props.onMarkAsRead,\n      onMarkAsSeen: this.props.onMarkAsSeen,\n    };\n    return smartRender(this.props.Group, args);\n  };\n\n  render() {\n    const notifierProps = {\n      adds: this.props.realtimeAdds,\n      deletes: this.props.realtimeDeletes,\n      onClick: this._refresh,\n    };\n    const {\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      hasDoneRequest,\n    } = this.props;\n\n    if (this.props.activities.size === 0 && hasDoneRequest) {\n      return (\n        <React.Fragment>\n          {smartRender(this.props.Notifier, notifierProps)}\n          {smartRender(this.props.Placeholder)}\n        </React.Fragment>\n      );\n    }\n\n    if (refreshing && !hasDoneRequest) {\n      return (\n        <div style={{ padding: 40, backgroundColor: 'rgb(247, 247, 247' }}>\n          <LoadingIndicator />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {smartRender(this.props.Notifier, notifierProps)}\n        {smartRender(this.props.Paginator, {\n          loadNextPage,\n          hasNextPage,\n          refreshing,\n          children: this.props.activityOrder.map((id) =>\n            this._renderWrappedGroup({\n              item: this.props.activities.get(id),\n            }),\n          ),\n        })}\n      </React.Fragment>\n    );\n  }\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\n\nimport FlatFeed from './FlatFeed';\n\nimport type { FeedRequestOptions } from 'getstream';\nimport type { Renderable, BaseActivityResponse, BaseReaction } from '../types';\n\ntype Props = {|\n  activityId: string,\n  feedGroup: string,\n  userId?: string,\n  options?: FeedRequestOptions,\n  analyticsLocation?: string,\n  Activity?: Renderable,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** Override reactions filter request */\n  doReactionsFilterRequest?: (options: {}) => Promise<Object>,\n|};\n\n/**\n * Shows the detail of a single activity\n * @example ./examples/SinglePost.md\n */\nexport default class SinglePost extends React.Component<Props> {\n  render() {\n    return (\n      <React.Fragment>\n        <FlatFeed\n          feedGroup={this.props.feedGroup}\n          userId={this.props.userId}\n          options={{\n            withRecentReactions: true,\n            ...this.props.options,\n          }}\n          analyticsLocation={this.props.analyticsLocation}\n          Activity={this.props.Activity}\n          doFeedRequest={(client, feedGroup, userId, options) =>\n            client\n              .feed(feedGroup, userId)\n              .getActivityDetail(this.props.activityId, options)\n          }\n          doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n          doReactionAddRequest={this.props.doReactionAddRequest}\n          doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n          doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n          doChildReactionDeleteRequest={this.props.doChildReactionDeleteRequest}\n          doReactionsFilterRequest={this.props.doReactionsFilterRequest}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\n\ntype PanelStyle = 'rounded' | 'square';\n\nexport type Props = {|\n  panelStyle: PanelStyle,\n  children: React.Node,\n|};\n\n/**\n * Simple Components that renders a panel. To be combined with PanelHeader, PanelContent, PanelFooter. Used by the library to render the B2BActivity and StatusUpdateForm\n *\n * @example ./examples/Panel.md\n */\nexport default class Panel extends React.Component<Props> {\n  static defaultProps = {\n    panelStyle: 'rounded',\n  };\n\n  render() {\n    return (\n      <div className={`raf-panel raf-panel--${this.props.panelStyle}`}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n|};\n\nexport default class PanelHeading extends React.Component<Props> {\n  render() {\n    return <div className=\"raf-panel-header\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelFooter extends React.Component {\n  render() {\n    return <div className=\"raf-panel-footer\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\n\nexport default class PanelContent extends React.Component {\n  render() {\n    return <div className=\"raf-panel-content\">{this.props.children}</div>;\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { emojiIndex } from 'emoji-mart';\nimport ReactTextareaAutocomplete from '@webscopeio/react-textarea-autocomplete';\nimport type { Trigger, ReactRefObjectOrFunction } from '../types';\n\nexport type Props = {|\n  rows: number,\n  maxLength?: number,\n  placeholder: string,\n  onChange: (event: SyntheticEvent<HTMLTextAreaElement> | Event) => mixed,\n  onPaste: (event: SyntheticClipboardEvent<HTMLTextAreaElement>) => mixed,\n  value?: string,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n|};\n\nconst AutocompleteItem = ({ entity: { id, native } }) => (\n  <div>\n    {native} {id}\n  </div>\n);\n\n/**\n * Component is described here.\n *\n * @example ./examples/Textarea.md\n */\nexport default class Textarea extends React.Component<Props> {\n  static defaultProps = {\n    rows: 3,\n    placeholder: 'Share your opinion',\n    trigger: {},\n  };\n\n  render() {\n    const { innerRef, trigger } = this.props;\n    return (\n      <ReactTextareaAutocomplete\n        loadingComponent={LoadingIndicator}\n        trigger={{\n          ':': {\n            dataProvider: (token) => {\n              const emojis = emojiIndex.search(token) || [];\n              return emojis.slice(0, 10);\n            },\n            component: AutocompleteItem,\n            output: (item) => ({\n              key: item.id,\n              text: item.native,\n              caretPosition: 'next',\n            }),\n          },\n          ...trigger,\n        }}\n        innerRef={\n          innerRef &&\n          ((el) => {\n            if (typeof innerRef === 'function') {\n              innerRef(el);\n            } else if (this.props.innerRef != null) {\n              innerRef.current = el;\n            }\n          })\n        }\n        rows={this.props.rows}\n        maxLength={this.props.maxLength}\n        className=\"raf-textarea__textarea\"\n        containerClassName=\"raf-textarea\"\n        dropdownClassName=\"raf-emojisearch\"\n        listClassName=\"raf-emojisearch__list\"\n        itemClassName=\"raf-emojisearch__item\"\n        placeholder={this.props.placeholder}\n        onChange={this.props.onChange}\n        onSelect={this.props.onChange}\n        onPaste={this.props.onPaste}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { Picker } from 'emoji-mart';\nimport type { Emoji } from '../types';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  onSelect?: (emoji: Emoji) => mixed,\n|} & Streami18Ctx;\n\ntype State = {|\n  open: boolean,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/EmojiPicker.md\n */\nclass EmojiPicker extends React.Component<Props, State> {\n  emojiPicker = React.createRef();\n  state = {\n    open: false,\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideMenu);\n  }\n\n  hideMenu = (e: MouseEvent) => {\n    const { current } = this.emojiPicker;\n    if (current && !current.contains(e.target)) {\n      this.setState({ open: false }, () => {\n        document.removeEventListener('click', this.hideMenu);\n      });\n    }\n  };\n\n  showMenu = (e: SyntheticMouseEvent<HTMLElement>) => {\n    e.preventDefault();\n\n    this.setState({ open: true }, () => {\n      document.addEventListener('click', this.hideMenu);\n    });\n  };\n\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"raf-emoji-picker\">\n        {' '}\n        {this.state.open && (\n          <div className=\"raf-emoji-picker__container\" ref={this.emojiPicker}>\n            <Picker\n              emoji=\"point_up\"\n              title={t('Pick your emoji')}\n              onSelect={this.props.onSelect}\n            />\n          </div>\n        )}\n        <div\n          role=\"button\"\n          onClick={this.showMenu}\n          className=\"raf-emoji-picker__button\"\n        >\n          <svg\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M10 15.498c2.33 0 4.304-1.456 5.106-3.5H4.892c.802 2.044 2.777 3.5 5.107 3.5zm-3.5-6.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm7 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-3.5 9a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8zm-.006-18C4.467-.002 0 4.475 0 9.998s4.468 10 9.995 10c5.526 0 10.005-4.477 10.005-10s-4.479-10-10.005-10z\"\n              fill=\"#A0B2B8\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(EmojiPicker);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children: React.Node,\n  size: number,\n|};\n/**\n * Component is described here.\n *\n * @example ./examples/Title.md\n */\nexport default class Title extends React.Component<Props> {\n  static defaultProps = {\n    size: 18,\n  };\n  render() {\n    return (\n      <div className=\"raf-title\" style={{ fontSize: this.props.size }}>\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\n/* eslint sonarjs/cognitive-complexity: 0 */\nimport * as React from 'react';\n\nimport Panel from './Panel';\nimport PanelHeading from './PanelHeader';\nimport PanelFooter from './PanelFooter';\nimport PanelContent from './PanelContent';\nimport Textarea from './Textarea';\nimport Avatar from './Avatar';\nimport Card from './Card';\nimport Video from './Video';\nimport Audio from './Audio';\nimport EmojiPicker from './EmojiPicker';\nimport {\n  ImageUploadButton,\n  FileUploadButton,\n  ImagePreviewer,\n  FilePreviewer,\n  ImageDropzone,\n  LoadingIndicator,\n} from 'react-file-utils';\nimport Button from './Button';\nimport Title from './Title';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBookmark } from '@fortawesome/free-regular-svg-icons';\nimport _uniq from 'lodash/uniq';\nimport _debounce from 'lodash/debounce';\nimport _difference from 'lodash/difference';\nimport _includes from 'lodash/includes';\nimport anchorme from 'anchorme';\n\nimport { StreamApp, withTranslationContext } from '../Context';\nimport {\n  generateRandomId,\n  dataTransferItemsToFiles,\n  dataTransferItemsHaveFiles,\n  inputValueFromEvent,\n} from '../utils';\nimport type {\n  Attachments,\n  BaseAppCtx,\n  BaseActivityResponse,\n  OgData,\n  CustomActivityArgData,\n  ImageUpload,\n  FileUpload,\n  FileLike,\n  Trigger,\n  ReactRefObjectOrFunction,\n} from '../types';\nimport type { Streami18Ctx } from '../Context';\n\nimport type { ActivityArgData } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be posted to */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be posted to  */\n  userId?: string,\n  /** The verb that should be used to post the activity */\n  activityVerb: string,\n  /** If you want to change something about the activity data that this form\n   * sends to stream you can do that with this function. This function gets the\n   * activity data that the form would send normally and should return the\n   * modified activity data that should be posted instead.\n   *\n   * For instance, this would add a target field to the activity:\n   *\n   * ```javascript\n   * &lt;StatusUpdateForm\n   *   modifyActivityData={(data) => ({...data, target: 'Group:1'})}\n   * />\n   * ```\n   * */\n  modifyActivityData: (activityData: {}) => ActivityArgData<{}, {}>,\n  /** Add extra footer item */\n  FooterItem?: React.Node,\n  /** A callback to run after the activity is posted successfully */\n  onSuccess?: (response: BaseActivityResponse) => mixed,\n  /** Override Post request */\n  doRequest?: (activityData: {}) => Promise<BaseActivityResponse>,\n  /** An extra trigger for ReactTextareaAutocomplete, this can be used to show\n   * a menu when typing @xxx or #xxx, in addition to the emoji menu when typing\n   * :xxx  */\n  trigger?: Trigger,\n  /** A ref that is bound to the textarea element */\n  innerRef?: ReactRefObjectOrFunction<HTMLTextAreaElement>,\n  /** The header to display */\n  Header: React.Node,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/StatusUpdateForm.md\n */\n\nclass StatusUpdateForm extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n    activityVerb: 'post',\n    modifyActivityData: (d: {}) => d,\n  };\n\n  render() {\n    const { t, Header } = this.props;\n    const HeaderComponent = Header ? Header : <Title>{t('New Post')}</Title>;\n    const forwardedProps = {\n      ...this.props,\n      Header: HeaderComponent,\n    };\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => <StatusUpdateFormInner {...forwardedProps} {...appCtx} />}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype OgState = {|\n  scrapingActive: boolean,\n  data?: ?OgData,\n  dismissed: boolean,\n|};\n\ntype State = {|\n  text: string,\n  imageUploads: { [string]: ImageUpload },\n  imageOrder: Array<string>,\n  fileUploads: { [string]: FileUpload },\n  fileOrder: Array<string>,\n  ogUrlOrder: string[],\n  ogStateByUrl: { [string]: OgState },\n  ogActiveUrl: ?string,\n  submitting: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseAppCtx |};\nclass StatusUpdateFormInner extends React.Component<PropsInner, State> {\n  _handleOgDebounced: (string) => mixed;\n\n  textInputRef = React.createRef();\n\n  attachTextInputRef = (el) => {\n    this.textInputRef.current = el;\n    if (typeof this.props.innerRef === 'function') {\n      this.props.innerRef(el);\n    } else if (this.props.innerRef != null) {\n      this.props.innerRef.current = el;\n    }\n  };\n\n  state = {\n    text: '',\n    imageUploads: {},\n    imageOrder: [],\n    fileUploads: {},\n    fileOrder: [],\n    ogUrlOrder: [],\n    ogStateByUrl: {},\n    ogActiveUrl: null,\n    submitting: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this._handleOgDebounced = _debounce(this.handleOG, 250, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  handleOG(text) {\n    let newUrls;\n    let removedUrls;\n\n    const urlInfos = anchorme(text, {\n      list: true,\n      exclude: (info) =>\n        info.protocol !== 'https://' && info.protocol !== 'http://',\n    });\n    const urls = _uniq(urlInfos.map((info) => info.protocol + info.encoded));\n\n    this.setState(\n      (prevState) => {\n        const oldUrls = prevState.ogUrlOrder;\n        newUrls = _difference(urls, oldUrls);\n        removedUrls = _difference(oldUrls, urls);\n        const newState: $Shape<State> = {\n          ogUrlOrder: urls,\n        };\n\n        if (!_includes(urls, prevState.ogActiveUrl)) {\n          // !urls.includes(prevState.ogActiveUrl) replaced with lodash\n          newState.ogActiveUrl = null;\n          for (const url of urls) {\n            const ogState = prevState.ogStateByUrl[url];\n            if (ogState && ogState.data && !ogState.dismissed) {\n              newState.ogActiveUrl = url;\n              break;\n            }\n          }\n        }\n\n        for (const url of removedUrls) {\n          delete prevState.ogStateByUrl[url];\n        }\n        for (const url of newUrls) {\n          prevState.ogStateByUrl[url] = {\n            scrapingActive: true,\n            dismissed: false,\n          };\n        }\n        newState.ogStateByUrl = prevState.ogStateByUrl;\n        return newState;\n      },\n      () => {\n        newUrls.forEach(async (url) => {\n          let resp;\n          try {\n            resp = await this.props.client.og(url);\n          } catch (e) {\n            console.warn(e);\n            this.setState((prevState) => {\n              prevState.ogStateByUrl[url] = {\n                scrapingActive: false,\n                dismissed: false,\n              };\n              return { ogStateByUrl: prevState.ogStateByUrl };\n            });\n            return;\n          }\n          resp.url = url;\n          this.setState((prevState) => {\n            prevState.ogStateByUrl[url] = {\n              scrapingActive: false,\n              data: resp,\n              dismissed: false,\n            };\n            const newState: $Shape<State> = {\n              ogStateByUrl: prevState.ogStateByUrl,\n            };\n            if (!prevState.ogActiveUrl) {\n              newState.ogActiveUrl = url;\n            }\n\n            return newState;\n          });\n        });\n      },\n    );\n  }\n\n  _dismissOg = (og) => {\n    if (og && og.url != null) {\n      this.setState((prevState) => {\n        const { ogStateByUrl } = prevState;\n        for (const url in ogStateByUrl) {\n          ogStateByUrl[url].dismissed = true;\n        }\n\n        return {\n          ogActiveUrl: null,\n          ogStateByUrl,\n        };\n      });\n    }\n  };\n\n  _text = () => this.state.text.trim();\n\n  _object = () => {\n    for (const image of this._orderedImages()) {\n      if (image.url) {\n        return image.url;\n      }\n    }\n    return this._text();\n  };\n\n  _orderedImages = () =>\n    this.state.imageOrder.map((id) => this.state.imageUploads[id]);\n\n  _uploadedImages = (): Array<ImageUpload> =>\n    this._orderedImages().filter((upload) => upload.url);\n\n  _orderedFiles = () =>\n    this.state.fileOrder.map((id) => this.state.fileUploads[id]);\n\n  _uploadedFiles = (): Array<FileUpload> =>\n    this._orderedFiles().filter((upload) => upload.url);\n\n  _orderedOgStates = (): OgState[] =>\n    this.state.ogUrlOrder\n      .map((url) => this.state.ogStateByUrl[url])\n      .filter(Boolean);\n\n  _isOgScraping = () =>\n    this._orderedOgStates().some((state) => state.scrapingActive);\n\n  _availableOg = (): OgData[] =>\n    this._orderedOgStates()\n      .map((state) => state.data)\n      .filter(Boolean);\n\n  _activeOg = (): ?OgData => {\n    const { ogActiveUrl } = this.state;\n\n    if (ogActiveUrl) {\n      return this.state.ogStateByUrl[ogActiveUrl].data;\n    }\n  };\n\n  _canSubmit = () =>\n    Boolean(this._object()) &&\n    this._orderedImages().every((upload) => upload.state !== 'uploading') &&\n    this._orderedFiles().every((upload) => upload.state !== 'uploading') &&\n    !this._isOgScraping() &&\n    !this.state.submitting;\n\n  async addActivity() {\n    const activity: CustomActivityArgData = {\n      actor: this.props.client.currentUser,\n      verb: this.props.activityVerb,\n      object: this._object(),\n    };\n    const uploadedImages = this._uploadedImages();\n    const uploadedFiles = this._uploadedFiles();\n\n    const attachments: Attachments = {\n      og: this._activeOg(),\n    };\n\n    if (uploadedImages) {\n      attachments.images = uploadedImages\n        .map((image) => image.url)\n        .filter(Boolean);\n      activity.text = this._text();\n    }\n    if (uploadedFiles) {\n      attachments.files = uploadedFiles.map((upload) => ({\n        // url will never actually be empty string because _uploadedFiles\n        // filters those out.\n        url: upload.url || '',\n        name: upload.file.name,\n        mimeType: upload.file.type,\n      }));\n    }\n\n    if (Object.keys(attachments).length > 0) {\n      activity.attachments = attachments;\n    }\n\n    const modifiedActivity = this.props.modifyActivityData(activity);\n    if (this.props.doRequest) {\n      return await this.props.doRequest(modifiedActivity);\n    } else {\n      return await this.props.client\n        .feed(this.props.feedGroup, this.props.userId)\n        .addActivity(modifiedActivity);\n    }\n  }\n\n  onSubmitForm = async (e) => {\n    e.preventDefault();\n    this.setState({ submitting: true });\n    let response;\n    try {\n      response = await this.addActivity();\n    } catch (e) {\n      this.setState({ submitting: false });\n      this.props.errorHandler(e, 'add-activity', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    this.setState({\n      text: '',\n      imageUploads: {},\n      imageOrder: [],\n      fileUploads: {},\n      fileOrder: [],\n      ogUrlOrder: [],\n      ogStateByUrl: {},\n      ogActiveUrl: null,\n      submitting: false,\n    });\n    if (this.props.onSuccess) {\n      this.props.onSuccess(response);\n    }\n  };\n  _getTextAreaElement = () => this.textInputRef.current;\n\n  _onSelectEmoji = (emoji) => this._insertText(emoji.native);\n\n  _insertText = async (insertedText) => {\n    let newCursorPosition;\n\n    await this.setState((prevState) => {\n      const prevText = prevState.text;\n      const textareaElement = this._getTextAreaElement();\n      if (!textareaElement) {\n        return { text: prevText + insertedText };\n      }\n      // Insert emoji at previous cursor position\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition = selectionStart + insertedText.length;\n      return {\n        text:\n          prevText.slice(0, selectionStart) +\n          insertedText +\n          prevText.slice(selectionEnd),\n      };\n    });\n\n    const textareaElement = this._getTextAreaElement();\n    if (!textareaElement || newCursorPosition == null) {\n      return;\n    }\n    // Update cursorPosition\n    textareaElement.selectionStart = newCursorPosition;\n    textareaElement.selectionEnd = newCursorPosition;\n  };\n\n  _uploadNewFiles = (files: $ReadOnlyArray<FileLike>) => {\n    for (const file of files) {\n      if (file.type.startsWith('image/')) {\n        this._uploadNewImage(file);\n      } else if (file instanceof File) {\n        this._uploadNewFile(file);\n      }\n    }\n  };\n\n  _uploadNewImage = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        imageOrder: prevState.imageOrder.concat(id),\n        imageUploads: prevState.imageUploads,\n      };\n    });\n    if (FileReader) {\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\n      // to release the previews when not used anymore though.\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        this.setState((prevState) => {\n          prevState.imageUploads[id].previewUri = event.target.result;\n          return { imageUploads: prevState.imageUploads };\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n    return this._uploadImage(id);\n  };\n\n  _uploadNewFile = async (file: File) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id] = {\n        id,\n        file,\n        state: 'uploading',\n      };\n      return {\n        fileOrder: prevState.fileOrder.concat(id),\n        fileUploads: prevState.fileUploads,\n      };\n    });\n\n    return this._uploadFile(id);\n  };\n\n  _uploadImage = async (id: string) => {\n    const img = this.state.imageUploads[id];\n    if (!img) {\n      return;\n    }\n    const { file } = img;\n\n    await this.setState((prevState) => {\n      prevState.imageUploads[id].state = 'uploading';\n      return { imageUploads: prevState.imageUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.images.upload(file);\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {};\n        }\n        image.state = 'failed';\n        return { imageUploads: prevState.imageUploads };\n      });\n\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-image', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n      return;\n    }\n    await this.setState((prevState) => {\n      img.state = 'finished';\n      img.url = response.file;\n      return { imageUploads: prevState.imageUploads };\n    });\n  };\n\n  _uploadFile = async (id: string) => {\n    const upload = this.state.fileUploads[id];\n    if (!upload) {\n      return;\n    }\n    const { file } = upload;\n\n    await this.setState((prevState) => {\n      prevState.fileUploads[id].state = 'uploading';\n      return { fileUploads: prevState.fileUploads };\n    });\n\n    let response = {};\n    response = {};\n    try {\n      response = await this.props.client.files.upload(file);\n    } catch (e) {\n      console.warn(e);\n      await this.setState((prevState) => {\n        if (prevState.fileUploads[id]) {\n          prevState.fileUploads[id].state = 'failed';\n          return { fileUploads: prevState.fileUploads };\n        }\n        return {};\n      });\n\n      this.props.errorHandler(e, 'upload-image', {\n        feedGroup: this.props.feedGroup,\n        userId: this.props.userId,\n      });\n      return;\n    }\n    await this.setState((prevState) => {\n      if (prevState.fileUploads[id]) {\n        prevState.fileUploads[id].state = 'finished';\n        prevState.fileUploads[id].url = response.file;\n        return { fileUploads: prevState.fileUploads };\n      }\n      return {};\n    });\n  };\n\n  _removeImage = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const img = prevState.imageUploads[id];\n      if (!img) {\n        return {};\n      }\n      delete prevState.imageUploads[id];\n      return {\n        imageUploads: prevState.imageUploads,\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _removeFile = (id: string) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const upload = prevState.fileUploads[id];\n      if (!upload) {\n        return {};\n      }\n      delete prevState.fileUploads[id];\n      return {\n        fileUploads: prevState.fileUploads,\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _onChange = (event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n    this._handleOgDebounced(text);\n  };\n\n  render() {\n    const { t } = this.props;\n    const activeOg = this._activeOg();\n    const availableOg = this._availableOg();\n    const userData = this.props.user.data || {};\n    return (\n      <Panel>\n        <form onSubmit={this.onSubmitForm}>\n          <ImageDropzone handleFiles={this._uploadNewFiles}>\n            <PanelHeading>{this.props.Header}</PanelHeading>\n            <PanelContent>\n              <div style={{ display: 'flex' }}>\n                <React.Fragment>\n                  {userData.profileImage && (\n                    <div style={{ marginRight: '16px' }}>\n                      <Avatar\n                        image={\n                          // $FlowFixMe\n                          userData.profileImage ||\n                          'https://placehold.it/100x100'\n                        }\n                        size={50}\n                        circle\n                      />\n                    </div>\n                  )}\n                </React.Fragment>\n                <Textarea\n                  innerRef={this.textInputRef}\n                  placeholder={t('Type your post...')}\n                  value={this.state.text}\n                  onChange={this._onChange}\n                  trigger={this.props.trigger}\n                  onPaste={async (event) => {\n                    const { items } = event.clipboardData;\n                    if (!dataTransferItemsHaveFiles(items)) {\n                      return;\n                    }\n\n                    event.preventDefault();\n                    // Get a promise for the plain text in case no files are\n                    // found. This needs to be done here because chrome cleans\n                    // up the DataTransferItems after resolving of a promise.\n                    let plainTextPromise;\n                    for (const item of items) {\n                      if (\n                        item.kind === 'string' &&\n                        item.type === 'text/plain'\n                      ) {\n                        plainTextPromise = new Promise((resolve) => {\n                          item.getAsString((s) => {\n                            resolve(s);\n                          });\n                        });\n                        break;\n                      }\n                    }\n\n                    const fileLikes = await dataTransferItemsToFiles(items);\n                    if (fileLikes.length) {\n                      this._uploadNewFiles(fileLikes);\n                      return;\n                    }\n                    // fallback to regular text paste\n                    if (plainTextPromise) {\n                      const s = await plainTextPromise;\n                      this._insertText(s);\n                    }\n                  }}\n                />\n              </div>\n              {this._isOgScraping() && (\n                <div className=\"raf-status-update-form__og-loading\">\n                  <LoadingIndicator /> Getting website data...\n                </div>\n              )}\n              {activeOg && (\n                <div style={{ margin: '8px 0' }}>\n                  {!activeOg.videos && !activeOg.audios ? (\n                    <Card\n                      {...activeOg}\n                      nolink\n                      handleClose={(e: any) => {\n                        e.preventDefault();\n                        this._dismissOg(activeOg);\n                      }}\n                    />\n                  ) : (\n                    <React.Fragment>\n                      {activeOg.videos ? (\n                        <Video\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                      {activeOg.audios ? (\n                        <Audio\n                          og={activeOg}\n                          handleClose={(e: any) => {\n                            e.preventDefault();\n                            this._dismissOg(activeOg);\n                          }}\n                        />\n                      ) : null}\n                    </React.Fragment>\n                  )}\n                </div>\n              )}\n              {availableOg && availableOg.length > 1 && (\n                <React.Fragment>\n                  <ol className=\"raf-status-update-form__url-list\">\n                    {availableOg.map(({ url, title }) => (\n                      <li\n                        className={`raf-status-update-form__url-list-item${\n                          url === this.state.ogActiveUrl\n                            ? ' raf-status-update-form__url-list-item--active'\n                            : ''\n                        }`}\n                        onClick={() =>\n                          this.setState((prevState) => {\n                            const ogState = prevState.ogStateByUrl[url];\n                            if (ogState) {\n                              ogState.dismissed = false;\n                            }\n                            return {\n                              ogActiveUrl: url,\n                              ogStateByUrl: prevState.ogStateByUrl,\n                            };\n                          })\n                        }\n                        key={url}\n                      >\n                        <FontAwesomeIcon icon={faBookmark} />{' '}\n                        {title !== undefined ? title : url}\n                      </li>\n                    ))}\n                  </ol>\n                </React.Fragment>\n              )}\n              {this.state.imageOrder.length > 0 && (\n                <ImagePreviewer\n                  imageUploads={this.state.imageOrder.map(\n                    (id) => this.state.imageUploads[id],\n                  )}\n                  handleRemove={this._removeImage}\n                  handleRetry={this._uploadImage}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n              {this.state.fileOrder.length > 0 && (\n                <FilePreviewer\n                  uploads={this.state.fileOrder.map(\n                    (id) => this.state.fileUploads[id],\n                  )}\n                  handleRemove={this._removeFile}\n                  handleRetry={this._uploadFile}\n                  handleFiles={this._uploadNewFiles}\n                />\n              )}\n            </PanelContent>\n            <PanelFooter>\n              <div style={{ display: 'flex', alignItems: 'center' }}>\n                <div style={{ flex: 1 }}>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <ImageUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <div style={{ marginRight: '32px', display: 'inline-block' }}>\n                    <FileUploadButton\n                      handleFiles={this._uploadNewFiles}\n                      multiple\n                    />\n                  </div>\n                  <EmojiPicker onSelect={this._onSelectEmoji} />\n                  {this.props.FooterItem}\n                </div>\n                <Button\n                  type=\"submit\"\n                  buttonStyle=\"primary\"\n                  loading={this.state.submitting}\n                  disabled={!this._canSubmit()}\n                >\n                  {t('Post')}\n                </Button>\n              </div>\n            </PanelFooter>\n          </ImageDropzone>\n        </form>\n      </Panel>\n    );\n  }\n}\n\nexport default withTranslationContext(StatusUpdateForm);\n","// @flow\nimport * as React from 'react';\n\nexport type Props = {|\n  children?: React.Node,\n  showNumber?: boolean,\n  hidden?: boolean,\n  feedGroup?: string,\n  userId?: string,\n  unseen: number,\n  onClick?: () => mixed,\n|};\n\n/**\n *\n * @example ./examples/IconBadge.md\n */\nexport default class IconBadge extends React.Component<Props> {\n  render() {\n    return (\n      <div\n        className=\"raf-icon-badge\"\n        role=\"button\"\n        onClick={this.props.onClick}\n      >\n        {this.props.children ? (\n          this.props.children\n        ) : (\n          <svg\n            width=\"17\"\n            height=\"20\"\n            viewBox=\"0 0 17 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M8.5 20c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6.5-6V8.5c0-3.07-2.13-5.64-5-6.32V1.5C10 .67 9.33 0 8.5 0S7 .67 7 1.5v.68c-2.87.68-5 3.25-5 6.32V14l-2 2v1h17v-1l-2-2zm-2 1H4V8.5C4 6.01 6.01 4 8.5 4S13 6.01 13 8.5V15z\"\n              // fill=\"#414D54\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        )}\n        {!this.props.hidden && this.props.unseen > 0 ? (\n          <div className=\"raf-icon-badge__badge\">\n            {this.props.showNumber ? <p>{this.props.unseen}</p> : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\nexport type Props = {|\n  children?: React.Node,\n  Header?: Renderable,\n  Footer?: Renderable,\n  left: boolean,\n  right: boolean,\n  arrow: boolean,\n|};\n\n/**\n * `DropdownPanel` is a more advanced component used to create a notification dropdown for instance, it comes with three parts: `Header`, `Content` and `Footer`. The content has a limited height and the `overflow` is set to `scroll`.\n *\n * @example ./examples/DropdownPanel.md\n */\nexport default class DropdownPanel extends React.Component<Props> {\n  static defaultProps = {\n    arrow: false,\n    left: true,\n    right: false,\n  };\n\n  render() {\n    return (\n      <div\n        className={`raf-dropdown-panel ${\n          this.props.arrow ? ' raf-dropdown-panel--arrow' : ''\n        } ${\n          this.props.right\n            ? ' raf-dropdown-panel--right raf-dropdown-panel--arrow-right'\n            : 'raf-dropdown-panel--left raf-dropdown-panel--arrow-left'\n        }`}\n      >\n        {this.props.Header != null && (\n          <div className=\"raf-dropdown-panel__header\">\n            {smartRender(this.props.Header, {}, null)}\n          </div>\n        )}\n        <div className=\"raf-dropdown-panel__content\">{this.props.children}</div>\n        {this.props.Footer != null && (\n          <div className=\"raf-dropdown-panel__footer\">\n            {smartRender(this.props.Footer, {}, null)}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Feed, FeedContext } from '../Context';\nimport NotificationFeed from './NotificationFeed';\nimport Notification from './Notification';\nimport NewActivitiesNotification from './NewActivitiesNotification';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport FeedPlaceholder from './FeedPlaceholder';\nimport IconBadge from './IconBadge';\nimport DropdownPanel from './DropdownPanel';\nimport type {\n  // BaseActivityResponse,\n  BaseFeedCtx,\n  BaseClient,\n  Renderable,\n  BaseActivityResponse,\n  BaseReaction,\n} from '../types';\n\nimport { smartRender } from '../utils';\n\nimport type { FeedRequestOptions, FeedResponse } from 'getstream';\n\ntype Props = {|\n  /** The feed group part of the feed that should be displayed */\n  feedGroup: string,\n  /** The user_id part of the feed that should be displayed */\n  userId?: string,\n  /** Read options for the API client (eg. limit, mark_seen, ...) */\n  options?: FeedRequestOptions,\n  /** The component used to render a group in the feed */\n  Group: Renderable,\n  /** If true, feed shows the NewActivitiesNotification component when new\n   * activities are added */\n  notify: boolean,\n  /** The component to use to render new activities notification */\n  Notifier: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Component to show when there are no activities in the feed */\n  Placeholder: Renderable,\n  /** Icon component  */\n  Icon?: Renderable,\n  /** Header component  */\n  Header?: Renderable,\n  /** Footer component */\n  Footer?: Renderable,\n  /** The feed read handler (change only for advanced/complex use-cases) */\n  doFeedRequest?: (\n    client: BaseClient,\n    feedGroup: string,\n    userId?: string,\n    options?: FeedRequestOptions,\n  ) => Promise<FeedResponse<{}, {}>>,\n  /** Override activity delete request */\n  doActivityDeleteRequest?: (id: string) => mixed,\n  /** Override reaction add request */\n  doReactionAddRequest?: (\n    kind: string,\n    activity: BaseActivityResponse,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override reaction delete request */\n  doReactionDeleteRequest?: (id: string) => mixed,\n  /** Override child reaction add request */\n  doChildReactionAddRequest?: (\n    kind: string,\n    activity: BaseReaction,\n    data?: {},\n    options: {},\n  ) => mixed,\n  /** Override child reaction delete request */\n  doChildReactionDeleteRequest?: (id: string) => mixed,\n  /** The location that should be used for analytics when liking in the feed,\n   * this is only useful when you have analytics enabled for your app. */\n  analyticsLocation?: string,\n  /** The width of the dropdown */\n  width?: number,\n  /** Used to position the dropdown different horizontaly */\n  right?: boolean,\n|};\n\n/**\n * IMPORTANT: Changing most of the props below doesn't result in the desired\n * effect. These settings related to feed management should be changed in the\n * `sharedFeeds` prop of the [`StreamApp`](#streamapp) component.\n * @example ./examples/NotificationDropdown.md\n */\n\nexport default class NotificationDropdown extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'notification',\n    Group: Notification,\n    notify: true,\n    Notifier: NewActivitiesNotification,\n    Paginator: LoadMorePaginator,\n    Placeholder: FeedPlaceholder,\n    width: 475,\n  };\n  render() {\n    return (\n      <Feed\n        feedGroup={this.props.feedGroup}\n        userId={this.props.userId}\n        options={makeDefaultOptions({ mark_seen: false })}\n        doFeedRequest={this.props.doFeedRequest}\n      >\n        <FeedContext.Consumer>\n          {(feedCtx) => (\n            <NotificationDropdownInner {...this.props} {...feedCtx} />\n          )}\n        </FeedContext.Consumer>\n      </Feed>\n    );\n  }\n}\n\ntype State = {|\n  open: boolean,\n|};\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass NotificationDropdownInner extends React.Component<PropsInner, State> {\n  dropdownRef: { current: null | HTMLDivElement };\n\n  constructor(props: PropsInner) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n    this.dropdownRef = React.createRef();\n  }\n\n  _refresh = async () => {\n    await this.props.refresh(makeDefaultOptions(this.props.options));\n  };\n\n  openDropdown = () => {\n    this.setState(\n      {\n        open: true,\n      },\n      () => {\n        //$FlowFixMe\n        document.addEventListener('click', this.closeDropdown, false);\n      },\n    );\n  };\n\n  closeDropdown = (e) => {\n    if (\n      this.dropdownRef.current !== null &&\n      !this.dropdownRef.current.contains(e.target)\n    ) {\n      this.setState(\n        {\n          open: false,\n        },\n        () => {\n          //$FlowFixMe\n          document.removeEventListener('click', this.closeDropdown, false);\n        },\n      );\n    }\n  };\n\n  componentDidMount() {\n    this.props.refreshUnreadUnseen();\n  }\n\n  componentWillUnmount() {\n    //$FlowFixMe\n    document.removeEventListener('click', this.closeDropdown, false);\n  }\n\n  render() {\n    return (\n      <div style={{ position: 'relative', display: 'inline-block' }}>\n        <IconBadge\n          unseen={this.props.unseen}\n          onClick={this.openDropdown}\n          showNumber={true}\n          hidden={!this.props.notify}\n        >\n          {this.props.Icon && smartRender(this.props.Icon, {}, null)}\n        </IconBadge>\n\n        <div\n          ref={this.dropdownRef}\n          style={{\n            position: 'absolute',\n            left: this.props.right ? '' : '-22px',\n            right: this.props.right ? -29 : 0,\n            top: 35,\n            width: '100vw',\n            maxWidth: this.props.width,\n            zIndex: 9999,\n            visibility: this.state.open ? 'visible' : 'hidden',\n            transform: this.state.open ? 'translateY(0px)' : 'translateY(10px)',\n            opacity: this.state.open ? '1' : '0',\n            transition: 'all .2s ease-out',\n          }}\n        >\n          {this.state.open && (\n            <DropdownPanel\n              arrow\n              right={this.props.right}\n              Header={this.props.Header}\n              Footer={this.props.Footer}\n            >\n              <NotificationFeed\n                feedGroup={this.props.feedGroup}\n                userId={this.props.userId}\n                options={this.props.options}\n                Group={this.props.Group}\n                notify={this.props.notify}\n                Notifier={this.props.Notifier}\n                Paginator={this.props.Paginator}\n                Placeholder={this.props.Placeholder}\n                doFeedRequest={this.props.doFeedRequest}\n                doActivityDeleteRequest={this.props.doActivityDeleteRequest}\n                doReactionAddRequest={this.props.doReactionAddRequest}\n                doReactionDeleteRequest={this.props.doReactionDeleteRequest}\n                doChildReactionAddRequest={this.props.doChildReactionAddRequest}\n                doChildReactionDeleteRequest={\n                  this.props.doChildReactionDeleteRequest\n                }\n                analyticsLocation={this.props.analyticsLocation}\n              />\n            </DropdownPanel>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst makeDefaultOptions = (options) => {\n  const copy = { ...options };\n  if (copy.mark_seen === undefined) {\n    copy.mark_seen = true;\n  }\n  return copy;\n};\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    getScrollParent: PropTypes.func,\n    pageStart: PropTypes.number,\n    ref: PropTypes.func,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.pageLoaded = this.props.pageStart;\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false && this.props.getScrollParent) {\n      scrollEl = this.props.getScrollParent().current;\n    } else if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false && this.props.getScrollParent) {\n      scrollEl = this.props.getScrollParent().current;\n    } else if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      (el && el.offsetParent !== null)\n    ) {\n      this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore((this.pageLoaded += 1));\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      isLoading,\n      ...props\n    } = renderProps;\n    delete props.getScrollParent;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n      if (ref) {\n        ref(node);\n      }\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","//@flow\nimport * as React from 'react';\nimport InfiniteScroll from './InfiniteScroll';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport { smartRender } from '../utils';\n\nimport type { Renderable } from '../types';\n\ntype Props = {|\n  /** callback to load the next page */\n  loadNextPage: () => mixed,\n  getScrollParent: () => mixed,\n  /** indicates if there is a next page to load */\n  hasNextPage: boolean,\n  /** indicates if there there's currently any refreshing taking place */\n  refreshing: boolean,\n  /** display the items in opposite order */\n  reverse: boolean,\n  /** threshold to trigger the loadNextPage */\n  threshold: number,\n  /** The paginated content to display */\n  children: React.Node,\n  /** Component to show when paginator is loading **/\n  Loader: Renderable,\n  /** If false, scroll listeners will be attached to the parent element instead of the window  **/\n  useWindow: boolean,\n|};\n\nexport default class InfiniteScrollPaginator extends React.Component<Props> {\n  static defaultProps = {\n    Loader: <LoadingIndicator />,\n    threshold: 250,\n    useWindow: true,\n  };\n\n  render() {\n    return (\n      <InfiniteScroll\n        loadMore={this.props.loadNextPage}\n        hasMore={this.props.hasNextPage}\n        isLoading={this.props.refreshing}\n        isReverse={this.props.reverse}\n        threshold={this.props.threshold}\n        getScrollParent={this.props.getScrollParent}\n        useWindow={this.props.useWindow}\n        loader={\n          <React.Fragment key=\"loading-indicator\">\n            {smartRender(this.props.Loader)}\n          </React.Fragment>\n        }\n      >\n        {this.props.children}\n      </InfiniteScroll>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport type { ReactionCounts } from 'getstream';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\ntype Props = {|\n  /** The icon to display */\n  icon: string | number,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** The kind of reaction that this displays */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** Function to call when pressed, usually this should call `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/ReactionIcon.md\n */\n\nclass ReactionIcon extends React.Component<Props> {\n  render() {\n    const {\n      counts,\n      kind,\n      height,\n      width,\n      labelSingle,\n      labelPlural,\n      onPress,\n      icon,\n      t,\n    } = this.props;\n    let count = null;\n    if (counts && kind) {\n      count = counts[kind] || 0;\n    }\n\n    const dimensions = {};\n    if (height !== undefined) {\n      dimensions.height = height;\n    }\n    if (width !== undefined) {\n      dimensions.width = width;\n    }\n\n    if (!count) count = 0;\n    let label;\n\n    if (labelSingle && labelPlural) {\n      label = count === 1 ? `1 ${labelSingle}` : `${count} ${labelPlural}`;\n    }\n\n    if (!labelSingle || !labelPlural) {\n      switch (kind) {\n        case 'like':\n          label =\n            count === 1\n              ? t('1 like')\n              : t('{{ countLikes }} likes', { countLikes: count });\n          break;\n        case 'repost':\n          label =\n            count === 1\n              ? t('1 repost')\n              : t('{{ countReposts }} reposts', { countReposts: count });\n          break;\n        case 'comment':\n          label =\n            count === 1\n              ? t('1 comment')\n              : t('{{ countComments }} comments', { countComments: count });\n          break;\n        default:\n          break;\n      }\n    }\n\n    return (\n      <div className=\"raf-reaction-icon\" onClick={onPress}>\n        {icon ? (\n          <img className=\"raf-reaction-icon__image\" src={icon} alt=\"\" />\n        ) : null}\n        {count != null ? (\n          <p className=\"raf-reaction-icon__label\">{label}</p>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(ReactionIcon);\n","// @flow\n\nimport React from 'react';\nimport ReactionIcon from './ReactionIcon';\nimport type { ReactionCounts, ReactionKindMap } from 'getstream';\n\ntype Props = {|\n  /** The icon to show when the user has done this reaction (e.g. a filled in heart) */\n  activeIcon: string,\n  /** The icon to show when the user has not done this reaction yet (e.g. an empty in heart) */\n  inactiveIcon: string,\n  /** The kind of reaction that this toggles */\n  kind: string,\n  /** The height of the icon */\n  height?: number,\n  /** The width of the icon */\n  width?: number,\n  /** The map with own reactions */\n  own_reactions: ?ReactionKindMap<{}, {}>,\n  /** The reaction counts for the activity */\n  counts?: ReactionCounts,\n  /** Function to call when pressed, usually this should call\n   * `props.onToggleReaction` */\n  onPress?: (kind: string) => any,\n  /** The label to display if the count is one (e.g \"like\") */\n  labelSingle?: string,\n  /** The label to display if the count is more than one (e.g \"likes\") */\n  labelPlural?: string,\n|};\n\n/**\n * A generic component that can be used to toggle a reaction and display it's\n * current state. Mostly used for reactions such as like and repost.\n * The [source for\n * LikeButton](https://github.com/GetStream/react-activity-feed/blob/master/src/components/LikeButton.js)\n * is a good example of the usage of this component.\n *\n * @example ./examples/ReactionToggleIcon.md\n */\nexport default class ReactionToggleIcon extends React.Component<Props> {\n  render() {\n    const {\n      inactiveIcon,\n      activeIcon,\n      own_reactions,\n      kind,\n      ...restProps\n    } = this.props;\n    let icon = inactiveIcon;\n    if (own_reactions && own_reactions[kind] && own_reactions[kind].length) {\n      icon = activeIcon;\n    }\n    return (\n      <div className=\"raf-reaction-toggle-icon\">\n        <ReactionIcon icon={icon} kind={kind} {...restProps} />\n      </div>\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUxJREFUOBGtk89Kw0AQxudLi4Zmo1ARPIgtnvoAPfoCevZPn0LoG9QX8OBBvHtpohcP4s2zIsUHEMR4EPEgWGqFVDPORhaibGPFLCQzu/PNb3YzG6IJhxfct1UQdfLkyAuamAqjdWYKiRllB82XzVrPxLK2nJ3YfD+MVpKEDyWWFv4gR9l0es0ZF9Dr/vFDQ3Z0Iq6b6gCeUpXr1Le8xsLmw6eF5D0+Y+aqyQPzzfPaXN/Mf1orTEBqyG+nIq5/SwBZv5XRWBugulHIxBtGlGtBMQj7g61aG173jo34tVVP4V4QjaRzvzbH5Gk7PePPWo/5V5D0Od5erQ7ssGzJCXww3XaApBAYEy50zUJgJWlAUbDLfmvpqhiYU9rTID3+d0zQY2N58egLNQ4GDI0gz8plPeg1MTIa685kcYc0UH5s60NIAJy7bmXXgLT9BOn0XD2NtcXgAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAARCAYAAAA/mJfHAAAAAXNSR0IArs4c6QAAAUpJREFUOBGtk7FKA0EQhmeWLQSDiWKhnaVYH8TCUoiKptLKFPcKeQN9gRQpgmVUsDgrcwQ9BK9VRHwAwdpaJGACO85EllxkXS4kA8fMzv7z3ewsC5DT2p2kfh4nJz45+jbtHkMOOY6ICEFhEO5XXuxe1qvswhVfxPdbBHA5BLFAGSy4dJLzwq7iZN2AuQGiOREjIim98Cqxy/6FRd10pU90y6ClUSG91fY2P0fr8cgJi9K00DPfXZaujckJnLOyGucF8MBl2EdW5PMM6BNgK6xW6tju3PF8fy2s7gzhDBswTNt8Hq91qeg85qQg6e54t/zlhOXpJKshxHe+aTMTGN/4o8BnAtOgWwKbaMhS8Nf4eE+1g+1nyU/dGQI17Q+mgyF8bKwuX/thCD0r8HkEPAuCYGA1zs4UqFNgoDxs18fFhkEPpcX5hgWJ/wEycGS98JuJ8gAAAABJRU5ErkJggg==\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  BaseReaction,\n  ToggleReactionCallbackFunction,\n  ToggleChildReactionCallbackFunction,\n} from '../types';\n\nimport likebuttonActive from '../images/like-active@1x.png';\nimport likebuttonInactive from '../images/like@1x.png';\n\ntype Props = {|\n  /** The activity received from stream that should be liked when pressing the\n   * LikeButton. */\n  activity: BaseActivityResponse,\n  /** The reaction received from stream that should be liked when pressing the\n   * LikeButton. Liking a reaction requires to pass both this field and\n   * the `onToggleChildReaction` as well. */\n  reaction?: BaseReaction,\n  /** The function that toggles reactions on activities. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n  /** The function that toggles reactions on reactions. */\n  onToggleChildReaction?: ToggleChildReactionCallbackFunction,\n|};\n\n/**\n * Like button ready to be embedded as Activity footer\n * @example ./examples/LikeButton.md\n */\nexport default class LikeButton extends React.Component<Props> {\n  _onPress = () => {\n    const {\n      activity,\n      reaction,\n      onToggleReaction,\n      onToggleChildReaction,\n    } = this.props;\n\n    if (reaction && onToggleChildReaction) {\n      return onToggleChildReaction('like', reaction, {}, {});\n    }\n    return onToggleReaction('like', activity, {}, {});\n  };\n\n  render() {\n    const { activity, reaction } = this.props;\n    let counts, own_reactions;\n    if (reaction && this.props.onToggleChildReaction) {\n      counts = reaction.children_counts;\n      own_reactions = reaction.own_children;\n    } else {\n      if (reaction) {\n        console.warn(\n          'reaction is passed to the LikeButton but ' +\n            'onToggleChildReaction is not, falling back to liking the activity',\n        );\n      }\n      counts = activity.reaction_counts;\n      own_reactions = activity.own_reactions;\n    }\n\n    return (\n      <ReactionToggleIcon\n        counts={counts}\n        own_reactions={own_reactions}\n        kind=\"like\"\n        onPress={this._onPress}\n        activeIcon={likebuttonActive}\n        inactiveIcon={likebuttonInactive}\n        labelSingle=\"like\"\n        labelPlural=\"likes\"\n      />\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqDXaArdptoNvAVrBDe071I/3oFwkhxzdysS0nz9+J0zSVq1/3WY+2Gnj8lNKksGoQiirMqKJbtkTfa83sHVKkBR8awP++xqLymNOYHUDN5znMIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAJWhChOoqSnsAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAAAXNSR0IArs4c6QAAAKlJREFUOBHdk8ENgzAMRTHqbnCBFdpNoJvACnBpp0v1I/3oFwkhxzdysS0nz9+J0zSVa92/sx5tNfD4KaVJYdUgFFWYUcWyfRJ9rzWzd0iRFnxoAP819kXlMacxO4Ca59DNIUWEoEA1SCEhENoB4IYLr8aXQ3t/l60j7+29gADByHsB3J9BUQhgFoXwJ5TWKLHW5n+lqljBC8yKMKUYee/h0/1Qdpq8SPwAvNZE146X6PUAAAAASUVORK5CYII=\"","// @flow\nimport * as React from 'react';\nimport ReactionToggleIcon from './ReactionToggleIcon';\nimport type {\n  BaseActivityResponse,\n  ToggleReactionCallbackFunction,\n} from '../types';\n\nimport { StreamApp, withTranslationContext } from '../Context';\n\nimport repostButtonActive from '../images/repost-active@1x.png';\nimport repostButtonInactive from '../images/repost@1x.png';\n\ntype Props = {|\n  /** The feed group part of the feed that the activity should be reposted to,\n   * e.g. `user` when posting to your own profile */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be reposted to  */\n  userId?: string,\n  /** The activity received for stream for which to show the like buton. This is\n   * used to initalize the toggle state and the counter. */\n  activity: BaseActivityResponse,\n  /** The function that toggles the reaction. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n|};\n\n/**\n * A repost button ready to be embedded as Activity footer\n * @example ./examples/RepostButton.md\n */\n\nclass RepostButton extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n  };\n\n  render() {\n    if (this.props.userId != null) {\n      return <RepostButtonInner {...this.props} />;\n    }\n    return (\n      <StreamApp.Consumer>\n        {(appCtx) => (\n          <RepostButtonInner {...this.props} userId={appCtx.user.id} />\n        )}\n      </StreamApp.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, userId: string |};\nclass RepostButtonInner extends React.Component<PropsInner> {\n  render() {\n    const { feedGroup, userId, activity, onToggleReaction } = this.props;\n\n    return (\n      <ReactionToggleIcon\n        counts={activity.reaction_counts}\n        own_reactions={activity.own_reactions}\n        kind=\"repost\"\n        onPress={() =>\n          onToggleReaction(\n            'repost',\n            activity,\n            {},\n            { targetFeeds: [`${feedGroup}:${userId}`] },\n          )\n        }\n        activeIcon={repostButtonActive}\n        inactiveIcon={repostButtonInactive}\n      />\n    );\n  }\n}\n\nexport default withTranslationContext(RepostButton);\n","// @flow\nimport * as React from 'react';\n\ntype Align = 'center' | 'flex-start' | 'flex-end';\ntype Justify =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end';\ntype JustifySelf =\n  | 'center'\n  | 'space-between'\n  | 'space-around'\n  | 'flex-start'\n  | 'flex-end'\n  | 'stretch';\ntype Direction = 'row' | 'column' | 'row-reverse' | 'column-reverse';\ntype Wrap = 'wrap' | 'nowrap' | 'wrap-reverse';\n\ntype Props = {|\n  children: React.Node,\n  a?: Align,\n  j?: Justify,\n  js?: JustifySelf,\n  d: Direction,\n  w: Wrap,\n  style?: any,\n|};\n/**\n * Simple Flex wrapper for centering UI elements. To be expanded in the future.\n *\n * @example ./examples/Flex.md\n */\nexport default class Flex extends React.Component<Props> {\n  static defaultProps = {\n    d: 'row',\n    w: 'nowrap',\n  };\n  render() {\n    return (\n      <div\n        className={`raf-flex`}\n        style={{\n          justifyContent: this.props.j,\n          alignItems: this.props.a,\n          justifySelf: this.props.js,\n          flexDirection: this.props.d,\n          flexWrap: this.props.w,\n          ...this.props.style,\n        }}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n// import ReactionIcon from './ReactionIcon';\nimport LikeButton from './LikeButton';\nimport RepostButton from './RepostButton';\nimport Flex from './Flex';\nimport type {\n  BaseActivityResponse,\n  ToggleReactionCallbackFunction,\n} from '../types';\n\nexport type Props = {|\n  /** The feed group part of the feed that the activity should be reposted to\n   * when pressing the RepostButton, e.g. `user` when posting to your own\n   * profile */\n  feedGroup: string,\n  /** The user_id part of the feed that the activity should be reposted to when\n   * pressing the RepostButton */\n  userId?: string,\n  /** The activity received for stream for which to show the like buton. This is\n   * used to initalize the toggle state and the counter. */\n  activity: BaseActivityResponse,\n  /** The function that toggles  reaction. */\n  onToggleReaction: ToggleReactionCallbackFunction,\n|};\n\n/**\n * Wrapper with LikeButton and Repost Button used by the Standard Activity.\n *\n * @example ./examples/ActivityFooter.md\n */\nexport default class ActivityFooter extends React.Component<Props> {\n  static defaultProps = {\n    feedGroup: 'user',\n  };\n\n  render() {\n    const { activity, onToggleReaction } = this.props;\n    return (\n      <div className=\"raf-activity-footer\">\n        <div className=\"raf-activity-footer__left\" />\n        <div className=\"raf-activity-footer__right\">\n          <Flex a=\"center\">\n            <LikeButton\n              activity={activity}\n              onToggleReaction={onToggleReaction}\n            />\n            <RepostButton {...this.props} />\n          </Flex>\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\n\nexport type Props = {|\n  /** callback function used on click */\n  onClick?: () => mixed,\n  /** initial follow state */\n  followed?: boolean,\n|};\n\nexport type State = {\n  followed: boolean,\n};\n\n/**\n * Component is described here.\n *\n * @example ./examples/FollowButton.md\n */\nexport default class FollowButton extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { followed: this.props.followed || false };\n  }\n\n  render() {\n    const { onClick, followed } = this.props;\n    return (\n      <div\n        className={`raf-follow-button ${\n          followed ? 'raf-follow-button--active' : ''\n        }`}\n        role=\"button\"\n        onClick={onClick}\n      >\n        {followed ? 'Following' : 'Follow'}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { FeedContext } from '../Context';\nimport type { Renderable, BaseFeedCtx } from '../types';\nimport { smartRender } from '../utils';\nimport immutable from 'immutable';\n\ntype Props = {|\n  /** The ID of the activity for which these reactions are */\n  activityId: string,\n  /** The reaction kind that you want to display in this list, e.g `like` or\n   * `comment` */\n  reactionKind: string,\n  /** The component that should render the reaction */\n  Reaction: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the reactions\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load reactions starting with the oldest reaction first, instead\n   * of the default where reactions are displayed and loaded most recent first.\n   * */\n  oldestToNewest: boolean,\n  /** Reverse the order the reactions are displayed in. */\n  reverseOrder: boolean,\n|};\n\nexport default class ReactionList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  render() {\n    return (\n      <FeedContext.Consumer>\n        {(appCtx) => <ReactionListInner {...this.props} {...appCtx} />}\n      </FeedContext.Consumer>\n    );\n  }\n}\n\ntype PropsInner = {| ...Props, ...BaseFeedCtx |};\nclass ReactionListInner extends React.Component<PropsInner> {\n  componentDidMount() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n    } = this.props;\n    if (!oldestToNewest) {\n      return;\n    }\n\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    const orderPrefix = 'oldest';\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    if (reactions_extra) {\n      return;\n    }\n    return this.props.loadNextReactions(\n      activityId,\n      reactionKind,\n      activityPath,\n      oldestToNewest,\n    );\n  }\n\n  render() {\n    const {\n      activityId,\n      activities,\n      reactionKind,\n      getActivityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    const activityPath = this.props.activityPath || getActivityPath(activityId);\n    let orderPrefix = 'latest';\n    if (oldestToNewest) {\n      orderPrefix = 'oldest';\n    }\n\n    let reactionsOfKind = activities.getIn(\n      [...activityPath, orderPrefix + '_reactions', reactionKind],\n      immutable.List(),\n    );\n    if (reverseOrder) {\n      reactionsOfKind = reactionsOfKind.reverse();\n    }\n\n    const reactions_extra = activities.getIn([\n      ...activityPath,\n      orderPrefix + '_reactions_extra',\n    ]);\n    let nextUrl = 'https://api.stream-io-api.com/';\n    if (reactions_extra) {\n      nextUrl = reactions_extra.getIn([reactionKind, 'next'], '');\n    }\n\n    const refreshing = activities.getIn(\n      [\n        ...activityPath,\n        orderPrefix + '_reactions_extra',\n        reactionKind,\n        'refreshing',\n      ],\n      false,\n    );\n\n    return smartRender(this.props.Paginator, {\n      loadNextPage: () =>\n        this.props.loadNextReactions(\n          activityId,\n          reactionKind,\n          activityPath,\n          oldestToNewest,\n        ),\n      hasNextPage: Boolean(nextUrl),\n      refreshing,\n      reverse: reverseOrder,\n      children: (\n        <React.Fragment>\n          {reactionsOfKind.map((reaction) => (\n            <ImmutableItemWrapper\n              key={reaction.get('id')}\n              item={reaction}\n              renderItem={this.renderReaction}\n            />\n          ))}\n        </React.Fragment>\n      ),\n    });\n  }\n  renderReaction = (reaction) => {\n    const { Reaction } = this.props;\n\n    return smartRender(Reaction, { reaction });\n  };\n}\n\ntype ImmutableItemWrapperProps = {\n  renderItem: (item: any) => any,\n  item: any,\n};\n\nclass ImmutableItemWrapper extends React.PureComponent<ImmutableItemWrapperProps> {\n  render() {\n    return this.props.renderItem(this.props.item.toJS());\n  }\n}\n","// @flow\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Flex from './Flex';\nimport type { Comment } from '../types';\n\nimport { humanizeTimestamp, textRenderer } from '../utils';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\n\nexport type Props = {|\n  comment: Comment,\n  onClickUser?: (?any) => mixed,\n  /** Handler for any routing you may do on clicks on Hashtags */\n  onClickHashtag?: (word: string) => mixed,\n  /** Handler for any routing you may do on clicks on Mentions */\n  onClickMention?: (word: string) => mixed,\n|} & Streami18Ctx;\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentItem.md\n */\nclass CommentItem extends React.Component<Props> {\n  _user = () => {\n    const { user } = this.props.comment;\n    return user;\n  };\n\n  onClickUser = () => {\n    const { onClickUser } = this.props;\n    if (onClickUser) {\n      return onClickUser(this._user());\n    }\n  };\n\n  _getOnClickUser() {\n    return this.props.onClickUser ? this.onClickUser : undefined;\n  }\n\n  render() {\n    const { comment, tDateTimeParser } = this.props;\n    return (\n      <div className=\"raf-comment-item\">\n        <Flex a=\"flex-start\" style={{ padding: '8px 0' }}>\n          {comment.user.data.profileImage && (\n            <Avatar\n              onClick={this._getOnClickUser()}\n              image={comment.user.data.profileImage}\n              circle\n              size={25}\n            />\n          )}\n        </Flex>\n        <Flex d=\"column\" style={{ flex: 1, margin: '0 8px' }}>\n          <div className=\"raf-comment-item__content\">\n            <time dateTime={comment.created_at} title={comment.created_at}>\n              <small>\n                {humanizeTimestamp(comment.created_at, tDateTimeParser)}\n              </small>\n            </time>\n            <p>\n              <span\n                onClick={this._getOnClickUser()}\n                className=\"raf-comment-item__author\"\n              >\n                {comment.user.data.name}\n              </span>{' '}\n              {textRenderer(\n                comment.data.text,\n                'raf-comment-item',\n                this.props.onClickMention,\n                this.props.onClickHashtag,\n              )}\n            </p>\n          </div>\n        </Flex>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(CommentItem);\n","//@flow\nimport React from 'react';\nimport ReactionList from './ReactionList';\nimport CommentItem from './CommentItem';\nimport LoadMorePaginator from './LoadMorePaginator';\nimport { smartRender } from '../utils';\nimport type { Renderable, Comment } from '../types';\n\nexport type Props = {|\n  /** The ID of the activity for which these comments are */\n  activityId: string,\n  /** The component that should render the comment */\n  CommentItem: Renderable,\n  /** By default pagination is done with a \"Load more\" button, you can use\n   * InifiniteScrollPaginator to enable infinite scrolling */\n  Paginator: Renderable,\n  /** Only needed for reposted activities where you want to show the comments\n   * of the original activity, not of the repost */\n  activityPath?: ?Array<string>,\n  /** Show and load comments starting with the oldest reaction first, instead\n   * of the default where comments are displayed and loaded most recent first.\n   */\n  oldestToNewest: boolean,\n  /** Reverse the order the comments are displayed in. */\n  reverseOrder: boolean,\n|};\n\n/**\n * CommentList uses ReactionList under the hood to render a list of comments.\n *\n * @example ./examples/CommentList.md\n */\nexport default class CommentList extends React.PureComponent<Props> {\n  static defaultProps = {\n    Paginator: LoadMorePaginator,\n    CommentItem,\n    oldestToNewest: false,\n    reverseOrder: false,\n  };\n\n  _Reaction = ({ reaction }: { reaction: Comment }) =>\n    smartRender(this.props.CommentItem, { comment: reaction });\n  render() {\n    const {\n      Paginator,\n      activityId,\n      activityPath,\n      oldestToNewest,\n      reverseOrder,\n    } = this.props;\n    return (\n      <React.Fragment>\n        <ReactionList\n          Paginator={Paginator}\n          activityId={activityId}\n          reactionKind={'comment'}\n          Reaction={this._Reaction}\n          activityPath={activityPath}\n          oldestToNewest={oldestToNewest}\n          reverseOrder={reverseOrder}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\n\nimport React from 'react';\nimport Avatar from './Avatar';\nimport Button from './Button';\nimport Textarea from './Textarea';\nimport { inputValueFromEvent } from '../utils';\n\nimport type {\n  AddReactionCallbackFunction,\n  BaseActivityResponse,\n  Trigger,\n} from '../types';\nimport { withTranslationContext } from '../Context';\nimport type { Streami18Ctx } from '../Context';\nexport type Props = {|\n  activity: BaseActivityResponse,\n  onAddReaction: AddReactionCallbackFunction,\n  kind: string,\n  placeholder: string,\n  image?: string,\n  onSuccess?: () => mixed,\n  trigger?: Trigger,\n|} & Streami18Ctx;\n\ntype State = {|\n  text: string,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/CommentField.md\n */\nclass CommentField extends React.Component<Props, State> {\n  textareaRef = React.createRef();\n\n  state = {\n    text: '',\n  };\n\n  onSubmitForm = async (e: SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (this.state.text !== '') {\n      try {\n        await this.props.onAddReaction('comment', this.props.activity, {\n          text: this.state.text,\n        });\n      } catch (e) {\n        return;\n      }\n      this.setState({ text: '' });\n      if (this.props.onSuccess) {\n        this.props.onSuccess();\n      }\n    }\n  };\n\n  _onChange = (event: SyntheticEvent<HTMLTextAreaElement> | Event) => {\n    const text = inputValueFromEvent(event);\n    if (text == null) {\n      return;\n    }\n    this.setState({ text });\n  };\n\n  componentDidMount() {\n    if (this.textareaRef.current) {\n      this.textareaRef.current.addEventListener('keydown', (e) => {\n        if (\n          e.which === 13 &&\n          this.textareaRef.current &&\n          this.textareaRef.current.nextSibling === null\n        ) {\n          this.onSubmitForm(e);\n        }\n      });\n    }\n  }\n\n  render() {\n    const { t, placeholder } = this.props;\n    return (\n      <form onSubmit={this.onSubmitForm} className=\"raf-comment-field\">\n        {this.props.image ? (\n          <Avatar image={this.props.image} circle size={39} />\n        ) : null}\n        <div className=\"raf-comment-field__group\">\n          <Textarea\n            rows={1}\n            value={this.state.text}\n            placeholder={placeholder || t('Start Typing...')}\n            onChange={this._onChange}\n            trigger={this.props.trigger}\n            onPaste={() => null}\n            maxLength={280}\n            innerRef={this.textareaRef}\n          />\n          <Button\n            buttonStyle=\"primary\"\n            disabled={this.state.text === ''}\n            type=\"submit\"\n          >\n            {t('Post')}\n          </Button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default withTranslationContext(CommentField);\n","// @flow\nimport * as React from 'react';\n\ntype Props = {|\n  label: string,\n  data: string | number,\n|};\n\n/**\n * Component is described here.\n *\n * @example ./examples/DataLabel.md\n */\nexport default class DataLabel extends React.Component<Props> {\n  static defaultProps = {\n    label: 'label',\n    data: 'data',\n  };\n\n  render() {\n    return (\n      <div className=\"raf-data-label\">\n        <span className=\"raf-data-label__label\">{this.props.label}</span>\n        <span className=\"raf-data-label__data\">{this.props.data}</span>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}