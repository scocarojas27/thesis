{"ast":null,"code":"'use strict';\n\nvar assign = require('../util/assign'),\n    EventEmitter = require('../util/event_emitter');\n\nvar Publisher = {\n  countListeners: function (eventType) {\n    return this.listeners(eventType).length;\n  },\n  bind: function (eventType, listener, context) {\n    var slice = Array.prototype.slice,\n        handler = function () {\n      listener.apply(context, slice.call(arguments));\n    };\n\n    this._listeners = this._listeners || [];\n\n    this._listeners.push([eventType, listener, context, handler]);\n\n    return this.on(eventType, handler);\n  },\n  unbind: function (eventType, listener, context) {\n    this._listeners = this._listeners || [];\n    var n = this._listeners.length,\n        tuple;\n\n    while (n--) {\n      tuple = this._listeners[n];\n      if (tuple[0] !== eventType) continue;\n      if (listener && (tuple[1] !== listener || tuple[2] !== context)) continue;\n\n      this._listeners.splice(n, 1);\n\n      this.removeListener(eventType, tuple[3]);\n    }\n  }\n};\nassign(Publisher, EventEmitter.prototype);\nPublisher.trigger = Publisher.emit;\nmodule.exports = Publisher;","map":{"version":3,"sources":["/home/scocarojas/Documents/prototype/node_modules/faye/src/mixins/publisher.js"],"names":["assign","require","EventEmitter","Publisher","countListeners","eventType","listeners","length","bind","listener","context","slice","Array","prototype","handler","apply","call","arguments","_listeners","push","on","unbind","n","tuple","splice","removeListener","trigger","emit","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,MAAM,GAASC,OAAO,CAAC,gBAAD,CAA1B;AAAA,IACIC,YAAY,GAAGD,OAAO,CAAC,uBAAD,CAD1B;;AAGA,IAAIE,SAAS,GAAG;AACdC,EAAAA,cAAc,EAAE,UAASC,SAAT,EAAoB;AAClC,WAAO,KAAKC,SAAL,CAAeD,SAAf,EAA0BE,MAAjC;AACD,GAHa;AAKdC,EAAAA,IAAI,EAAE,UAASH,SAAT,EAAoBI,QAApB,EAA8BC,OAA9B,EAAuC;AAC3C,QAAIC,KAAK,GAAKC,KAAK,CAACC,SAAN,CAAgBF,KAA9B;AAAA,QACIG,OAAO,GAAG,YAAW;AAAEL,MAAAA,QAAQ,CAACM,KAAT,CAAeL,OAAf,EAAwBC,KAAK,CAACK,IAAN,CAAWC,SAAX,CAAxB;AAAgD,KAD3E;;AAGA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;;AACA,SAAKA,UAAL,CAAgBC,IAAhB,CAAqB,CAACd,SAAD,EAAYI,QAAZ,EAAsBC,OAAtB,EAA+BI,OAA/B,CAArB;;AACA,WAAO,KAAKM,EAAL,CAAQf,SAAR,EAAmBS,OAAnB,CAAP;AACD,GAZa;AAcdO,EAAAA,MAAM,EAAE,UAAShB,SAAT,EAAoBI,QAApB,EAA8BC,OAA9B,EAAuC;AAC7C,SAAKQ,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;AACA,QAAII,CAAC,GAAG,KAAKJ,UAAL,CAAgBX,MAAxB;AAAA,QAAgCgB,KAAhC;;AAEA,WAAOD,CAAC,EAAR,EAAY;AACVC,MAAAA,KAAK,GAAG,KAAKL,UAAL,CAAgBI,CAAhB,CAAR;AACA,UAAIC,KAAK,CAAC,CAAD,CAAL,KAAalB,SAAjB,EAA4B;AAC5B,UAAII,QAAQ,KAAKc,KAAK,CAAC,CAAD,CAAL,KAAad,QAAb,IAAyBc,KAAK,CAAC,CAAD,CAAL,KAAab,OAA3C,CAAZ,EAAiE;;AACjE,WAAKQ,UAAL,CAAgBM,MAAhB,CAAuBF,CAAvB,EAA0B,CAA1B;;AACA,WAAKG,cAAL,CAAoBpB,SAApB,EAA+BkB,KAAK,CAAC,CAAD,CAApC;AACD;AACF;AAzBa,CAAhB;AA4BAvB,MAAM,CAACG,SAAD,EAAYD,YAAY,CAACW,SAAzB,CAAN;AACAV,SAAS,CAACuB,OAAV,GAAoBvB,SAAS,CAACwB,IAA9B;AAEAC,MAAM,CAACC,OAAP,GAAiB1B,SAAjB","sourcesContent":["'use strict';\n\nvar assign       = require('../util/assign'),\n    EventEmitter = require('../util/event_emitter');\n\nvar Publisher = {\n  countListeners: function(eventType) {\n    return this.listeners(eventType).length;\n  },\n\n  bind: function(eventType, listener, context) {\n    var slice   = Array.prototype.slice,\n        handler = function() { listener.apply(context, slice.call(arguments)) };\n\n    this._listeners = this._listeners || [];\n    this._listeners.push([eventType, listener, context, handler]);\n    return this.on(eventType, handler);\n  },\n\n  unbind: function(eventType, listener, context) {\n    this._listeners = this._listeners || [];\n    var n = this._listeners.length, tuple;\n\n    while (n--) {\n      tuple = this._listeners[n];\n      if (tuple[0] !== eventType) continue;\n      if (listener && (tuple[1] !== listener || tuple[2] !== context)) continue;\n      this._listeners.splice(n, 1);\n      this.removeListener(eventType, tuple[3]);\n    }\n  }\n};\n\nassign(Publisher, EventEmitter.prototype);\nPublisher.trigger = Publisher.emit;\n\nmodule.exports = Publisher;\n"]},"metadata":{},"sourceType":"script"}