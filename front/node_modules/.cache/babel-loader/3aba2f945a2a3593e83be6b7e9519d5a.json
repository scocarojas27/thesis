{"ast":null,"code":"var each = require('./utils/each');\n\nmodule.exports = function (StreamAnalytics) {\n  var loaded = window.StreamAnalytics || null,\n      cached = window._StreamAnalytics || null,\n      clients;\n\n  if (loaded && cached) {\n    clients = cached.clients || {};\n    each(clients, function (client\n    /*, id */\n    ) {\n      each(StreamAnalytics.prototype, function (method, key) {\n        loaded.prototype[key] = method;\n      }); // Run config\n\n      if (client._config) {\n        client.configure.call(client, client._config);\n      } // Run setUser\n\n\n      if (client._setUser) {\n        each(client._setUser, function (args) {\n          client.setUser.apply(client, args);\n        });\n      } // Send Queued Events\n\n\n      if (client._trackImpression) {\n        each(client._trackImpression, function (obj) {\n          client.trackImpression.apply(client, obj);\n        });\n      } // Send Queued Events\n\n\n      if (client._trackEngagement) {\n        each(client._trackEngagement, function (obj) {\n          client.trackEngagement.apply(client, obj);\n        });\n      } // unset config\n\n\n      each(['_config', '_setUser', '_trackEngagement', '_trackImpression'], function (name) {\n        if (client[name]) {\n          client[name] = undefined;\n\n          try {\n            delete client[name];\n          } catch (e) {// do nothing\n          }\n        }\n      });\n    });\n  }\n\n  window._StreamAnalytics = undefined;\n\n  try {\n    delete window['_StreamAnalytics'];\n  } catch (e) {// do nothing\n  }\n};","map":{"version":3,"sources":["/home/scocarojas/Documents/prototype/front/node_modules/stream-analytics/src/async.js"],"names":["each","require","module","exports","StreamAnalytics","loaded","window","cached","_StreamAnalytics","clients","client","prototype","method","key","_config","configure","call","_setUser","args","setUser","apply","_trackImpression","obj","trackImpression","_trackEngagement","trackEngagement","name","undefined","e"],"mappings":"AAAA,IAAIA,IAAI,GAAGC,OAAO,CAAC,cAAD,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,eAAV,EAA2B;AAC1C,MAAIC,MAAM,GAAGC,MAAM,CAACF,eAAP,IAA0B,IAAvC;AAAA,MACIG,MAAM,GAAGD,MAAM,CAACE,gBAAP,IAA2B,IADxC;AAAA,MAEIC,OAFJ;;AAIA,MAAIJ,MAAM,IAAIE,MAAd,EAAsB;AACpBE,IAAAA,OAAO,GAAGF,MAAM,CAACE,OAAP,IAAkB,EAA5B;AAEAT,IAAAA,IAAI,CAACS,OAAD,EAAU,UAAUC;AAAM;AAAhB,MAA2B;AAEvCV,MAAAA,IAAI,CAACI,eAAe,CAACO,SAAjB,EAA4B,UAAUC,MAAV,EAAkBC,GAAlB,EAAuB;AACrDR,QAAAA,MAAM,CAACM,SAAP,CAAiBE,GAAjB,IAAwBD,MAAxB;AACD,OAFG,CAAJ,CAFuC,CAMvC;;AACA,UAAIF,MAAM,CAACI,OAAX,EAAoB;AAClBJ,QAAAA,MAAM,CAACK,SAAP,CAAiBC,IAAjB,CAAsBN,MAAtB,EAA8BA,MAAM,CAACI,OAArC;AACD,OATsC,CAWvC;;;AACA,UAAIJ,MAAM,CAACO,QAAX,EAAqB;AACnBjB,QAAAA,IAAI,CAACU,MAAM,CAACO,QAAR,EAAkB,UAAUC,IAAV,EAAgB;AACpCR,UAAAA,MAAM,CAACS,OAAP,CAAeC,KAAf,CAAqBV,MAArB,EAA6BQ,IAA7B;AACD,SAFG,CAAJ;AAGD,OAhBsC,CAkBvC;;;AACA,UAAIR,MAAM,CAACW,gBAAX,EAA6B;AAC3BrB,QAAAA,IAAI,CAACU,MAAM,CAACW,gBAAR,EAA0B,UAAUC,GAAV,EAAe;AAC3CZ,UAAAA,MAAM,CAACa,eAAP,CAAuBH,KAAvB,CAA6BV,MAA7B,EAAqCY,GAArC;AACD,SAFG,CAAJ;AAGD,OAvBsC,CAyBvC;;;AACA,UAAIZ,MAAM,CAACc,gBAAX,EAA6B;AAC3BxB,QAAAA,IAAI,CAACU,MAAM,CAACc,gBAAR,EAA0B,UAAUF,GAAV,EAAe;AAC3CZ,UAAAA,MAAM,CAACe,eAAP,CAAuBL,KAAvB,CAA6BV,MAA7B,EAAqCY,GAArC;AACD,SAFG,CAAJ;AAGD,OA9BsC,CAgCvC;;;AACAtB,MAAAA,IAAI,CAAC,CAAC,SAAD,EAAY,UAAZ,EAAwB,kBAAxB,EAA4C,kBAA5C,CAAD,EAAkE,UAAU0B,IAAV,EAAgB;AACpF,YAAIhB,MAAM,CAACgB,IAAD,CAAV,EAAkB;AAChBhB,UAAAA,MAAM,CAACgB,IAAD,CAAN,GAAeC,SAAf;;AACA,cAAI;AACF,mBAAOjB,MAAM,CAACgB,IAAD,CAAb;AACD,WAFD,CAEE,OAAOE,CAAP,EAAU,CACR;AACH;AACF;AACF,OATG,CAAJ;AAWD,KA5CG,CAAJ;AA8CD;;AAEDtB,EAAAA,MAAM,CAACE,gBAAP,GAA0BmB,SAA1B;;AACA,MAAI;AACF,WAAOrB,MAAM,CAAC,kBAAD,CAAb;AACD,GAFD,CAEE,OAAOsB,CAAP,EAAU,CACV;AACD;AACF,CA9DD","sourcesContent":["var each = require('./utils/each');\n\nmodule.exports = function (StreamAnalytics) {\n  var loaded = window.StreamAnalytics || null,\n      cached = window._StreamAnalytics || null,\n      clients;\n\n  if (loaded && cached) {\n    clients = cached.clients || {};\n\n    each(clients, function (client/*, id */) {\n\n      each(StreamAnalytics.prototype, function (method, key) {\n        loaded.prototype[key] = method;\n      });\n\n      // Run config\n      if (client._config) {\n        client.configure.call(client, client._config);\n      }\n\n      // Run setUser\n      if (client._setUser) {\n        each(client._setUser, function (args) {\n          client.setUser.apply(client, args);\n        });\n      }\n\n      // Send Queued Events\n      if (client._trackImpression) {\n        each(client._trackImpression, function (obj) {\n          client.trackImpression.apply(client, obj);\n        });\n      }\n\n      // Send Queued Events\n      if (client._trackEngagement) {\n        each(client._trackEngagement, function (obj) {\n          client.trackEngagement.apply(client, obj);\n        });\n      }\n\n      // unset config\n      each(['_config', '_setUser', '_trackEngagement', '_trackImpression'], function (name) {\n        if (client[name]) {\n          client[name] = undefined;\n          try {\n            delete client[name];\n          } catch (e) {\n              // do nothing\n          }\n        }\n      });\n\n    });\n\n  }\n\n  window._StreamAnalytics = undefined;\n  try {\n    delete window['_StreamAnalytics'];\n  } catch (e) {\n    // do nothing\n  }\n};\n"]},"metadata":{},"sourceType":"script"}