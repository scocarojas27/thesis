{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _errors = _interopRequireDefault(require(\"./errors\"));\n\nvar CollectionEntry = /*#__PURE__*/function () {\n  function CollectionEntry(store, collection, id, data) {\n    (0, _classCallCheck2.default)(this, CollectionEntry);\n    this.collection = collection;\n    this.store = store;\n    this.id = id;\n    this.data = data;\n  }\n\n  (0, _createClass2.default)(CollectionEntry, [{\n    key: \"ref\",\n    value: function ref() {\n      return \"SO:\".concat(this.collection, \":\").concat(this.id);\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var response;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.store.get(this.collection, this.id);\n\n              case 2:\n                response = _context.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"add\",\n    value: function () {\n      var _add = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var response;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.store.add(this.collection, this.id, this.data);\n\n              case 2:\n                response = _context2.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context2.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function add() {\n        return _add.apply(this, arguments);\n      }\n\n      return add;\n    }()\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var response;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.store.update(this.collection, this.id, this.data);\n\n              case 2:\n                response = _context3.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context3.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function update() {\n        return _update.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        var response;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.store.delete(this.collection, this.id);\n\n              case 2:\n                response = _context4.sent;\n                this.data = null;\n                this.full = null;\n                return _context4.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _delete() {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }]);\n  return CollectionEntry;\n}();\n\nvar Collections = /*#__PURE__*/function () {\n  /**\n   * Initialize a feed object\n   * @method constructor\n   * @memberof Collections.prototype\n   * @param {StreamCloudClient} client Stream client this collection is constructed from\n   * @param {string} token JWT token\n   */\n  function Collections(client, token) {\n    (0, _classCallCheck2.default)(this, Collections);\n    (0, _defineProperty2.default)(this, \"buildURL\", function (collection, itemId) {\n      var url = \"collections/\".concat(collection, \"/\");\n      return itemId === undefined ? url : \"\".concat(url).concat(itemId, \"/\");\n    });\n    this.client = client;\n    this.token = token;\n  }\n\n  (0, _createClass2.default)(Collections, [{\n    key: \"entry\",\n    value: function entry(collection, itemId, itemData) {\n      return new CollectionEntry(this, collection, itemId, itemData);\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(collection, itemId) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.client.get({\n                  url: this.buildURL(collection, itemId),\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context5.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context5.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function get(_x, _x2) {\n        return _get2.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"add\",\n    value: function () {\n      var _add2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(collection, itemId, itemData) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.client.post({\n                  url: this.buildURL(collection),\n                  body: {\n                    id: itemId === null ? undefined : itemId,\n                    data: itemData\n                  },\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context6.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context6.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function add(_x3, _x4, _x5) {\n        return _add2.apply(this, arguments);\n      }\n\n      return add;\n    }()\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(collection, entryId, data) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.client.put({\n                  url: this.buildURL(collection, entryId),\n                  body: {\n                    data: data\n                  },\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context7.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context7.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function update(_x6, _x7, _x8) {\n        return _update2.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"delete\",\n    value: function _delete(collection, entryId) {\n      /**\n       * Delete entry from collection\n       * @method delete\n       * @memberof Collections.prototype\n       * @param  {object}   entryId  Collection entry id\n       * @return {Promise} Promise object\n       * @example collection.delete(\"food\", \"cheese101\")\n       */\n      return this.client.delete({\n        url: this.buildURL(collection, entryId),\n        signature: this.token\n      });\n    }\n  }, {\n    key: \"upsert\",\n    value: function upsert(collection, data) {\n      /**\n       * Upsert one or more items within a collection.\n       *\n       * @method upsert\n       * @memberof Collections.prototype\n       * @param {object|array} data - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(data)) data = [data];\n      return this.client.post({\n        url: 'collections/',\n        serviceName: 'api',\n        body: {\n          data: (0, _defineProperty2.default)({}, collection, data)\n        },\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }, {\n    key: \"select\",\n    value: function select(collection, ids) {\n      /**\n       * Select all objects with ids from the collection.\n       *\n       * @method select\n       * @memberof Collections.prototype\n       * @param {object|array} ids - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(ids)) ids = [ids];\n      return this.client.get({\n        url: 'collections/',\n        serviceName: 'api',\n        qs: {\n          foreign_ids: ids.map(function (id) {\n            return \"\".concat(collection, \":\").concat(id);\n          }).join(',')\n        },\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }, {\n    key: \"deleteMany\",\n    value: function deleteMany(collection, ids) {\n      /**\n       * Remove all objects by id from the collection.\n       *\n       * @method delete\n       * @memberof Collections.prototype\n       * @param {object|array} ids - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(ids)) ids = [ids];\n      var params = {\n        collection_name: collection,\n        ids: ids.map(function (id) {\n          return id.toString();\n        }).join(',')\n      };\n      return this.client.delete({\n        url: 'collections/',\n        serviceName: 'api',\n        qs: params,\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }]);\n  return Collections;\n}();\n\nexports.default = Collections;","map":{"version":3,"sources":["/home/scocarojas/Documents/prototype/node_modules/getstream/lib/lib/collections.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_defineProperty2","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_errors","CollectionEntry","store","collection","id","data","key","ref","concat","_get","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","full","abrupt","stop","apply","arguments","_add","_callee2","_callee2$","_context2","add","_update","_callee3","_callee3$","_context3","update","_delete2","_callee4","_callee4$","_context4","delete","_delete","Collections","client","token","itemId","url","undefined","entry","itemData","_get2","_callee5","_callee5$","_context5","buildURL","signature","collections","_x","_x2","_add2","_callee6","_callee6$","_context6","post","body","_x3","_x4","_x5","_update2","_callee7","entryId","_callee7$","_context7","put","_x6","_x7","_x8","upsert","usingApiSecret","SiteError","Array","isArray","serviceName","getCollectionsToken","select","ids","qs","foreign_ids","map","join","deleteMany","params","collection_name","toString"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _errors = _interopRequireDefault(require(\"./errors\"));\n\nvar CollectionEntry = /*#__PURE__*/function () {\n  function CollectionEntry(store, collection, id, data) {\n    (0, _classCallCheck2.default)(this, CollectionEntry);\n    this.collection = collection;\n    this.store = store;\n    this.id = id;\n    this.data = data;\n  }\n\n  (0, _createClass2.default)(CollectionEntry, [{\n    key: \"ref\",\n    value: function ref() {\n      return \"SO:\".concat(this.collection, \":\").concat(this.id);\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var response;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.store.get(this.collection, this.id);\n\n              case 2:\n                response = _context.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get() {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"add\",\n    value: function () {\n      var _add = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var response;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.store.add(this.collection, this.id, this.data);\n\n              case 2:\n                response = _context2.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context2.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function add() {\n        return _add.apply(this, arguments);\n      }\n\n      return add;\n    }()\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var response;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.store.update(this.collection, this.id, this.data);\n\n              case 2:\n                response = _context3.sent;\n                this.data = response.data;\n                this.full = response;\n                return _context3.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function update() {\n        return _update.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        var response;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.store.delete(this.collection, this.id);\n\n              case 2:\n                response = _context4.sent;\n                this.data = null;\n                this.full = null;\n                return _context4.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _delete() {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }]);\n  return CollectionEntry;\n}();\n\nvar Collections = /*#__PURE__*/function () {\n  /**\n   * Initialize a feed object\n   * @method constructor\n   * @memberof Collections.prototype\n   * @param {StreamCloudClient} client Stream client this collection is constructed from\n   * @param {string} token JWT token\n   */\n  function Collections(client, token) {\n    (0, _classCallCheck2.default)(this, Collections);\n    (0, _defineProperty2.default)(this, \"buildURL\", function (collection, itemId) {\n      var url = \"collections/\".concat(collection, \"/\");\n      return itemId === undefined ? url : \"\".concat(url).concat(itemId, \"/\");\n    });\n    this.client = client;\n    this.token = token;\n  }\n\n  (0, _createClass2.default)(Collections, [{\n    key: \"entry\",\n    value: function entry(collection, itemId, itemData) {\n      return new CollectionEntry(this, collection, itemId, itemData);\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(collection, itemId) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.client.get({\n                  url: this.buildURL(collection, itemId),\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context5.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context5.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function get(_x, _x2) {\n        return _get2.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"add\",\n    value: function () {\n      var _add2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(collection, itemId, itemData) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.client.post({\n                  url: this.buildURL(collection),\n                  body: {\n                    id: itemId === null ? undefined : itemId,\n                    data: itemData\n                  },\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context6.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context6.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function add(_x3, _x4, _x5) {\n        return _add2.apply(this, arguments);\n      }\n\n      return add;\n    }()\n  }, {\n    key: \"update\",\n    value: function () {\n      var _update2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(collection, entryId, data) {\n        var response, entry;\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.client.put({\n                  url: this.buildURL(collection, entryId),\n                  body: {\n                    data: data\n                  },\n                  signature: this.token\n                });\n\n              case 2:\n                response = _context7.sent;\n                entry = this.client.collections.entry(response.collection, response.id, response.data);\n                entry.full = response;\n                return _context7.abrupt(\"return\", entry);\n\n              case 6:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function update(_x6, _x7, _x8) {\n        return _update2.apply(this, arguments);\n      }\n\n      return update;\n    }()\n  }, {\n    key: \"delete\",\n    value: function _delete(collection, entryId) {\n      /**\n       * Delete entry from collection\n       * @method delete\n       * @memberof Collections.prototype\n       * @param  {object}   entryId  Collection entry id\n       * @return {Promise} Promise object\n       * @example collection.delete(\"food\", \"cheese101\")\n       */\n      return this.client.delete({\n        url: this.buildURL(collection, entryId),\n        signature: this.token\n      });\n    }\n  }, {\n    key: \"upsert\",\n    value: function upsert(collection, data) {\n      /**\n       * Upsert one or more items within a collection.\n       *\n       * @method upsert\n       * @memberof Collections.prototype\n       * @param {object|array} data - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(data)) data = [data];\n      return this.client.post({\n        url: 'collections/',\n        serviceName: 'api',\n        body: {\n          data: (0, _defineProperty2.default)({}, collection, data)\n        },\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }, {\n    key: \"select\",\n    value: function select(collection, ids) {\n      /**\n       * Select all objects with ids from the collection.\n       *\n       * @method select\n       * @memberof Collections.prototype\n       * @param {object|array} ids - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(ids)) ids = [ids];\n      return this.client.get({\n        url: 'collections/',\n        serviceName: 'api',\n        qs: {\n          foreign_ids: ids.map(function (id) {\n            return \"\".concat(collection, \":\").concat(id);\n          }).join(',')\n        },\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }, {\n    key: \"deleteMany\",\n    value: function deleteMany(collection, ids) {\n      /**\n       * Remove all objects by id from the collection.\n       *\n       * @method delete\n       * @memberof Collections.prototype\n       * @param {object|array} ids - A single json object or an array of objects\n       * @return {Promise} Promise object.\n       */\n      if (!this.client.usingApiSecret) {\n        throw new _errors.default.SiteError('This method can only be used server-side using your API Secret');\n      }\n\n      if (!Array.isArray(ids)) ids = [ids];\n      var params = {\n        collection_name: collection,\n        ids: ids.map(function (id) {\n          return id.toString();\n        }).join(',')\n      };\n      return this.client.delete({\n        url: 'collections/',\n        serviceName: 'api',\n        qs: params,\n        signature: this.client.getCollectionsToken()\n      });\n    }\n  }]);\n  return Collections;\n}();\n\nexports.default = Collections;"]},"metadata":{},"sourceType":"script"}